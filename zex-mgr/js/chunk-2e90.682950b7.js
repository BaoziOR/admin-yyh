(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e90","62a2","62a2","chunk-d730","chunk-5a4c"],{"19da":function(t,e,a){"use strict";var i=a("d9df"),n=a.n(i);n.a},2268:function(t,e,a){"use strict";var i=a("5d09"),n=a.n(i);n.a},3188:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[t.campaginManagementPage?t._e():a("div",[a("div",{staticStyle:{width:"100%",background:"#fff","box-shadow":"0 6px 6px -4px rgba(0,0,0,.2)","z-index":"1",position:"fixed",padding:"14px"}},[a("Steps",{attrs:{current:2}},[a("Step",{attrs:{title:"基础设置",content:"已经完成"}}),a("Step",{attrs:{title:"规则设置",content:"已经完成"}}),a("Step",{attrs:{title:"整点抢设置",content:"进行中"}})],1)],1),a("div",{staticStyle:{"padding-top":"80px"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("领优惠---整点抢设置")]),a("a",{attrs:{slot:"extra",href:"#"},slot:"extra"},[a("Button",{attrs:{type:"dashed",icon:"md-arrow-round-back"},on:{click:function(e){t.goback()}}},[t._v("返回上一层")])],1),a("Alert",{attrs:{"show-icon":""}},[a("span",{staticStyle:{"margin-left":"1%"}},[t._v("\n            活动ID :\n            "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.campId))])]),a("span",{staticStyle:{"margin-left":"20%"}},[t._v("\n              设置总天数 :\n              "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.daySum))])]),a("span",{staticStyle:{"margin-left":"20%"}},[t._v("\n              库存数量 :\n               "),"999999999"!=t.stockCount?a("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(t.stockCount))]):t._e(),"999999999"==t.stockCount?a("span",{staticStyle:{color:"red"}},[t._v("无限制")]):t._e()]),a("br"),a("span",{staticStyle:{"line-height":"2"}},[a("span",{staticStyle:{color:"red"}},[t._v("注意：每个设置的限制数量，必须乘于设置总天数，并且小于库存数量")])]),a("span",{attrs:{slot:"desc"},slot:"desc"})]),a("Form",{attrs:{"label-width":100}},[a("Timeline",{attrs:{pending:""}},t._l(t.campaginGrabInfoList,function(e,i){return a("TimelineItem",{key:i},[a("Row",[a("Col",{attrs:{span:"2"}},[a("p",{staticClass:"time"},[t._v("设置"+t._s(i+1))])]),a("Col",{attrs:{span:"22"}},[a("Card",[a("Row",[a("Col",{attrs:{span:"7"}},[a("FormItem",{attrs:{label:"限制数量",required:""}},[a("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"限制数量最小为1",placement:"top"}},[a("InputNumber",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入",min:1},on:{"on-change":t.statusCheckChange},model:{value:e.limitCnt,callback:function(a){t.$set(e,"limitCnt",a)},expression:"item.limitCnt"}}),a("span",{staticStyle:{color:"red"}},[t._v("   张")])],1)],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"整点开始时间",required:""}},[a("TimePicker",{staticStyle:{width:"120px"},attrs:{format:"HH:mm:ss",placeholder:"请选择时间",steps:[1,60,60]},on:{"on-change":t.statusCheckChange},model:{value:e.timeStart,callback:function(a){t.$set(e,"timeStart",a)},expression:"item.timeStart"}})],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"整点结束时间",required:""}},[a("TimePicker",{staticStyle:{width:"120px"},attrs:{format:"HH:mm:ss",placeholder:"请选择时间","disabled-minutes":[0],"disabled-seconds":[0],steps:[1,59,59]},on:{"on-change":t.statusCheckChange},model:{value:e.timeEnd,callback:function(a){t.$set(e,"timeEnd",a)},expression:"item.timeEnd"}})],1)],1),a("Col",{attrs:{span:"1"}},[t.campaginGrabInfoList.length>1?a("Button",{staticStyle:{"margin-left":"5%"},attrs:{type:"error",size:"small"},on:{click:function(a){t.handleRemove(i,e)}}},[t._v("删除")]):t._e()],1)],1)],1)],1)],1)],1)})),a("FormItem",[a("Button",{attrs:{type:"success",icon:"md-add"},on:{click:t.handleAdd}},[t._v("新增")])],1),a("FormItem",{attrs:{"label-width":220}},[1==t.isCheckDisabled?a("Alert",{staticStyle:{width:"220px"},attrs:{type:"warning","show-icon":""}},[t._v("修改后才能保存")]):t._e(),a("Button",{staticStyle:{width:"220px","margin-right":"30px"},attrs:{type:"primary",loading:t.campaginGrabInfo_loading,disabled:t.isCheckDisabled},on:{click:function(e){t.campaginGrabInfoEdit()}}},[t._v("保存")])],1)],1)],1)],1)]),t.campaginManagementPage?a("div",[a("campaginManagement",{on:{changeStatus:t.showcampaginGrabInfo}})],1):t._e(),a("Modal",{attrs:{width:"360",title:"设置成功"},on:{"on-cancel":t.closeModal},model:{value:t.next_modal,callback:function(e){t.next_modal=e},expression:"next_modal"}},[a("p",[t._v("即将跳转领优惠列表...")]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"success",size:"large",long:""},on:{click:t.closeModal}},[t._v("确定")])],1)])],1)},n=[],s=a("a322"),o=a("7f80"),r=(a("62a2"),a("e092")),c={name:"campaginGrabInfo",props:{},components:{campaginManagement:r["default"]},data:function(){var t;return t={next_modal:!1,campaginManagementPage:!1,campaginGrabInfoList:[{campId:"",limitCnt:1,timeEnd:"",timeStart:""}],campaginGrabInfo_loading:!1,campaginGrabInfo_campId:"",campaginGrabInfo_delId:[]},Object(s["a"])(t,"campaginGrabInfo_loading",!1),Object(s["a"])(t,"isCheckDisabled",!0),Object(s["a"])(t,"daySum",""),Object(s["a"])(t,"stockCount",""),Object(s["a"])(t,"campId",""),t},created:function(){this.init()},methods:{init:function(){this.daySum=this.getStore("daySum"),this.stockCount=this.getStore("stockCount"),console.log(this.stockCount),this.campId=this.getStore("campId"),this.getCampaginGrabInfoList()},getCampaginGrabInfoList:function(){var t=this,e={campId:this.campId};Object(o["f"])("/campaginGrabInfo/selectCampaginGrabInfoByCampId?campId="+this.campId,e).then(function(e){200==e.code&&(e.data.length>0?t.campaginGrabInfoList=e.data:t.campaginGrabInfoList=[{campId:t.campId,id:"",limitCnt:1,timeEnd:"",timeStart:""}])})},campaginGrabInfoEdit:function(){var t=this;if(this.campaginGrabInfoList.length>15)this.$Message.error("不能超过15个整点抢设置",3);else{for(var e=0,a=0;a<this.campaginGrabInfoList.length;a++){var i=a+1;if(""===this.campaginGrabInfoList[a].limitCnt)return void this.$Message.error("设置"+i+"条限制数量不能为空！");if(""===this.campaginGrabInfoList[a].timeStart)return void this.$Message.error("设置"+i+"条开始时间不能为空！");if(""===this.campaginGrabInfoList[a].timeEnd)return void this.$Message.error("设置"+i+"条结束时间不能为空！");if(this.campaginGrabInfoList[a].timeStart==this.campaginGrabInfoList[a].timeEnd)return void this.$Message.error("设置"+i+"开始时间不能等于结束时间");if(this.campaginGrabInfoList[a].timeStart>this.campaginGrabInfoList[a].timeEnd)return void this.$Message.error("设置"+i+"开始时间不能大于结束时间");e+=this.campaginGrabInfoList[a].limitCnt}for(a=0;a<this.campaginGrabInfoList.length;a++)if(this.campaginGrabInfoList.length>a+1){i=a+1;if(this.campaginGrabInfoList[a+1].timeStart<=this.campaginGrabInfoList[a].timeEnd)return void this.$Message.error("设置"+i+"的结束时间不能大于设置"+[i+1]+"的开始时间")}if("999999999"!=this.stockCount&&e*this.daySum>this.stockCount)this.$Message.error("库存数量不足(请在规则设置修改库存数量)");else{var n={daySum:this.daySum,campId:this.campId,delIds:this.campaginGrabInfo_delId.join(),campaginGrabInfoParamVOList:this.campaginGrabInfoList};Object(o["f"])("/campaginGrabInfo/edit",n).then(function(e){200==e.code?(t.isCheckDisabled=!0,t.next_modal=!0):t.$Message.error(e.msg)})}}},handleAdd:function(){this.campaginGrabInfoList.length>=15?this.$Message.error("不能超过15个整点抢设置"):(this.campaginGrabInfoList.push({campId:this.campId,limitCnt:1,timeEnd:"",timeStart:""}),this.statusCheckChange())},handleRemove:function(t,e){this.campaginGrabInfoList.splice(t,1),e.id&&this.campaginGrabInfo_delId.push(e.id),this.statusCheckChange()},showcampaginGrabInfo:function(t){this.campaginManagementPage=t},closeModal:function(){var t=this;this.next_modal=!1,setTimeout(function(){t.setStore("campId",""),t.setStore("daySum",""),t.setStore("stockCount",""),t.$emit("changeStatus",{Return:!1,type:1})},1200)},statusCheckChange:function(){this.isCheckDisabled=!1},goback:function(){this.$emit("changeStatus",{Return:!1,isNext:!0})}},mounted:function(){this.init()}},d=c,l=(a("a896"),a("2877")),p=Object(l["a"])(d,i,n,!1,null,"25ad4981",null);p.options.__file="campaginGrabInfo.vue";e["default"]=p.exports},"39cd":function(t,e,a){"use strict";a.r(e);var i,n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.receiveRuleSetPage?t._e():a("div",[a("div",{staticStyle:{width:"100%",background:"#fff","box-shadow":"0 6px 6px -4px rgba(0,0,0,.2)","z-index":"1",position:"fixed",padding:"14px"}},[a("Steps",{attrs:{current:0}},[a("Step",{attrs:{title:"基础设置",content:"进行中"}}),a("Step",{attrs:{title:"规则设置",content:"待进行"}})],1)],1),a("div",{staticStyle:{"padding-top":"80px"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("领优惠---基础设置")]),a("a",{attrs:{slot:"extra",href:"#"},slot:"extra"},[a("Button",{attrs:{type:"dashed",icon:"md-arrow-round-back"},on:{click:function(e){t.goback()}}},[t._v("返回列表")])],1),t.campId?a("Alert",{attrs:{"show-icon":""}},[t._v("\n          活动ID :\n          "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.campId))]),a("span",{attrs:{slot:"desc"},slot:"desc"})]):t._e(),a("Form",{ref:"edit_info",attrs:{model:t.edit_info,"label-width":180}},[a("FormItem",{attrs:{label:"appid",required:""}},[a("Select",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入选择appid"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.appid,callback:function(e){t.$set(t.edit_info,"appid",e)},expression:"edit_info.appid"}},t._l(t.appId_info,function(e){return a("Option",{key:e.appid,attrs:{value:e.appid}},[t._v(t._s(e.appName))])}))],1),a("FormItem",{attrs:{label:"活动类型",required:""}},[a("Select",{staticStyle:{width:"300px"},attrs:{disabled:""},model:{value:t.edit_info.campType,callback:function(e){t.$set(t.edit_info,"campType",e)},expression:"edit_info.campType"}},[a("Option",{attrs:{value:"57"}},[t._v("领优惠")]),a("Option",{attrs:{value:"62"}},[t._v("要优惠")]),a("Option",{attrs:{value:"63"}},[t._v("领优惠分享奖励")]),a("Option",{attrs:{value:"64"}},[t._v("要优惠参与奖励（接受分享/参团）")])],1)],1),a("FormItem",{attrs:{label:"优惠券类型",required:""}},[a("Select",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入选择优惠券类型"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.couponType,callback:function(e){t.$set(t.edit_info,"couponType",e)},expression:"edit_info.couponType"}},[a("Option",{attrs:{value:"1"}},[t._v("换购券")]),a("Option",{attrs:{value:"2"}},[t._v("商品券")]),a("Option",{attrs:{value:"3"}},[t._v("折扣券")]),a("Option",{attrs:{value:"4"}},[t._v("全场券")])],1)],1),a("FormItem",{attrs:{label:"活动标题",required:""}},[a("Input",{staticStyle:{width:"300px"},attrs:{type:"text",placeholder:"请输入活动标题"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.name,callback:function(e){t.$set(t.edit_info,"name",e)},expression:"edit_info.name"}})],1),57==t.edit_info.campType?a("FormItem",{attrs:{label:"优惠面额描述",required:""}},[a("Input",{staticStyle:{width:"400px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请输入优惠面额描述"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.couponValueDesc,callback:function(e){t.$set(t.edit_info,"couponValueDesc",e)},expression:"edit_info.couponValueDesc"}})],1):t._e(),a("FormItem",{attrs:{label:"使用门槛描述",required:""}},[a("Input",{staticStyle:{width:"400px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请填写使用门槛描述"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.doorsillDesc,callback:function(e){t.$set(t.edit_info,"doorsillDesc",e)},expression:"edit_info.doorsillDesc"}})],1),a("FormItem",{attrs:{label:"活动时间类型",required:""}},[a("Select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择活动时间类型",disabled:""},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.dateType,callback:function(e){t.$set(t.edit_info,"dateType",e)},expression:"edit_info.dateType"}},[a("Option",{attrs:{value:"1"}},[t._v("固定日期时间范围有效")])],1)],1),"1"==t.edit_info.dateType?a("div",[a("FormItem",{attrs:{label:"活动开始时间",required:""}},[a("DatePicker",{staticStyle:{width:"300px"},attrs:{type:"date",placeholder:"选择活动开始时间"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.startDate,callback:function(e){t.$set(t.edit_info,"startDate",e)},expression:"edit_info.startDate"}})],1),a("FormItem",{attrs:{label:"活动结束时间",required:""}},[a("DatePicker",{staticStyle:{width:"300px"},attrs:{type:"date",placeholder:"选择活动结束时间"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.endDate,callback:function(e){t.$set(t.edit_info,"endDate",e)},expression:"edit_info.endDate"}})],1)],1):t._e(),a("FormItem",{attrs:{label:"优惠券缩略图",required:""}},[t._l(t.uploadList1,function(t,e){return a("div",{key:e,staticStyle:{float:"left",width:"90px",height:"90px","line-height":"90px","margin-right":"10px",border:"1px dashed #dcdee2",background:"#fff"}},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.url}})])}),a("div",{staticStyle:{display:"inline-block"}},[a("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"90px"},attrs:{defaultList:t.uploadList1,type:"drag",format:["jpg","jpeg","png","bmp"],"on-success":t.handleSuccess1,"before-upload":t.handleBeforeUpload,action:t.url,accept:"image","max-size":1024,headers:t.userToken,"on-exceeded-size":t.handleMaxSize,"show-upload-list":!1},on:{"on-change":t.statusCheckChange}},[a("div",{staticStyle:{width:"90px",height:"90px","line-height":"90px"}},[a("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),a("p",[t._v("选择优惠券缩略图 (不大于1M,尺寸为130*130, JPG/PNG/JPEG/BMP）")])],1)],2),a("FormItem",{attrs:{label:"优惠券详情图",required:""}},[t._l(t.uploadList,function(t,e){return a("div",{key:e,staticStyle:{float:"left",width:"90px",height:"90px","line-height":"90px","margin-right":"10px",border:"1px dashed #dcdee2",background:"#fff"}},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.url}})])}),a("div",{staticStyle:{display:"inline-block"}},[a("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"90px"},attrs:{defaultList:t.uploadList,type:"drag",format:["jpg","jpeg","png","bmp"],"on-success":t.handleSuccess,action:t.url,accept:"image","max-size":1024,headers:t.userToken,"on-exceeded-size":t.handleMaxSize,"show-upload-list":!1,"before-upload":t.handleBeforeUpload1},on:{"on-change":t.statusCheckChange}},[a("div",{staticStyle:{width:"90px",height:"90px","line-height":"90px"}},[a("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),a("p",[t._v("选择优惠券详情图 (不大于1M,尺寸为280*218, JPG/PNG/JPEG/BMP）")])],1)],2),a("FormItem",{attrs:{label:"优惠券模板",required:""}},[a("Button",{style:{width:"150px"},attrs:{type:"dashed"},on:{click:t.resInfo,"on-change":t.statusCheckChange}},[t._v("选择模版")]),t.edit_info.ticketTemplateId?a("Tag",{staticStyle:{"margin-left":"3%"},attrs:{checkable:"",color:"error"}},[t._v("已选择")]):t._e()],1),t.edit_info.ticketName?a("FormItem",[a("Alert",{staticStyle:{width:"500px"}},[a("Row",[t._v("模版ID："+t._s(t.edit_info.ticketTemplateId)+"  ")]),a("Row",[t._v("模版名称："+t._s(t.edit_info.ticketName)+"  ")])],1)],1):t._e(),a("FormItem",{attrs:{label:"活动/领券规则",required:""}},[a("Input",{staticStyle:{width:"400px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请填写活动/领券规则"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.rules,callback:function(e){t.$set(t.edit_info,"rules",e)},expression:"edit_info.rules"}})],1),a("FormItem",{attrs:{label:"券使用说明",required:""}},[a("Input",{staticStyle:{width:"400px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:8}},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.useDesc,callback:function(e){t.$set(t.edit_info,"useDesc",e)},expression:"edit_info.useDesc"}})],1),a("FormItem",{attrs:{label:"状态",required:"",placeholder:"请选择状态"}},[a("Select",{staticStyle:{width:"300px"},attrs:{disabled:""},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.status,callback:function(e){t.$set(t.edit_info,"status",e)},expression:"edit_info.status"}},[a("Option",{attrs:{value:"0"}},[t._v("创建")]),a("Option",{attrs:{value:"1"}},[t._v("上架")]),a("Option",{attrs:{value:"-1"}},[t._v("下架")])],1)],1),a("FormItem",{staticStyle:{"{'margin-top'":"'54px'}"}},[1==t.isCheckDisabled?a("Alert",{staticStyle:{width:"500px"},attrs:{type:"warning","show-icon":""}},[t._v("修改后才能保存")]):t._e(),a("Button",{staticStyle:{width:"150px"},attrs:{type:"primary",loading:t.edit_loading,disabled:t.isCheckDisabled},on:{click:function(e){t.campagin_add()}}},[t._v("保存")]),"edit"==t.camp_pageStatus&&1==t.isCheckDisabled?a("Button",{staticStyle:{width:"150px","margin-left":"5%"},attrs:{type:"dashed"},on:{click:function(e){t.nextInfo()}}},[t._v("下一步")]):t._e()],1)],1)],1)],1)]),a("Modal",{attrs:{width:"800",title:"选择模版"},model:{value:t.res_Modal_show,callback:function(e){t.res_Modal_show=e},expression:"res_Modal_show"}},[a("Form",{ref:"res_info",attrs:{model:t.res_info,"label-width":100,styles:{top:"10px"}}},[a("Table",{ref:"selection",attrs:{border:"",columns:t.res_columns,data:t.res_list,size:"small",height:"300"},scopedSlots:t._u([{key:"ChangeStart",fn:function(e){var i=e.row;return[0==i.changeDateType?a("span",[t._v(" "+t._s(i.changeStartDate))]):t._e(),1==i.changeDateType?a("span",[t._v(" 发券后+"+t._s(i.changeStart)+"天开始兑换")]):t._e()]}},{key:"ChangeEnd",fn:function(e){var i=e.row;return[0==i.changeDateType?a("span",[t._v(" "+t._s(i.changeEndDate))]):t._e(),1==i.changeDateType?a("span",[t._v(" 发券后+"+t._s(i.changeEnd)+"天结束兑换")]):t._e()]}}])})],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:function(e){t.res_Modal_show=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.res_loading},on:{click:t.resOk}},[t._v("保存")])],1)],1),t.receiveRuleSetPage?a("div",[a("receiveRuleSet",{attrs:{camp_pageStatus:t.camp_pageStatus},on:{changeStatus:t.showReceiveRuleSetStatus}})],1):t._e()],1)},s=[],o=a("a322"),r=a("7f80"),c=a("365c"),d=a("62a2"),l=a("5605"),p={name:"BasicSet",components:{receiveRuleSet:l["default"]},props:{camp_Info:Object},data:function(){var t=this;return{receiveRuleSetPage:!1,edit_info:{appid:"",campType:"57",couponType:"",couponValueDesc:"",dateType:"1",doorsillDesc:"",endDate:"",imgUrl:"",name:"",rules:"",startDate:"",status:"",ticketTemplateId:"",useDesc:"",couponImg:"",ChangeDateType:"",ChangeStartDate:"",ChangeEndDate:"",ChangeStart:"",ChangeEnd:""},edit_loading:!1,userToken:"",campId:"",imgUrl:"",url:c["g"],uploadList:[],uploadList1:[],camp_pageStatus:"",getUrl:"",msg:"",appId_info:[],codeList:[],res_Modal_show:!1,res_loading:!1,res_list:[],res_info:{},chooseResArray:[],isCheckDisabled:!0,currentChooseID:"",currentChooseName:"",res_columns:[{title:"选择",key:"ticketTemplateID",width:70,align:"center",render:function(e,a){var i=a.row.ticketTemplateID,n=a.row.ticketName,s=!1;s=t.currentChooseID===i;var o=t;return e("div",[e("Radio",{props:{value:s},on:{"on-change":function(){o.currentChooseID=i,o.currentChooseName=n,o.chooseResArray=a.row}}})])}},{title:"sheetID",key:"sheetID",width:200,align:"center"},{title:"模版ID",key:"ticketTemplateID",width:200,align:"center"},{title:"模版名称",key:"ticketName",width:200,align:"center"},{title:"ticketKind",key:"ticketKind",width:200,align:"center"},{title:"兑换类型",key:"ChangeDateType",width:200,align:"center",render:function(t,e){var a=e.row,i=0===a.changeDateType?"red":"blue",n=0===a.changeDateType?"固定时间兑换":"发券后+X天后开始兑换";return t("Tag",{props:{color:i}},n)}},{title:"兑换开始时间",key:"ChangeStart",width:200,align:"center",slot:"ChangeStart"},{title:"兑换结束时间",key:"ChangeEnd",width:200,align:"center",slot:"ChangeEnd"}]}},created:function(){this.userToken={jwttoken:localStorage.getItem("jwttoken")}},methods:(i={init:function(){this.camp_pageStatus=this.getStore("camp_pageStatus"),console.log(this.camp_pageStatus),this.getAppId(),this.getCampInfo()},getCampInfo:function(){"add"==this.camp_pageStatus?this.addInfo():"edit"==this.camp_pageStatus&&this.editInfo()},addInfo:function(){this.edit_info={appid:"",campType:"57",couponType:"2",couponValueDesc:"",doorsillDesc:"",imgUrl:"",name:"",rules:"",status:"0",ticketTemplateId:"",dateType:"1",endDate:"",startDate:"",useDesc:"",couponImg:"",ChangeDateType:"",ChangeStartDate:"",ChangeEndDate:"",ChangeStart:"",ChangeEnd:""},this.currentChooseID="",this.currentChooseName="",this.chooseResArray="",this.isCheckDisabled=!0,this.uploadList=[],this.uploadList1=[]},editInfo:function(){this.edit_info=this.camp_Info,this.uploadList=[{url:this.camp_Info.imgUrl}],this.uploadList1=[{url:this.camp_Info.couponImg}],this.edit_info.appid=this.camp_Info.appid,this.campId=this.camp_Info.campId,this.edit_info.name=this.camp_Info.name,this.edit_info.rules=this.camp_Info.rules.replace(/\\n/g,"\n"),this.edit_info.couponValueDesc=this.camp_Info.couponValueDesc.replace(/\\n/g,"\n"),this.edit_info.doorsillDesc=this.camp_Info.doorsillDesc.replace(/\\n/g,"\n"),this.edit_info.imgUrl=this.camp_Info.imgUrl,this.edit_info.couponImg=this.camp_Info.couponImg,this.edit_info.campType="57",this.edit_info.couponType=1==this.camp_Info.couponType?"1":2==this.camp_Info.couponType?"2":3==this.camp_Info.couponType?"3":4==this.camp_Info.couponType?"4":"5",this.edit_info.status=0==this.camp_Info.status?"0":1==this.camp_Info.status?"1":"-1",this.edit_info.ticketTemplateId=this.camp_Info.ticketTemplateId,this.currentChooseID=this.edit_info.ticketTemplateId,this.currentChooseName=this.edit_info.ticketName,this.chooseResArray=this.edit_info.ticketTemplateId,this.edit_info.dateType=1==this.camp_Info.dateType?"1":"2",this.edit_info.startDate=this.camp_Info.startDate||"",this.edit_info.endDate=this.camp_Info.endDate||"",this.edit_info.useDesc=this.camp_Info.useDesc.replace(/\\n/g,"\n"),this.edit_info.ChangeDateType=0==this.camp_Info.changeDateType?"0":"1",this.edit_info.ChangeStartDate=this.camp_Info.changeStartDate,this.edit_info.ChangeEndDate=this.camp_Info.changeEndDate,this.edit_info.ChangeStart=this.camp_Info.changeStart,this.edit_info.ChangeEnd=this.camp_Info.changeEnd,console.log(this.edit_info.ChangeDateType),this.isCheckDisabled=!0},statusCheckChange:function(){this.isCheckDisabled=!1},campagin_add:function(){var t=this;if(""!=this.edit_info.name)if(""!=this.edit_info.appid)if(""!=this.edit_info.doorsillDesc)if(""!=this.edit_info.startDate&&""!=this.edit_info.endDate)if((""!=this.edit_info.startDate||""!=this.edit_info.endDate)&&Object(d["c"])(new Date(this.edit_info.startDate),"yyyy-MM-dd hh:mm:ss")>Object(d["c"])(new Date(this.edit_info.endDate),"yyyy-MM-dd hh:mm:ss"))this.$Message.error("开始日期不能大于结束日期");else if(this.edit_info.startDate=Object(d["c"])(new Date(this.edit_info.startDate),"yyyy-MM-dd hh:mm:ss"),this.edit_info.endDate=Object(d["c"])(new Date(this.edit_info.endDate),"yyyy-MM-dd hh:mm:ss"),this.edit_info.endDate=this.edit_info.endDate.slice(0,10)+" 23:59:59",""!=this.edit_info.rules)if(""!=this.edit_info.imgUrl)if(""!=this.edit_info.couponImg)if(""!=this.edit_info.useDesc)if(""!=this.edit_info.ticketTemplateId){"add"===this.camp_pageStatus?(this.getUrl="/campagin/add",this.campId="",this.msg="新增成功"):(this.getUrl="/campagin/edit/"+this.campId,this.msg="编辑成功");var e={campId:this.campId,appid:this.edit_info.appid,campType:this.edit_info.campType,couponType:this.edit_info.couponType,ticketTemplateId:this.edit_info.ticketTemplateId,name:this.edit_info.name,couponValueDesc:this.edit_info.couponValueDesc.replace(/\t/g,"").replace(/\n/g,"\\n"),doorsillDesc:this.edit_info.doorsillDesc.replace(/\t/g,"").replace(/\n/g,"\\n"),dateType:this.edit_info.dateType,startDate:this.edit_info.startDate,endDate:this.edit_info.endDate,rules:this.edit_info.rules.replace(/\t/g,"").replace(/\n/g,"\\n"),useDesc:this.edit_info.useDesc.replace(/\t/g,"").replace(/\n/g,"\\n"),status:this.edit_info.status,ticketName:this.edit_info.ticketName,couponImg:this.edit_info.couponImg,imgUrl:this.edit_info.imgUrl};this.add_loading=!0,Object(r["f"])(this.getUrl,e).then(function(e){t.add_loading=!1,200==e.code?(t.isCheckDisabled=!0,t.$Message.info(t.msg),"add"===t.camp_pageStatus&&(t.campId=e.campId),setTimeout(function(){t.nextInfo()},1200)):t.$Message.error(e.msg)})}else this.$Message.error("请选择优惠券模板");else this.$Message.error("请填写券使用说明");else this.$Message.error("请上传优惠券缩略图");else this.$Message.error("请上传优惠券详情图");else this.$Message.error("请填写活动/领券规则");else this.$Message.error("请选择开始日前和结束日期");else this.$Message.error("请填写使用门槛描述");else this.$Message.error("请选择appid");else this.$Message.error("请填写活动标题")},dataProcessing:function(){if(""!=this.edit_info.startDate&&""!=this.edit_info.endDate)if((""!=this.edit_info.startDate||""!=this.edit_info.endDate)&&Object(d["c"])(new Date(this.edit_info.startDate),"yyyy-MM-dd hh:mm:ss")>Object(d["c"])(new Date(this.edit_info.endDate),"yyyy-MM-dd hh:mm:ss"))this.$Message.error("开始日期不能大于结束日期");else{var t=Object(d["c"])(new Date(this.edit_info.startDate),"yyyy-MM-dd hh:mm:ss"),e=Object(d["c"])(new Date(this.edit_info.endDate),"yyyy-MM-dd hh:mm:ss"),a=new Date(t.replace(/-/g,"/")),i=new Date(e.replace(/-/g,"/")),n=i.getTime()-a.getTime(),s=parseInt(n/864e5);this.setStore("daySum",s)}else this.$Message.error("请选择开始日前和结束日期")},nextInfo:function(){this.setStore("camp_pageStatus",""),this.setStore("campId",this.campId),this.receiveRuleSetPage=!0,this.dataProcessing()},showReceiveRuleSetStatus:function(t){1==t.type&&this.$emit("changeStatus",!1),this.receiveRuleSetPage=t.Return},goback:function(){this.$emit("changeStatus",!1)}},Object(o["a"])(i,"statusCheckChange",function(){this.isCheckDisabled=!1}),Object(o["a"])(i,"handleMaxSize",function(t){this.$Message.error("图片不大于1M")}),Object(o["a"])(i,"handleSuccess",function(t,e){if(200==t.code){if(this.edit_info.imgUrl=t.image_url,0==this.uploadList.length){var a={url:t.image_url};this.uploadList.push(a)}else this.uploadList[0].url=t.image_url;this.$Message.info("上传图片成功")}else this.$Message.error("上传图片失败，请重新上传");this.statusCheckChange()}),Object(o["a"])(i,"handleBeforeUpload",function(t){return Object(d["b"])(t,130,130)}),Object(o["a"])(i,"handleBeforeUpload1",function(t){return Object(d["b"])(t,280,218)}),Object(o["a"])(i,"handleSuccess1",function(t,e){if(200==t.code){if(this.edit_info.couponImg=t.image_url,0==this.uploadList1.length){var a={url:t.image_url};this.uploadList1.push(a)}else this.uploadList1[0].url=t.image_url;this.$Message.info("上传图片成功")}else this.$Message.error("上传图片失败，请重新上传");this.statusCheckChange()}),Object(o["a"])(i,"getAppId",function(){var t=this;Object(r["c"])("/miniapp/miniapp-info/store").then(function(e){200==e.code?t.appId_info=e.data:t.$Message.error(e.msg)})}),Object(o["a"])(i,"resInfo",function(){""!=this.edit_info.startDate&&""!=this.edit_info.endDate?(""!=this.edit_info.startDate||""!=this.edit_info.endDate)&&Object(d["c"])(new Date(this.edit_info.startDate),"yyyy-MM-dd hh:mm:ss")>Object(d["c"])(new Date(this.edit_info.endDate),"yyyy-MM-dd hh:mm:ss")?this.$Message.error("开始日期不能大于结束日期"):(this.edit_info.startDate=Object(d["c"])(new Date(this.edit_info.startDate),"yyyy-MM-dd hh:mm:ss"),this.edit_info.endDate=Object(d["c"])(new Date(this.edit_info.endDate),"yyyy-MM-dd hh:mm:ss"),this.edit_info.endDate=this.edit_info.endDate.slice(0,10)+" 23:59:59",this.res_Modal_show=!0,this.res_info.ticketTemplateIDs=this.edit_info.ticketTemplateId,this.getTicketTemplate(this.edit_info.campType),this.statusCheckChange()):this.$Message.error("请选择开始日前和结束日期")}),Object(o["a"])(i,"getTicketTemplate",function(t){var e=this;Object(r["f"])("/campagin/selectSweetprojectitemBySheetID?type="+t+"&campId="+this.campId+"&ChangeStartDate="+this.edit_info.startDate+"&ChangeEndDate="+this.edit_info.endDate).then(function(t){200==t.code?e.res_list=t.data:e.$Message.error(t.msg)})}),Object(o["a"])(i,"resOk",function(){this.res_info.ticketTemplateIDs=this.currentChooseID,this.edit_info.ticketTemplateId=this.currentChooseID,this.edit_info.ticketName=this.currentChooseName,this.res_Modal_show=!1}),i),mounted:function(){this.init()}},h=p,u=(a("5e20"),a("2877")),m=Object(u["a"])(h,n,s,!1,null,null,null);m.options.__file="BasicSet.vue";e["default"]=m.exports},"52c2":function(t,e,a){},5605:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[t.campaginGrabInfoPage||t.campaginManagementPage?t._e():a("div",[a("div",{staticStyle:{width:"100%",background:"#fff","box-shadow":"0 6px 6px -4px rgba(0,0,0,.2)","z-index":"1",position:"fixed",padding:"14px"}},[a("Steps",{attrs:{current:1}},[a("Step",{attrs:{title:"基础设置",content:"已经完成"}}),a("Step",{attrs:{title:"规则设置",content:"进行中"}}),"1"==t.edit_info.isLimitGrap?a("Step",{attrs:{title:"整点抢设置",content:"等进行"}}):t._e()],1)],1),a("div",{staticStyle:{"padding-top":"80px"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("领优惠---规则设置")]),a("a",{attrs:{slot:"extra",href:"#"},slot:"extra"},[a("Button",{attrs:{type:"dashed",icon:"md-arrow-round-back"},on:{click:function(e){t.goback()}}},[t._v("返回上一层")])],1),a("Alert",{attrs:{"show-icon":""}},[t._v("\n          活动ID :\n          "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.campId))]),a("span",{staticStyle:{"margin-left":"10%"}},[t._v("\n            设置总天数 :\n            "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.daySum))])]),a("span",{attrs:{slot:"desc"},slot:"desc"})]),t.isNext?t._e():a("Form",{ref:"edit_info",attrs:{model:t.edit_info,"label-width":220}},[a("FormItem",{attrs:{label:"每人限领总数",required:""}},[a("InputNumber",{staticStyle:{width:"400px"},attrs:{min:0,step:1,type:"text",placeholder:"请输入"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.totalGetLimit,callback:function(e){t.$set(t.edit_info,"totalGetLimit",e)},expression:"edit_info.totalGetLimit"}}),a("span",{staticStyle:{color:"red"}},[t._v("  张")])],1),a("FormItem",{attrs:{label:"投放渠道",required:""}},[a("Select",{staticStyle:{width:"400px"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.sendChannel,callback:function(e){t.$set(t.edit_info,"sendChannel",e)},expression:"edit_info.sendChannel"}},t._l(t.res_list,function(e){return a("Option",{key:e.id,attrs:{value:e.dictValue}},[t._v(t._s(e.dictLabel))])}))],1),1==t.edit_info.sendChannel?a("FormItem",{attrs:{label:"是否在领优惠列表显示",required:""}},[a("Select",{staticStyle:{width:"400px"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.displayStatus,callback:function(e){t.$set(t.edit_info,"displayStatus",e)},expression:"edit_info.displayStatus"}},[a("Option",{attrs:{value:"1"}},[t._v("显示")]),a("Option",{attrs:{value:"0"}},[t._v("不显示")])],1)],1):t._e(),1==t.edit_info.sendChannel?a("FormItem",{attrs:{label:"邀请人数",required:""}},[a("InputNumber",{staticStyle:{width:"400px"},attrs:{min:0,type:"text",step:1,placeholder:"请输入"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.shareInvitedCount,callback:function(e){t.$set(t.edit_info,"shareInvitedCount",e)},expression:"edit_info.shareInvitedCount"}}),a("span",{staticStyle:{color:"red"}},[t._v("  人")])],1):t._e(),a("FormItem",{attrs:{label:"是否限抢券",required:""}},[a("Select",{staticStyle:{width:"400px"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.isLimitGrap,callback:function(e){t.$set(t.edit_info,"isLimitGrap",e)},expression:"edit_info.isLimitGrap"}},[a("Option",{attrs:{value:"0"}},[t._v("否")]),a("Option",{attrs:{value:"1"}},[t._v("是")])],1)],1),a("FormItem",{attrs:{label:"排序",required:""}},[a("InputNumber",{staticStyle:{width:"400px"},attrs:{min:0,type:"text",step:1,placeholder:"请输入"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.orderBy,callback:function(e){t.$set(t.edit_info,"orderBy",e)},expression:"edit_info.orderBy"}})],1),a("FormItem",{attrs:{label:"是否限制库存数量",required:""}},[a("Select",{staticStyle:{width:"400px"},on:{"on-change":t.statusCheckChange},model:{value:t.isStockCount,callback:function(e){t.isStockCount=e},expression:"isStockCount"}},[a("Option",{attrs:{value:"0"}},[t._v("否")]),a("Option",{attrs:{value:"1"}},[t._v("是")])],1)],1),"1"==t.isStockCount?a("FormItem",{attrs:{label:"库存数量",required:""}},[a("InputNumber",{staticStyle:{width:"400px"},attrs:{min:0,step:1,type:"text",placeholder:"请输入"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.stockCount,callback:function(e){t.$set(t.edit_info,"stockCount",e)},expression:"edit_info.stockCount"}}),a("span",{staticStyle:{color:"red"}},[t._v("   张")])],1):t._e(),a("FormItem",{attrs:{label:" 默认推荐排除",required:""}},[a("Select",{staticStyle:{width:"400px"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.isBlack,callback:function(e){t.$set(t.edit_info,"isBlack",e)},expression:"edit_info.isBlack"}},[a("Option",{attrs:{value:"0"}},[t._v("否")]),a("Option",{attrs:{value:"1"}},[t._v("是")])],1)],1),a("FormItem",{attrs:{"label-width":220}},[1==t.isCheckDisabled?a("Alert",{staticStyle:{width:"500px"},attrs:{type:"warning","show-icon":""}},[t._v("修改后才能保存")]):t._e(),a("Button",{staticStyle:{width:"220px","margin-right":"30px"},attrs:{type:"primary",loading:t.edit_loading,disabled:t.isCheckDisabled},on:{click:function(e){t.editOk()}}},[t._v("保存")]),"1"==t.edit_info.isLimitGrap&&"edit"==t.status&&1==t.isCheckDisabled?a("Button",{staticStyle:{width:"150px","margin-left":"5%"},attrs:{type:"dashed"},on:{click:function(e){t.nextInfo()}}},[t._v("下一步")]):t._e()],1)],1),t.formShareModal.shareData.length&&"edit"===t.camp_pageStatus&&t.isNext?a("Form",{ref:"shareModal",staticStyle:{"margin-top":"20px"},attrs:{model:t.formShareModal,"label-width":220}},[t._l(t.formShareModal.shareData,function(e){return a("FormItem",{key:e.id,attrs:{label:e.name,required:""}},[a("InputNumber",{staticStyle:{width:"320px"},attrs:{min:"倍数"==e.name?1:0,step:1,type:"text",placeholder:"请输入"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}),"倍数"!=e.name?a("span",[t._v("  U贝")]):t._e(),"倍数"==e.name?a("span",[t._v("  倍")]):t._e()],1)}),a("FormItem",[a("Button",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:function(e){t.shareSave()}}},[t._v("保存")]),a("Button",{staticStyle:{width:"150px","margin-left":"5%"},attrs:{type:"dashed"},on:{click:function(e){t.nextInfo2()}}},[t._v("下一步")])],1)],2):t._e()],1)],1)]),t.campaginGrabInfoPage?a("div",[a("campaginGrabInfoSet",{on:{changeStatus:t.showcampaginGrabInfo}})],1):t._e(),t.campaginManagementPage?a("div",[a("campaginManagement",{on:{changeStatus:t.showcampaginManagement}})],1):t._e(),a("Modal",{attrs:{width:"360",title:"设置成功"},on:{"on-cancel":t.closeModal},model:{value:t.next_modal,callback:function(e){t.next_modal=e},expression:"next_modal"}},[a("p",[t._v("即将跳转领优惠列表...")]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"success",size:"large",long:""},on:{click:t.closeModal}},[t._v("保存")])],1)])],1)},n=[],s=a("7f80"),o=(a("62a2"),a("3188")),r=a("e092"),c={name:"receiveRuleManagement",components:{campaginGrabInfoSet:o["default"],campaginManagement:r["default"]},props:{camp_pageStatus:String},data:function(){var t=this;return{formShareModal:{shareData:[]},next_modal:!1,isNext:!1,campaginGrabInfoPage:!1,campaginManagementPage:!1,edit_info:{isLimitGrap:"0",isBlack:"0",sendChannel:"1",label:"",shareInvitedAwardAmount:0,shareInvitedCount:0,orderBy:9999,stockCount:0,totalGetLimit:0,displayStatus:"0"},isStockCount:"0",edit_loading:!1,campId:"",status:"",getUrl:"",msg:"",daySum:"",isCheckDisabled:!0,current:1,totalSize:0,pageNum:1,limit:10,TableLoading:!1,table_list:[],res_list:[],chooseResArray:[],currentid:"",res_columns:[{title:"选择",width:60,align:"center",render:function(e,a){var i=a.row.dictValue,n=!1;return n=t.currentid==i,e("div",[e("Radio",{props:{value:n},on:{"on-change":function(){t.currentid=i}}})])}},{title:"字典类型",key:"dictCode",width:150,align:"center"},{title:"字典标签",key:"dictLabel",width:100,align:"center"},{title:"字典键值",key:"dictValue",width:150,sortable:!0,align:"center"},{title:"字典排序",key:"dictSort",width:150,sortable:!0,align:"center"},{title:"状态",key:"status",width:100,align:"center",render:function(t,e){var a=e.row,i="1"===a.status?"red":"blue",n="1"===a.status?"停用":"正常";return t("Tag",{props:{color:i}},n)}}]}},created:function(){},methods:{init:function(){this.campId=this.getStore("campId"),this.daySum=this.getStore("daySum"),this.share(this.campId),this.updateTableList(),this.getTicketTemplate()},share:function(t){var e=this;this.formShareModal.shareData=[],Object(s["f"])("/commonConfig/queryConfigByCode",{code:t}).then(function(t){200==t.code?t.data||t.data.noOverallCommonConfigList?(e.formShareModal.shareData=t.data.noOverallCommonConfigList||[],e.formShareModal.shareData.forEach(function(t){t.value=Number(t.value)||0}),e.shareDisplay=!0):e.$Message.error("未查询到数据"):e.$Message.error(t.msg)})},shareSave:function(t){var e=this,a=!0,i="";this.formShareModal.shareData.forEach(function(t){t.createTime=null,t.updateTime=null,t.updateBy=null,t.value||0===t.value||(a=!1,i="请输入完整表单"),"倍数"==t.name&&t.value<1&&(a=!1,i="请输入大于等于1的倍数")}),a?Object(s["f"])("/commonConfig/updateConfigBatch",{noOverallCommonConfigList:this.formShareModal.shareData}).then(function(a){200==a.code?(e.$Message.success("保存成功"),t&&setTimeout(function(){e.campaginGrabInfoPage=!0,e.campaginManagementPage=!1},1200)):e.$Message.error(a.msg)}):this.$Message.error(i)},updateTableList:function(){var t=this;this.TableLoading=!0;var e={campId:this.campId};Object(s["f"])("/campaignReceiveRule/queryRule?campId="+this.campId,e).then(function(e){e.isSuccess?e.data?(t.edit_info=e.data,t.campId=e.data.campId,t.edit_info.isLimitGrap=e.data.isLimitGrap.toString(),t.edit_info.sendChannel=e.data.sendChannel.toString(),t.edit_info.isBlack=e.data.isBlack.toString(),t.status="edit",t.currentid=e.data.label,t.edit_info.displayStatus=e.data.displayStatus.toString(),"999999999"==t.edit_info.stockCount?t.isStockCount="0":t.isStockCount="1"):(t.edit_info={isLimitGrap:"0",isBlack:"0",sendChannel:"1",label:"",shareInvitedAwardAmount:0,shareInvitedCount:0,orderBy:9999,stockCount:0,totalGetLimit:0},t.status="add"):t.$Message.error(e.msg)})},getTicketTemplate:function(){var t=this,e={dictCode:"send_channel"};Object(s["f"])("/system/sys-dict-data/list?pageNum="+this.pageNum+"&pageSize="+this.limit,e).then(function(e){200==e.code?t.res_list=e.data.records:t.$Message.error(e.msg)})},editOk:function(){var t=this;if(this.edit_info.sendChannel)if(1!=this.edit_info.sendChannel||this.edit_info.shareInvitedCount||0==this.edit_info.shareInvitedCount)if(this.edit_info.orderBy||0==this.edit_info.orderBy)if(this.edit_info.stockCount||0==this.edit_info.stockCount)if(0==this.isStockCount?this.edit_info.stockCount="999999999":this.edit_info.stockCount=this.edit_info.stockCount,1==this.edit_info.isLimitGrap&&this.daySum>this.edit_info.stockCount)this.$Message.error("设置总天数不能大于库存数量");else{this.edit_loading=!0;var e={campId:this.campId,isLimitGrap:Number(this.edit_info.isLimitGrap),sendChannel:Number(this.edit_info.sendChannel),isBlack:Number(this.edit_info.isBlack),label:this.edit_info.dictId,shareInvitedAwardAmount:this.edit_info.shareInvitedAwardAmount,shareInvitedCount:this.edit_info.shareInvitedCount,orderBy:this.edit_info.orderBy,stockCount:this.edit_info.stockCount,totalGetLimit:this.edit_info.totalGetLimit,displayStatus:this.edit_info.displayStatus};"add"==this.status?(this.getUrl="/campaignReceiveRule/add",this.msg="新增成功"):(this.getUrl="/campaignReceiveRule/edit",this.msg="编辑成功"),Object(s["f"])(this.getUrl,e).then(function(e){t.edit_loading=!1,200==e.code?(t.isCheckDisabled=!0,t.status="edit","1"==t.edit_info.isLimitGrap?setTimeout(function(){t.nextInfo()},1200):t.next_modal=!0):t.$Message.error(e.msg)})}else this.$Message.error("库存数量不能为空");else this.$Message.error("排序不能为空");else this.$Message.error("邀请人数不能为空");else this.$Message.error("投放渠道不能为空")},closeModal:function(){var t=this;this.next_modal=!1,setTimeout(function(){t.setStore("campId",""),t.setStore("daySum",""),t.$emit("changeStatus",{Return:!1,type:1})},1200)},dataProcessing:function(){this.edit_info.stockCount||0==this.edit_info.stockCount?this.daySum>this.edit_info.stockCount?this.$Message.error("设置总天数不能大于库存数量"):this.setStore("stockCount",this.edit_info.stockCount):this.$Message.error("库存数量不能为空")},nextInfo:function(){this.dataProcessing(),this.isNext=!0,"edit"!==this.camp_pageStatus&&(this.campaginGrabInfoPage=!0,this.campaginManagementPage=!1)},nextInfo2:function(){this.shareSave("next"),this.isNext=!0,this.campaginGrabInfoPage=!0,this.campaginManagementPage=!1},showcampaginGrabInfo:function(t){1==t.type&&this.$emit("changeStatus",{Return:!1,type:1}),this.campaginGrabInfoPage=t.Return,"edit"===this.camp_pageStatus&&(this.isNext=t.isNext)},showcampaginManagement:function(t){this.campaginManagementPage=t},goback:function(){this.isNext?this.isNext=!1:this.$emit("changeStatus",{Return:!1})},statusCheckChange:function(){this.isCheckDisabled=!1},resInfo:function(){this.res_Modal_show=!0,this.statusCheckChange()},change:function(t){var e=[],a=!0,i=!1,n=void 0;try{for(var s,o=t[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var r=s.value;e.push(r.id)}}catch(t){i=!0,n=t}finally{try{a||null==o.return||o.return()}finally{if(i)throw n}}this.res_info.dictIds=e.toString()},resOk:function(){this.edit_info.dictId=this.currentid,this.res_Modal_show=!1}},mounted:function(){this.init()}},d=c,l=(a("a2f7"),a("2877")),p=Object(l["a"])(d,i,n,!1,null,null,null);p.options.__file="receiveRuleManagement.vue";e["default"]=p.exports},"5d09":function(t,e,a){},"5e20":function(t,e,a){"use strict";var i=a("52c2"),n=a.n(i);n.a},"62a2":function(t,e,a){"use strict";a.d(e,"c",function(){return n}),a.d(e,"b",function(){return s}),a.d(e,"a",function(){return o}),a.d(e,"d",function(){return r});var i=a("e069");function n(t,e){var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),S:t.getMilliseconds()};for(var i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?a[i]:("00"+a[i]).substr((""+a[i]).length)));return e}function s(t,e,a,n){return new Promise(function(n,s){"image/png"!=t.type&&"image/jpeg"!=t.type&&"image/jpg"!=t.type&&"image/bmp"!=t.type&&(i["Message"].error("图片格式只能选择png/jpeg/jpg/bmp"),s());var o=new FileReader;o.onload=function(t){var o=t.target.result,r=new Image;r.onload=function(){e&&this.width!=e?(i["Message"].error("请上传宽为"+e+"的图片"),s()):a&&this.height!=a?(i["Message"].error("请上传高为"+a+"的图片"),s()):n()},r.onerror=s,r.src=o},o.readAsDataURL(t)})}function o(t,e){return new Promise(function(e,a){"image/png"!=t.type&&"image/jpeg"!=t.type&&"image/jpg"!=t.type&&"image/bmp"!=t.type&&(i["Message"].error("图片格式只能选择png/jpeg/jpg/bmp"),a());var n=new FileReader;n.onload=function(t){var i=t.target.result,n=new Image;e(),n.onerror=a,n.src=i},n.readAsDataURL(t)})}function r(t,e){for(var a=[t[0]],i=1;i<t.length;i++){for(var n=t[i],s=!1,o=0;o<a.length;o++)if(n[e]==a[o][e]){s=!0;break}s||a.push(n)}return a}},"8dd3":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("要优惠----拼团设置")]),a("a",{attrs:{slot:"extra",href:"#"},slot:"extra"},[a("Button",{attrs:{type:"dashed",icon:"md-arrow-round-back"},on:{click:function(e){t.goback()}}},[t._v("返回")])],1),a("p",[a("Alert",{attrs:{"show-icon":""}},[t._v("\n        活动ID:\n        "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.edit_info.campId))]),a("span",{attrs:{slot:"desc"},slot:"desc"})]),a("Card",[a("Form",{attrs:{"label-width":240}},[a("FormItem",{attrs:{label:"每人每天开团次数",required:""}},[a("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"只能输入整数",placement:"right"}},[a("InputNumber",{staticStyle:{width:"300px"},attrs:{min:0,placeholder:"请输入"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.dailyOpenTimes,callback:function(e){t.$set(t.edit_info,"dailyOpenTimes",e)},expression:"edit_info.dailyOpenTimes"}})],1),a("span",{staticStyle:{color:"red"}},[t._v("   次")])],1),a("FormItem",{attrs:{label:"成团人数",required:""}},[a("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"只能输入整数",placement:"right"}},[a("InputNumber",{staticStyle:{width:"300px"},attrs:{min:0,placeholder:"请输入",disabled:""},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.groupCount,callback:function(e){t.$set(t.edit_info,"groupCount",e)},expression:"edit_info.groupCount"}}),a("span",{staticStyle:{color:"red"}},[t._v("   人")])],1)],1),a("FormItem",{attrs:{label:"拼团限时(分钟)",required:""}},[a("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"单位为(分钟),范围为(0~60)  (只能输入整数)",placement:"right"}},[a("InputNumber",{staticStyle:{width:"300px"},attrs:{min:1,max:60,placeholder:"请输入"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.limitTime,callback:function(e){t.$set(t.edit_info,"limitTime",e)},expression:"edit_info.limitTime"}}),a("span",{staticStyle:{color:"red"}},[t._v("   分钟")])],1)],1),a("FormItem",{attrs:{label:"每人每天参团限制次数",required:""}},[a("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"只能输入整数",placement:"right"}},[a("InputNumber",{staticStyle:{width:"300px"},attrs:{min:0,placeholder:"请输入 "},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.dailyJoinGroupTimes,callback:function(e){t.$set(t.edit_info,"dailyJoinGroupTimes",e)},expression:"edit_info.dailyJoinGroupTimes"}}),a("span",{staticStyle:{color:"red"}},[t._v("  次")])],1)],1),a("FormItem",{attrs:{label:"每人每天接受分享奖励限制次数",required:""}},[a("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"只能输入整数",placement:"right"}},[a("InputNumber",{staticStyle:{width:"300px"},attrs:{min:0,placeholder:"请输入"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.dailyAcceptShareTimes,callback:function(e){t.$set(t.edit_info,"dailyAcceptShareTimes",e)},expression:"edit_info.dailyAcceptShareTimes"}})],1),a("span",{staticStyle:{color:"red"}},[t._v("  次")])],1),a("FormItem",{attrs:{label:"助力得全场满减现金券面额下限百分比",required:""}},[a("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"范围为(0~100)  (只能输入整数)",placement:"right"}},[a("InputNumber",{staticStyle:{width:"300px"},attrs:{max:100,min:0,placeholder:"请输入"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.helpAwardLower,callback:function(e){t.$set(t.edit_info,"helpAwardLower",e)},expression:"edit_info.helpAwardLower"}}),a("span",{staticStyle:{color:"red"}},[t._v("   %")])],1)],1),a("FormItem",{attrs:{label:"助力得全场满减现金券面额上限百分比",required:""}},[a("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"范围为(0~100)  (只能输入整数)",placement:"right"}},[a("InputNumber",{staticStyle:{width:"300px"},attrs:{max:100,min:0,placeholder:"请输入"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.helpAwardUpper,callback:function(e){t.$set(t.edit_info,"helpAwardUpper",e)},expression:"edit_info.helpAwardUpper"}}),a("span",{staticStyle:{color:"red"}},[t._v("   %")])],1)],1),a("FormItem",{attrs:{label:"接受分享领用现金券金额比例",required:""}},[a("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"范围为(0~100)  (只能输入整数)",placement:"right"}},[a("InputNumber",{staticStyle:{width:"300px"},attrs:{max:100,min:0,placeholder:"请输入"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.acceptPercent,callback:function(e){t.$set(t.edit_info,"acceptPercent",e)},expression:"edit_info.acceptPercent"}}),a("span",{staticStyle:{color:"red"}},[t._v("   %")])],1)],1)],1)],1),a("Card",[a("Alert",[a("h4",[t._v("要优惠算法参数")])]),a("Form",{attrs:{"label-width":240,inline:""}},[a("FormItem",{attrs:{label:"前",required:""}},[a("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"只能输入整数",placement:"right"}},[a("InputNumber",{staticStyle:{width:"100px"},attrs:{min:0,placeholder:"请输入"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.receiveCount,callback:function(e){t.$set(t.edit_info,"receiveCount",e)},expression:"edit_info.receiveCount"}}),a("span",{staticStyle:{color:"red"}},[t._v("  次")])],1)],1),a("FormItem",{attrs:{label:"折扣比例百分比",required:""}},[a("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"范围在(0~100)  (只能输入整数)",placement:"right"}},[a("InputNumber",{staticStyle:{width:"300px"},attrs:{max:100,min:0,placeholder:"请输入"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.discountRatio,callback:function(e){t.$set(t.edit_info,"discountRatio",e)},expression:"edit_info.discountRatio"}}),a("span",{staticStyle:{color:"red"}},[t._v("   %")])],1)],1),a("FormItem",{attrs:{label:"后续获得折扣比例百分比",required:""}},[a("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"范围在(0~100)  (只能输入整数)",placement:"right"}},[a("InputNumber",{staticStyle:{width:"300px"},attrs:{max:100,min:0,placeholder:"请输入"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.laterDiscountRatio,callback:function(e){t.$set(t.edit_info,"laterDiscountRatio",e)},expression:"edit_info.laterDiscountRatio"}}),a("span",{staticStyle:{color:"red"}},[t._v("   %")])],1)],1),a("FormItem",{attrs:{label:"随机因子",required:""}},[a("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"范围在1±random_seed之间（0.1~0.5）",placement:"right"}},[a("InputNumber",{staticStyle:{width:"300px"},attrs:{max:.5,min:.1,placeholder:"请输入"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.randomSeed,callback:function(e){t.$set(t.edit_info,"randomSeed",e)},expression:"edit_info.randomSeed"}})],1)],1),a("FormItem",{attrs:{label:"最低优惠额",required:""}},[a("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"单位元",placement:"right"}},[a("InputNumber",{staticStyle:{width:"300px"},attrs:{min:0,placeholder:"请输入"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.lowerDiscountAmount,callback:function(e){t.$set(t.edit_info,"lowerDiscountAmount",e)},expression:"edit_info.lowerDiscountAmount"}}),a("span",{staticStyle:{color:"red"}},[t._v("   元")])],1)],1),a("FormItem",{attrs:{label:"最高优惠额",required:""}},[a("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"单位元",placement:"right"}},[a("InputNumber",{staticStyle:{width:"300px"},attrs:{min:0,placeholder:"请输入"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.upperDiscountAmount,callback:function(e){t.$set(t.edit_info,"upperDiscountAmount",e)},expression:"edit_info.upperDiscountAmount"}}),a("span",{staticStyle:{color:"red"}},[t._v("   元")])],1)],1),a("FormItem",{attrs:{label:"团长优惠金额放大倍数",required:""}},[a("InputNumber",{staticStyle:{width:"300px"},attrs:{min:0,placeholder:"请输入"},on:{"on-change":t.statusCheckChange},model:{value:t.edit_info.addMultiple,callback:function(e){t.$set(t.edit_info,"addMultiple",e)},expression:"edit_info.addMultiple"}})],1),a("FormItem",{attrs:{"label-width":220}},[a("Button",{staticStyle:{width:"220px","margin-right":"30px"},attrs:{type:"primary",loading:t.edit_loading,disabled:t.isCheckDisabled},on:{click:function(e){t.editOk()}}},[t._v("保存")]),a("Button",{staticStyle:{width:"220px","margin-right":"30px"},attrs:{type:"dashed",icon:"md-arrow-round-back"},on:{click:function(e){t.goback()}}},[t._v("返回")])],1)],1)],1)],1)])],1)},n=[],s=a("7f80"),o=(a("62a2"),{name:"grabInfoSet",components:{},props:{campId:String},data:function(){return{edit_info:{campId:"",addMultiple:0,dailyAcceptShareTimes:0,dailyJoinGroupTimes:0,dailyOpenTimes:0,discountRatio:0,groupCount:3,helpAwardLower:0,helpAwardUpper:0,limitTime:0,lowerDiscountAmount:0,randomSeed:.1,upperDiscountAmount:0,acceptPercent:0,receiveCount:0,laterDiscountRatio:0},edit_loading:!1,status:"",getUrl:"",msg:"",isCheckDisabled:!0}},created:function(){this.init()},methods:{init:function(){this.updateTableList()},updateTableList:function(){var t=this,e={campId:this.campId};Object(s["f"])("/campaginGrabInfoSet/selectCampaginGrabInfoByCampId?campId="+this.campId,e).then(function(e){200==e.code?e.data.length>0?(t.edit_info=e.data[0],t.edit_info.acceptPercent=100*t.edit_info.acceptPercent,t.edit_info.helpAwardLower=100*t.edit_info.helpAwardLower,t.edit_info.helpAwardUpper=100*t.edit_info.helpAwardUpper,t.edit_info.discountRatio=100*t.edit_info.discountRatio,t.edit_info.laterDiscountRatio=100*t.edit_info.laterDiscountRatio,t.edit_info.limitTime=t.edit_info.limitTime/60,t.status="edit"):(t.edit_info={campId:t.campId,addMultiple:0,dailyAcceptShareTimes:0,dailyJoinGroupTimes:0,dailyOpenTimes:0,discountRatio:0,groupCount:3,helpAwardLower:0,helpAwardUpper:0,limitTime:0,lowerDiscountAmount:0,randomSeed:.1,upperDiscountAmount:0,acceptPercent:0,receiveCount:0,laterDiscountRatio:0},t.status="add"):t.$Message.error(e.msg)})},statusCheckChange:function(){this.isCheckDisabled=!1},editOk:function(){var t=this;if(this.edit_info.dailyOpenTimes||0==this.edit_info.dailyOpenTimes)if(this.edit_info.acceptPercent||0==this.edit_info.acceptPercent)if(this.edit_info.acceptPercent>100)this.$Message.error("受邀人助力者用券后给分享者返佣比例范围为（0～100）");else if(this.edit_info.addMultiple||0==this.edit_info.addMultiple)if(this.edit_info.dailyAcceptShareTimes||0==this.edit_info.dailyAcceptShareTimes)if(this.edit_info.discountRatio||0==this.edit_info.discountRatio)if(this.edit_info.discountRatio>100)this.$Message.error("折扣比例范围为（0～100）");else if(this.edit_info.laterDiscountRatio||0==this.edit_info.laterDiscountRatio)if(this.edit_info.laterDiscountRatio>100)this.$Message.error("后续折扣比例范围为（0～100）");else if(this.edit_info.receiveCount||0==this.edit_info.receiveCount)if(this.edit_info.limitTime||0==this.edit_info.limitTime)if(this.edit_info.helpAwardLower||0==this.edit_info.helpAwardLower)if(this.edit_info.helpAwardLower>100)this.$Message.error("助力得全场满减现金券面额下限百分比范围为（0～100）");else if(this.edit_info.helpAwardUpper||0==this.edit_info.helpAwardUpper)if(this.edit_info.helpAwardUpper>100)this.$Message.error("助力得全场满减现金券面额上限百分比范围为（0～100）");else if(this.edit_info.helpAwardLower>this.edit_info.helpAwardUpper)this.$Message.error("'助力得全场满减现金券面额下限百分比'不能大于'助力得全场满减现金券面额下限百分比'");else if(this.edit_info.lowerDiscountAmount||0==this.edit_info.lowerDiscountAmount)if(this.edit_info.upperDiscountAmount||0==this.edit_info.upperDiscountAmount)if(this.edit_info.lowerDiscountAmount>this.edit_info.upperDiscountAmount)this.$Message.error("'最低优惠额'不能大于'最高优惠额'");else if(this.edit_info.randomSeed){if("add"==this.status?(this.getUrl="/campaginGrabInfoSet/add",this.msg="新增成功"):(this.getUrl="/campaginGrabInfoSet/edit",this.msg="编辑成功"),this.ruleValidate()){this.edit_loading=!0;var e={campId:this.edit_info.campId,addMultiple:this.edit_info.addMultiple,dailyAcceptShareTimes:this.edit_info.dailyAcceptShareTimes,dailyJoinGroupTimes:this.edit_info.dailyJoinGroupTimes,dailyOpenTimes:this.edit_info.dailyOpenTimes,discountRatio:this.edit_info.discountRatio/100,groupCount:this.edit_info.groupCount,helpAwardLower:this.edit_info.helpAwardLower/100,helpAwardUpper:this.edit_info.helpAwardUpper/100,limitTime:60*this.edit_info.limitTime,lowerDiscountAmount:this.edit_info.lowerDiscountAmount,randomSeed:this.edit_info.randomSeed,upperDiscountAmount:this.edit_info.upperDiscountAmount,acceptPercent:this.edit_info.acceptPercent/100,receiveCount:this.edit_info.receiveCount,laterDiscountRatio:this.edit_info.laterDiscountRatio/100};Object(s["f"])(this.getUrl,e).then(function(e){t.edit_loading=!1,200==e.code?(t.$Message.info(t.msg),t.isCheckDisabled=!0,setTimeout(function(){t.goback()},1200)):t.$Message.error(e.msg)})}}else this.$Message.error("随机因子不能为空");else this.$Message.error("最高优惠额不能为空");else this.$Message.error("最低优惠额不能为空");else this.$Message.error("助力得全场满减现金券面额上限百分比不能为空");else this.$Message.error("助力得全场满减现金券面额下限百分比不能为空");else this.$Message.error("拼团限时不能为空");else this.$Message.error("领取次数不能为空");else this.$Message.error("后续折扣比例不能为空");else this.$Message.error("折扣比例不能为空");else this.$Message.error("每人每天接受分享奖励限制次数不能为空");else this.$Message.error("团长优惠金额放大倍数不能为空");else this.$Message.error("受邀人助力者用券后给分享者返佣比例不能为空");else this.$Message.error("每人每天开团次数不能为空")},removeInfo:function(){var t=this;this.$Modal.confirm({title:"删除确认",content:"删除后不可恢复，是否继续删除？",onOk:function(){var e={campId:t.edit_info.campId};Object(s["f"])("/campaginGrabInfoSet/delete?campId="+t.edit_info.campId,e).then(function(e){t.loading=!1,"200"==e.code?(t.$Message.info("删除成功！"),setTimeout(function(){t.goback()},1200)):t.$Message.error(e.msg)})},onCancel:function(){t.$Message.info("点击了取消")}})},goback:function(){this.$emit("changeStatus",!1)},ruleValidate:function(){for(var t=[this.edit_info.dailyOpenTimes.toString(),this.edit_info.groupCount.toString(),this.edit_info.limitTime.toString(),this.edit_info.dailyJoinGroupTimes.toString(),this.edit_info.dailyAcceptShareTimes.toString(),this.edit_info.helpAwardLower.toString(),this.edit_info.helpAwardUpper.toString(),this.edit_info.discountRatio.toString()],e=0;e<t.length;e++)if(-1!=t[e].indexOf("."))return this.$Message.error("只能输入整数"),!1;return!0}},mounted:function(){}}),r=o,c=(a("2268"),a("2877")),d=Object(c["a"])(r,i,n,!1,null,null,null);d.options.__file="grabInfoSet.vue";e["default"]=d.exports},"9c05":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Tabs",{attrs:{value:"name1",animated:!1}},[a("TabPane",{attrs:{label:"基础设置",name:"name1"}},[a("div",{staticStyle:{overflow:"hidden"}},[a("div",{staticStyle:{float:"left",width:"100%"}},[t.campId?a("Alert",{attrs:{"show-icon":""}},[t._v("\n            活动ID :\n            "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.campId))]),a("span",{attrs:{slot:"desc"},slot:"desc"})]):t._e(),a("Form",{ref:"edit_info",attrs:{model:t.edit_info,"label-width":100}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"appid"}},[a("Select",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入选择appid",disabled:""},model:{value:t.edit_info.appid,callback:function(e){t.$set(t.edit_info,"appid",e)},expression:"edit_info.appid"}},t._l(t.appId_info,function(e){return a("Option",{key:e.appid,attrs:{value:e.appid}},[t._v(t._s(e.appName))])}))],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"活动类型"}},[a("Select",{staticStyle:{width:"300px"},attrs:{disabled:""},model:{value:t.edit_info.campType,callback:function(e){t.$set(t.edit_info,"campType",e)},expression:"edit_info.campType"}},[a("Option",{attrs:{value:"57"}},[t._v("领优惠")]),a("Option",{attrs:{value:"62"}},[t._v("要优惠")]),a("Option",{attrs:{value:"63"}},[t._v("领优惠分享奖励")]),a("Option",{attrs:{value:"64"}},[t._v("要优惠参与奖励（接受分享/参团）")])],1)],1)],1)],1),a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"优惠券类型"}},[a("Select",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入选择优惠券类型",disabled:""},model:{value:t.edit_info.couponType,callback:function(e){t.$set(t.edit_info,"couponType",e)},expression:"edit_info.couponType"}},[a("Option",{attrs:{value:"1"}},[t._v("换购券")]),a("Option",{attrs:{value:"2"}},[t._v("商品券")]),a("Option",{attrs:{value:"3"}},[t._v("折扣券")]),a("Option",{attrs:{value:"4"}},[t._v("全场券")]),a("Option",{attrs:{value:"5"}},[t._v("赠品券")])],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"活动标题"}},[a("Input",{staticStyle:{width:"300px"},attrs:{type:"text",placeholder:"请输入活动标题",disabled:""},model:{value:t.edit_info.name,callback:function(e){t.$set(t.edit_info,"name",e)},expression:"edit_info.name"}})],1)],1)],1),a("Row",[a("Col",{attrs:{span:"12"}},[57==t.edit_info.campType?a("FormItem",{attrs:{label:"优惠面额描述"}},[a("Input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请输入优惠面额描述",disabled:""},model:{value:t.edit_info.couponValueDesc,callback:function(e){t.$set(t.edit_info,"couponValueDesc",e)},expression:"edit_info.couponValueDesc"}})],1):t._e()],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"使用门槛描述"}},[a("Input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请填写使用门槛描述",disabled:""},model:{value:t.edit_info.doorsillDesc,callback:function(e){t.$set(t.edit_info,"doorsillDesc",e)},expression:"edit_info.doorsillDesc"}})],1)],1)],1),a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"活动时间类型"}},[a("Select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择活动时间类型",disabled:""},model:{value:t.edit_info.dateType,callback:function(e){t.$set(t.edit_info,"dateType",e)},expression:"edit_info.dateType"}},[a("Option",{attrs:{value:"1"}},[t._v("固定日期时间范围有效")]),a("Option",{attrs:{value:"2"}},[t._v("相对兑换有效期")])],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"状态",placeholder:"请选择状态"}},[a("Select",{staticStyle:{width:"300px"},attrs:{disabled:""},model:{value:t.edit_info.status,callback:function(e){t.$set(t.edit_info,"status",e)},expression:"edit_info.status"}},[a("Option",{attrs:{value:"0"}},[t._v("创建")]),a("Option",{attrs:{value:"1"}},[t._v("上架")]),a("Option",{attrs:{value:"-1"}},[t._v("下架")])],1)],1)],1)],1),"1"==t.edit_info.dateType?a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"开始日期"}},[a("DatePicker",{staticStyle:{width:"300px"},attrs:{type:"date",placeholder:"选择日期",disabled:""},model:{value:t.edit_info.startDate,callback:function(e){t.$set(t.edit_info,"startDate",e)},expression:"edit_info.startDate"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"结束日期"}},[a("DatePicker",{staticStyle:{width:"300px"},attrs:{type:"date",placeholder:"选择日期",disabled:""},model:{value:t.edit_info.endDate,callback:function(e){t.$set(t.edit_info,"endDate",e)},expression:"edit_info.endDate"}})],1)],1)],1):t._e(),a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"优惠券缩略图"}},[a("img",{staticStyle:{float:"left",width:"90px",height:"90px","line-height":"90px","margin-right":"10px",border:"1px dashed #dcdee2",background:"#fff"},attrs:{src:t.edit_info.couponImg}})])],1),a("Col",{attrs:{span:"12"}},[a("Tooltip",{attrs:{content:"点击可查看大图 ",placement:"right"}},[a("FormItem",{attrs:{label:"优惠券详情图"}},[a("img",{staticStyle:{float:"left",width:"90px",height:"90px","line-height":"90px","margin-right":"10px",border:"1px dashed #dcdee2",background:"#fff"},attrs:{src:t.edit_info.imgUrl},on:{click:function(e){t.showBigImg(t.edit_info.imgUrl)}}})])],1)],1)],1),a("FormItem",{attrs:{label:"优惠券模板"}},[a("Alert",[a("Row",[a("Col",{attrs:{span:"12"}},[t._v("模版ID："+t._s(t.edit_info.ticketTemplateId))]),a("Col",{attrs:{span:"12"}},[t._v("模版名称："+t._s(t.edit_info.ticketName))])],1),0===t.edit_info.ChangeDateType?a("Row",[a("Col",{attrs:{span:"12"}},[t._v("兑换开始时间："+t._s(t.edit_info.ChangeStartDate))]),a("Col",{attrs:{span:"12"}},[t._v("兑换结束时间："+t._s(t.edit_info.ChangeEndDate))])],1):t._e(),1===t.edit_info.ChangeDateType?a("Row",[a("Col",{attrs:{span:"12"}},[t._v("发券后+"+t._s(t.edit_info.ChangeStart)+"天开始兑换")]),a("Col",{attrs:{span:"12"}},[t._v("发券后+"+t._s(t.edit_info.ChangeEnd)+"天结束兑换")])],1):t._e()],1)],1),a("FormItem",{attrs:{label:"活动/领券规则"}},[a("Input",{staticStyle:{width:"500px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请填写活动/领券规则",disabled:""},model:{value:t.edit_info.rules,callback:function(e){t.$set(t.edit_info,"rules",e)},expression:"edit_info.rules"}})],1),a("FormItem",{attrs:{label:"券使用说明"}},[a("Input",{staticStyle:{width:"500px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},disabled:""},model:{value:t.edit_info.useDesc,callback:function(e){t.$set(t.edit_info,"useDesc",e)},expression:"edit_info.useDesc"}})],1)],1)],1)])]),a("TabPane",{attrs:{label:"规则设置",name:"name2"}},[a("div",{staticStyle:{overflow:"hidden"}},[a("div",{staticStyle:{float:"left",width:"100%"}},[a("Alert",{attrs:{"show-icon":""}},[t._v("\n            活动ID :\n            "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.campId))]),a("span",{staticStyle:{"margin-left":"10%"}},[t._v("\n              设置总天数 :\n              "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.daySum))])]),a("span",{attrs:{slot:"desc"},slot:"desc"})]),a("Form",{ref:"edit_info1",attrs:{model:t.edit_info1,"label-width":160}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"每人限领总数"}},[a("InputNumber",{staticStyle:{width:"200px"},attrs:{min:0,type:"text",placeholder:"请输入",disabled:""},model:{value:t.edit_info1.totalGetLimit,callback:function(e){t.$set(t.edit_info1,"totalGetLimit",e)},expression:"edit_info1.totalGetLimit"}}),a("span",{staticStyle:{color:"red"}},[t._v("  张")])],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"投放渠道"}},[a("Select",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:t.edit_info1.sendChannel,callback:function(e){t.$set(t.edit_info1,"sendChannel",e)},expression:"edit_info1.sendChannel"}},t._l(t.res_list,function(e){return a("Option",{key:e.id,attrs:{value:e.dictValue}},[t._v(t._s(e.dictLabel))])}))],1)],1)],1),a("Row",[a("Col",{attrs:{span:"12"}},[1==t.edit_info1.sendChannel?a("FormItem",{attrs:{label:"邀请人数"}},[a("InputNumber",{staticStyle:{width:"200px"},attrs:{min:0,type:"text",placeholder:"请输入",disabled:""},model:{value:t.edit_info1.shareInvitedCount,callback:function(e){t.$set(t.edit_info1,"shareInvitedCount",e)},expression:"edit_info1.shareInvitedCount"}}),a("span",{staticStyle:{color:"red"}},[t._v("  人")])],1):t._e()],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"是否限抢券"}},[a("Select",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:t.edit_info1.isLimitGrap,callback:function(e){t.$set(t.edit_info1,"isLimitGrap",e)},expression:"edit_info1.isLimitGrap"}},[a("Option",{attrs:{value:"0"}},[t._v("否")]),a("Option",{attrs:{value:"1"}},[t._v("是")])],1)],1)],1)],1),a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"排序"}},[a("InputNumber",{staticStyle:{width:"200px"},attrs:{min:0,type:"text",placeholder:"请输入",disabled:""},model:{value:t.edit_info1.orderBy,callback:function(e){t.$set(t.edit_info1,"orderBy",e)},expression:"edit_info1.orderBy"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"库存数量"}},["999999999"!=t.edit_info1.stockCount?a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入",disabled:""},model:{value:t.edit_info1.stockCount,callback:function(e){t.$set(t.edit_info1,"stockCount",e)},expression:"edit_info1.stockCount"}}):t._e(),"999999999"==t.edit_info1.stockCount?a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"无限制",disabled:""}}):t._e(),a("span",{staticStyle:{color:"red"}},[t._v("  张")])],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"默认推荐排除"}},[a("Select",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:t.edit_info1.isBlack,callback:function(e){t.$set(t.edit_info1,"isBlack",e)},expression:"edit_info1.isBlack"}},[a("Option",{attrs:{value:"0"}},[t._v("否")]),a("Option",{attrs:{value:"1"}},[t._v("是")])],1)],1)],1)],1)],1)],1)])]),1==t.edit_info1.isLimitGrap?a("TabPane",{attrs:{label:"整点抢设置",name:"name3"}},[a("div",[a("Alert",{attrs:{"show-icon":""}},[t._v("\n          活动ID :\n          "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.campId))]),a("span",{staticStyle:{"margin-left":"10%"}},[t._v("\n            设置总天数 :\n            "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.daySum))])]),a("span",{staticStyle:{"margin-left":"10%"}},[t._v("\n            库存数量 :\n            "),"999999999"!=t.edit_info1.stockCount?a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.edit_info1.stockCount))]):t._e(),"999999999"==t.edit_info1.stockCount?a("span",{staticStyle:{color:"red"}},[t._v("无限制")]):t._e()]),a("span",{attrs:{slot:"desc"},slot:"desc"})]),a("Form",{attrs:{"label-width":100}},[a("Timeline",{attrs:{pending:""}},t._l(t.campaginGrabInfoList,function(e,i){return a("TimelineItem",{key:i},[a("Row",[a("Col",{attrs:{span:"2"}},[a("p",{staticClass:"time"},[t._v("设置"+t._s(i+1))])]),a("Col",{attrs:{span:"22"}},[a("Card",[a("Row",[a("Col",{attrs:{span:"7"}},[a("FormItem",{attrs:{label:"限制数量"}},[a("InputNumber",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入",min:1,disabled:""},model:{value:e.limitCnt,callback:function(a){t.$set(e,"limitCnt",a)},expression:"item.limitCnt"}}),a("span",{staticStyle:{color:"red"}},[t._v("   张")])],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"整点开始时间"}},[a("TimePicker",{staticStyle:{width:"120px"},attrs:{format:"HH:mm:ss",placeholder:"请选择时间","disabled-minutes":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],"disabled-seconds":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],disabled:""},model:{value:e.timeStart,callback:function(a){t.$set(e,"timeStart",a)},expression:"item.timeStart"}})],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"整点结束时间"}},[a("TimePicker",{staticStyle:{width:"120px"},attrs:{format:"HH:mm:ss",placeholder:"请选择时间","disabled-minutes":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],"disabled-seconds":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],disabled:""},model:{value:e.timeEnd,callback:function(a){t.$set(e,"timeEnd",a)},expression:"item.timeEnd"}})],1)],1)],1)],1)],1)],1)],1)}))],1)],1)]):t._e()],1),a("Modal",{attrs:{title:"查看大图",width:"600"},on:{"on-cancel":t.bigImgCancel},model:{value:t.bigImgDialog,callback:function(e){t.bigImgDialog=e},expression:"bigImgDialog"}},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.big_Image_url}})])],1)},n=[],s=a("7f80"),o=a("365c"),r=a("62a2"),c={name:"detailsView",components:{},props:{camp_Info:Object},data:function(){return{bigImgDialog:!1,big_Image_url:"",receiveRuleSetPage:!1,edit_info:{appid:"",campType:"",couponType:"",couponValueDesc:"",dateType:"",doorsillDesc:"",endDate:"",imgUrl:"",name:"",rules:"",startDate:"",status:"",ticketTemplateId:"",useDesc:"",ChangeDateType:"",ChangeStartDate:"",ChangeEndDate:"",ChangeStart:"",ChangeEnd:""},campId:"",imgUrl:"",url:o["g"],uploadList:[],uploadList1:[],camp_pageStatus:"",appId_info:[],currentChooseID:"",currentChooseName:"",edit_info1:{addRequiredScore:0,freeTimes:0,isLimitGrap:"0",isShow:"0",label:"",shareInvitedAwardAmount:0,shareInvitedCount:0,shareUseRakeBackPercent:0,sort:0,stockCount:"",totalGetLimit:0,isBlack:null},res_list:[],current:1,totalSize:0,pageNum:1,limit:10,status:"",daySum:"",currentid:"",next_modal:!1,campaginManagementPage:!1,campaginGrabInfoList:[{campId:"",limitCnt:1,timeEnd:"",timeStart:""}],campaginGrabInfo_campId:"",campaginGrabInfo_delId:[]}},created:function(){},methods:{init:function(){this.camp_pageStatus=this.getStore("camp_pageStatus"),this.getAppId(),this.getCampInfo(),this.dataProcessing(),this.campId=this.camp_Info.campId,this.updateTableList(),this.getTicketTemplate(),this.getCampaginGrabInfoList()},getCampInfo:function(){this.editInfo()},showBigImg:function(t){this.bigImgDialog=!0,this.big_Image_url=t},getTicketTemplate:function(){var t=this,e={dictCode:"send_channel"};Object(s["f"])("/system/sys-dict-data/list?pageNum="+this.pageNum+"&pageSize="+this.limit,e).then(function(e){200==e.code?t.res_list=e.data.records:t.$Message.error(e.msg)})},editInfo:function(){this.edit_info=this.camp_Info,this.edit_info.appid=this.camp_Info.appid,this.campId=this.camp_Info.campId,this.edit_info.name=this.camp_Info.name,this.edit_info.rules=this.camp_Info.rules.replace(/\\n/g,"\n"),this.edit_info.couponValueDesc=this.camp_Info.couponValueDesc.replace(/\\n/g,"\n"),this.edit_info.doorsillDesc=this.camp_Info.doorsillDesc.replace(/\\n/g,"\n"),this.edit_info.imgUrl=this.camp_Info.imgUrl,this.edit_info.couponImg=this.camp_Info.couponImg,this.edit_info.campType="57",this.edit_info.couponType=1==this.camp_Info.couponType?"1":2==this.camp_Info.couponType?"2":3==this.camp_Info.couponType?"3":4==this.camp_Info.couponType?"4":"5",this.edit_info.status=0==this.camp_Info.status?"0":1==this.camp_Info.status?"1":"-1",this.edit_info.ticketTemplateId=this.camp_Info.ticketTemplateId,this.currentChooseID=this.edit_info.ticketTemplateId,this.currentChooseName=this.edit_info.ticketName,this.edit_info.dateType=1==this.camp_Info.dateType?"1":"2",this.edit_info.startDate=this.camp_Info.startDate||"",this.edit_info.endDate=this.camp_Info.endDate||"",this.edit_info.useDesc=this.camp_Info.useDesc,this.edit_info.ChangeDateType=this.camp_Info.ChangeDateType,this.edit_info.ChangeStartDate=this.camp_Info.ChangeStartDate,this.edit_info.ChangeEndDate=this.camp_Info.ChangeEndDate,this.edit_info.ChangeStart=this.camp_Info.ChangeStart,this.edit_info.ChangeEnd=this.camp_Info.ChangeEnd,console.log(this.edit_info.ChangeDateType)},showReceiveRuleSetStatus:function(t){},getAppId:function(){var t=this;Object(s["c"])("/miniapp/miniapp-info/store").then(function(e){200==e.code?t.appId_info=e.data:t.$Message.error(e.msg)})},dataProcessing:function(){var t=Object(r["c"])(new Date(this.edit_info.startDate),"yyyy-MM-dd hh:mm:ss"),e=Object(r["c"])(new Date(this.edit_info.endDate),"yyyy-MM-dd hh:mm:ss"),a=new Date(t.replace(/-/g,"/")),i=new Date(e.replace(/-/g,"/")),n=i.getTime()-a.getTime();this.daySum=parseInt(n/864e5)},updateTableList:function(){var t=this,e={campId:this.campId};Object(s["f"])("/campaignReceiveRule/queryRule?campId="+this.campId,e).then(function(e){e.isSuccess?e.data?(t.edit_info1=e.data,t.campId=e.data.campId,t.edit_info1.isLimitGrap=e.data.isLimitGrap.toString(),t.edit_info1.sendChannel=e.data.sendChannel.toString(),t.edit_info1.stockCount=e.data.stockCount.toString(),t.edit_info1.isBlack=e.data.isBlack.toString(),t.edit_info1.shareUseRakeBackPercent=100*e.data.shareUseRakeBackPercent,t.status="edit",t.currentid=e.data.label):(t.edit_info1={addRequiredScore:0,freeTimes:0,isLimitGrap:"0",isShow:"0",label:"",shareInvitedAwardAmount:0,shareInvitedCount:0,shareUseRakeBackPercent:0,orderBy:9999,stockCount:"",totalGetLimit:0},t.status="add"):t.$Message.error(e.msg)})},getCampaginGrabInfoList:function(){var t=this,e={campId:this.campId};Object(s["f"])("/campaginGrabInfo/selectCampaginGrabInfoByCampId?campId="+this.campId,e).then(function(e){200==e.code&&(e.data.length>0?t.campaginGrabInfoList=e.data:t.campaginGrabInfoList=[{campId:t.campId,id:"",limitCnt:1,timeEnd:"",timeStart:""}])})},bigImgCancel:function(){this.bigImgDialog=!1}},mounted:function(){this.init()}},d=c,l=a("2877"),p=Object(l["a"])(d,i,n,!1,null,null,null);p.options.__file="detailsView.vue";e["default"]=p.exports},a2f7:function(t,e,a){"use strict";var i=a("c391"),n=a.n(i);n.a},a896:function(t,e,a){"use strict";var i=a("acb8"),n=a.n(i);n.a},acb8:function(t,e,a){},c391:function(t,e,a){},d9df:function(t,e,a){},e092:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[t.basicSetPage||t.grabInfoSetPage?t._e():a("Card",[a("Tabs",{attrs:{value:"57"},on:{"on-click":t.changeTab},model:{value:t.tab_model,callback:function(e){t.tab_model=e},expression:"tab_model"}},t._l(t.tabs,function(t,e){return a("TabPane",{key:e,attrs:{label:t.lable,name:t.value}})})),"57"==t.tab_model?a("div",[a("Row",[a("Form",{ref:"search",staticStyle:{display:"inline-block"},attrs:{model:t.search,inline:"","label-width":120}},[a("Form-item",{attrs:{label:"活动ID","label-width":100}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",clearable:"",placeholder:"请输入活动ID"},model:{value:t.search.campId,callback:function(e){t.$set(t.search,"campId",e)},expression:"search.campId"}})],1),t.drop?a("span",[a("Form-item",{attrs:{label:"优惠券模板ID","label-width":100}},[a("Input-number",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入优惠券模板ID"},model:{value:t.search.ticketTemplateId,callback:function(e){t.$set(t.search,"ticketTemplateId",e)},expression:"search.ticketTemplateId"}})],1),a("Form-item",{attrs:{label:"活动名称","label-width":100}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",clearable:"",placeholder:"请输入活动名称"},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}})],1),a("Form-item",{attrs:{label:"是否限抢券","label-width":100}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.search.isLimitGrap,callback:function(e){t.$set(t.search,"isLimitGrap",e)},expression:"search.isLimitGrap"}},[a("Option",{attrs:{value:"0"}},[t._v("否")]),a("Option",{attrs:{value:"1"}},[t._v("是")])],1)],1),a("Form-item",{attrs:{label:"优惠券类型","label-width":100}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.search.couponType,callback:function(e){t.$set(t.search,"couponType",e)},expression:"search.couponType"}},[a("Option",{attrs:{value:"1"}},[t._v("换购券")]),a("Option",{attrs:{value:"2"}},[t._v("商品券")]),a("Option",{attrs:{value:"3"}},[t._v("折扣券")]),a("Option",{attrs:{value:"4"}},[t._v("全场券")]),a("Option",{attrs:{value:"5"}},[t._v("赠品券")])],1)],1),a("Form-item",{attrs:{label:"状态","label-width":100}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.search.status,callback:function(e){t.$set(t.search,"status",e)},expression:"search.status"}},[a("Option",{attrs:{value:0}},[t._v("创建")]),a("Option",{attrs:{value:1}},[t._v("上架")]),a("Option",{attrs:{value:-1}},[t._v("下架")])],1)],1),a("Form-item",{attrs:{label:"投放渠道","label-width":100}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.search.sendChannel,callback:function(e){t.$set(t.search,"sendChannel",e)},expression:"search.sendChannel"}},t._l(t.res_list,function(e){return a("Option",{key:e.id,attrs:{value:e.dictValue}},[t._v(t._s(e.dictLabel))])}))],1)],1):t._e(),a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.queryTableList}},[t._v("搜索")]),a("Button",{staticStyle:{"margin-left":"5px"},attrs:{icon:"md-refresh"},on:{click:t.resetting}},[t._v("重置")]),a("a",{staticClass:"drop-down",on:{click:t.dropDown}},[t._v("\n            "+t._s(t.dropDownContent)+"\n            "),a("Icon",{attrs:{type:t.dropDownIcon}})],1)],1)],1),a("Row",{staticClass:"operation"},[a("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:function(e){t.addInfo()}}},[t._v("新增")]),a("Button",{attrs:{icon:"md-refresh"},on:{click:t.refresh}},[t._v("刷新")])],1),a("Row",[a("Table",{ref:"table",attrs:{loading:t.TableLoading,border:"",columns:t.tableColumns,data:t.table_list,sortable:"custom"},scopedSlots:t._u([{key:"couponImg",fn:function(t){var e=t.row;return[a("img",{staticStyle:{width:"74px",height:"43px"},attrs:{src:e.couponImg}})]}},{key:"ChangeStart",fn:function(e){var i=e.row;return[0==i.changeDateType?a("span",[t._v(" "+t._s(i.changeStartDate))]):t._e(),1==i.changeDateType?a("span",[t._v(" 发券后+"+t._s(i.changeStart)+"天开始兑换")]):t._e()]}},{key:"ChangeEnd",fn:function(e){var i=e.row;return[0==i.changeDateType?a("span",[t._v(" "+t._s(i.changeEndDate))]):t._e(),1==i.changeDateType?a("span",[t._v(" 发券后+"+t._s(i.changeEnd)+"天结束兑换")]):t._e()]}},{key:"imgUrl",fn:function(e){var i=e.row;return[a("Tooltip",{attrs:{content:"点击可查看大图 ",placement:"right"}},[a("img",{staticStyle:{width:"74px",height:"43px"},attrs:{src:i.imgUrl},on:{click:function(e){t.showBigImg(i)}}})])]}},{key:"getrules",fn:function(e){var i=e.row;return[a("span",{staticStyle:{width:"150px",display:"block","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},[t._v(t._s(i.rules))])]}},{key:"getcouponValueDesc",fn:function(e){var i=e.row;return[a("span",{staticStyle:{width:"150px",display:"block","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},[t._v(t._s(i.couponValueDesc))])]}},{key:"getdoorsillDesc",fn:function(e){var i=e.row;return[a("span",{staticStyle:{width:"150px",display:"block","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},[t._v(t._s(i.doorsillDesc))])]}}])})],1),a("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[a("Page",{staticStyle:{float:"right"},attrs:{total:t.totalSize,"show-total":"","show-elevator":"",current:t.pageNum},on:{"on-change":t.changeCurrent}})],1)],1):t._e(),"57"!=t.tab_model?a("div",{staticStyle:{"margin-top":"15px"}},[a("Form",{ref:"add_info",attrs:{model:t.add_info,"label-width":180}},[a("FormItem",{attrs:{label:"appid",required:""}},[a("Select",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入选择appid"},on:{"on-change":t.statusCheckChange},model:{value:t.add_info.appid,callback:function(e){t.$set(t.add_info,"appid",e)},expression:"add_info.appid"}},t._l(t.appId_info,function(e){return a("Option",{key:e.appid,attrs:{value:e.appid}},[t._v(t._s(e.appName))])}))],1),a("FormItem",{attrs:{label:"活动类型",required:""}},[a("Select",{staticStyle:{width:"300px"},attrs:{disabled:""},model:{value:t.add_info.campType,callback:function(e){t.$set(t.add_info,"campType",e)},expression:"add_info.campType"}},[a("Option",{attrs:{value:"57"}},[t._v("领优惠")]),a("Option",{attrs:{value:"62"}},[t._v("要优惠")]),a("Option",{attrs:{value:"64"}},[t._v("要优惠参与奖励（接受分享/参团）")])],1)],1),a("FormItem",{attrs:{label:"优惠券类型",required:""}},[a("Select",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入选择优惠券类型",disabled:""},on:{"on-change":t.statusCheckChange},model:{value:t.add_info.couponType,callback:function(e){t.$set(t.add_info,"couponType",e)},expression:"add_info.couponType"}},[a("Option",{attrs:{value:"1"}},[t._v("换购券")]),a("Option",{attrs:{value:"2"}},[t._v("商品券")]),a("Option",{attrs:{value:"3"}},[t._v("折扣券")]),a("Option",{attrs:{value:"4"}},[t._v("全场券")]),a("Option",{attrs:{value:"5"}},[t._v("赠品券")])],1)],1),a("FormItem",{attrs:{label:"活动标题",required:""}},[a("Input",{staticStyle:{width:"300px"},attrs:{type:"text",placeholder:"请输入活动标题"},on:{"on-change":t.statusCheckChange},model:{value:t.add_info.name,callback:function(e){t.$set(t.add_info,"name",e)},expression:"add_info.name"}})],1),a("FormItem",{attrs:{label:"使用门槛描述",required:""}},[a("Input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请填写使用门槛描述"},on:{"on-change":t.statusCheckChange},model:{value:t.add_info.doorsillDesc,callback:function(e){t.$set(t.add_info,"doorsillDesc",e)},expression:"add_info.doorsillDesc"}})],1),a("FormItem",{attrs:{label:"有效期类型",required:""}},[a("Select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择有效期类型",disabled:""},on:{"on-change":t.statusCheckChange},model:{value:t.add_info.dateType,callback:function(e){t.$set(t.add_info,"dateType",e)},expression:"add_info.dateType"}},[a("Option",{attrs:{value:"2"}},[t._v("永久有效")])],1)],1),a("FormItem",{attrs:{label:"优惠券缩略图",required:""}},[t._l(t.uploadList1,function(t,e){return a("div",{key:e,staticStyle:{float:"left",width:"90px",height:"90px","line-height":"90px","margin-right":"10px",border:"1px dashed #dcdee2",background:"#fff"}},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.url}})])}),a("div",{staticStyle:{display:"inline-block"}},[a("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"90px"},attrs:{defaultList:t.uploadList1,type:"drag",format:["jpg","jpeg","png","bmp"],"on-success":t.handleSuccess1,action:t.url,accept:"image","max-size":1024,headers:t.userToken},on:{"on-change":t.statusCheckChange}},[a("div",{staticStyle:{width:"90px",height:"90px","line-height":"90px"}},[a("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),a("p",[t._v("选择优惠券缩略图 (不大于1M, JPG/PNG/JPEG/BMP）")])],1)],2),a("FormItem",{attrs:{label:"优惠券详情图",required:""}},[t._l(t.uploadList,function(t,e){return a("div",{key:e,staticStyle:{float:"left",width:"90px",height:"90px","line-height":"90px","margin-right":"10px",border:"1px dashed #dcdee2",background:"#fff"}},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.url}})])}),a("div",{staticStyle:{display:"inline-block"}},[a("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"90px"},attrs:{defaultList:t.uploadList,type:"drag",format:["jpg","jpeg","png","bmp"],"on-success":t.handleSuccess,action:t.url,accept:"image","max-size":1024,headers:t.userToken},on:{"on-change":t.statusCheckChange}},[a("div",{staticStyle:{width:"90px",height:"90px","line-height":"90px"}},[a("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),a("p",[t._v("选择优惠券详情图 (不大于1M, JPG/PNG/JPEG/BMP）")])],1)],2),a("FormItem",{attrs:{label:"优惠券模板",required:""}},[a("Button",{style:{width:"150px"},attrs:{type:"dashed"},on:{click:t.resInfo,"on-change":t.statusCheckChange}},[t._v("选择模版")]),t.add_info.ticketTemplateId?a("Tag",{staticStyle:{"margin-left":"3%"},attrs:{checkable:"",color:"error"}},[t._v("已选择")]):t._e()],1),t.add_info.ticketName?a("FormItem",[a("Alert",{staticStyle:{width:"500px"}},[a("Row",[t._v("模版ID："+t._s(t.add_info.ticketTemplateId))]),a("Row",[t._v("模版名称："+t._s(t.add_info.ticketName))])],1)],1):t._e(),a("FormItem",{attrs:{label:"活动/领券规则",required:""}},[a("Input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请填写活动/领券规则"},on:{"on-change":t.statusCheckChange},model:{value:t.add_info.rules,callback:function(e){t.$set(t.add_info,"rules",e)},expression:"add_info.rules"}})],1),a("FormItem",{attrs:{label:"券使用说明"}},[a("Input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},on:{"on-change":t.statusCheckChange},model:{value:t.add_info.useDesc,callback:function(e){t.$set(t.add_info,"useDesc",e)},expression:"add_info.useDesc"}})],1),a("FormItem",{attrs:{label:"状态",required:"",placeholder:"请选择状态"}},[a("Select",{staticStyle:{width:"300px"},on:{"on-change":t.statusCheckChange},model:{value:t.add_info.status,callback:function(e){t.$set(t.add_info,"status",e)},expression:"add_info.status"}},[a("Option",{attrs:{value:"0"}},[t._v("创建")]),a("Option",{attrs:{value:"1"}},[t._v("上架")]),a("Option",{attrs:{value:"-1"}},[t._v("下架")])],1)],1),62==t.add_info.campType&&t.add_info.campId?a("FormItem",{attrs:{label:"拼团设置",required:""}},[a("Button",{style:{width:"150px"},attrs:{type:"dashed"},on:{click:function(e){t.groupInfo(t.add_info.campId)},"on-change":t.statusCheckChange}},[t._v("拼团设置")])],1):t._e(),a("FormItem",{staticStyle:{"{'margin-top'":"'54px'}"}},[a("Button",{staticStyle:{width:"150px"},attrs:{type:"primary",loading:t.add_loading,disabled:t.isCheckDisabled},on:{click:function(e){t.campagin_add()}}},[t._v("保存")])],1)],1),t.formShareModal.shareData.length?a("Form",{ref:"shareModal",staticStyle:{"margin-top":"20px"},attrs:{model:t.formShareModal,"label-width":180}},[t._l(t.formShareModal.shareData,function(e){return a("FormItem",{key:e.id,attrs:{label:e.name,required:""}},["倍数"!=e.name&&"上限"!=e.name?a("span",[t._v(" 优惠面额  X")]):t._e(),a("InputNumber",{staticStyle:{width:"320px"},attrs:{disabled:"分享奖励"==e.name,min:"倍数"==e.name?1:0,step:1,type:"text",placeholder:"请输入"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}),"上限"==e.name?a("span",[t._v("  U贝")]):t._e(),"倍数"==e.name?a("span",[t._v(" 倍")]):t._e(),"倍数"!=e.name&&"上限"!=e.name?a("span",[t._v("  %")]):t._e()],1)}),a("FormItem",[a("Button",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:function(e){t.shareSave("shareModal")}}},[t._v("保存")])],1)],2):t._e()],1):t._e()],1),a("Modal",{attrs:{width:"700",title:"选择模版"},model:{value:t.res_Modal_show,callback:function(e){t.res_Modal_show=e},expression:"res_Modal_show"}},[a("Form",{ref:"res_info",attrs:{model:t.res_info,"label-width":100,styles:{top:"10px"}}},[a("Table",{ref:"selection",attrs:{border:"",columns:t.res_columns,data:t.res_list,size:"small",height:"300"}})],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:function(e){t.res_Modal_show=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.res_loading},on:{click:t.resOk}},[t._v("保存")])],1)],1),a("Modal",{attrs:{title:"查看大图",width:"600"},on:{"on-cancel":t.bigImgCancel},model:{value:t.bigImgDialog,callback:function(e){t.bigImgDialog=e},expression:"bigImgDialog"}},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.big_Image_url}})]),t.basicSetPage?a("div",[a("basicSet",{attrs:{camp_Info:t.camp_Info},on:{changeStatus:t.showbasicSetStatus}})],1):t._e(),t.grabInfoSetPage?a("div",[a("grabInfoSet",{attrs:{campId:t.campId},on:{changeStatus:t.showGgrabInfoSet}})],1):t._e(),a("Modal",{attrs:{title:"查看详情",width:"960"},model:{value:t.detailsDisplay,callback:function(e){t.detailsDisplay=e},expression:"detailsDisplay"}},[t.detailsDisplay?a("div",[a("detailsView",{attrs:{camp_Info:t.camp_Info3},on:{changeStatus:t.showdetailsView}})],1):t._e(),a("div",{attrs:{slot:"footer"},slot:"footer"})])],1)},n=[],s=a("a322"),o=a("7f80"),r=a("365c"),c=(a("62a2"),a("39cd")),d=a("8dd3"),l=a("9c05"),p={name:"campagin",components:{basicSet:c["default"],grabInfoSet:d["default"],detailsView:l["default"]},data:function(){var t,e=this;return t={formShareModal:{shareData:[]},drop:!1,dropDownContent:"展开",dropDownIcon:"ios-arrow-down",search:{campId:"",ticketTemplateId:null,name:"",label:"",isLimitGrap:"",couponType:"",status:"",campType:"",sendChannel:""},res_list:[],templatelist:[],searchType:"1",tab_model:"57",basicSetPage:!1,grabInfoSetPage:!1,campaginGrabInfoPage:!1,campId:"",camp_Info:{},camp_Info3:{},bigImgDialog:!1,big_Image_url:"",current:1,totalSize:0,pageNum:1,limit:10,TableLoading:!1,table_list:[],self:this,editCampaginPage:!1,campaginEdit_info:{},tableColumns:[{title:"appid",key:"appid",width:200,align:"center"},{title:"活动ID",key:"campId",width:200,align:"center"},{title:"活动名称",key:"name",width:200,align:"center"},{title:"优惠券模板ID",key:"ticketTemplateId",width:200,align:"center"},{title:"活动类型",key:"campType",width:200,align:"center",render:function(t,e){var a=e.row,i=57===a.campType?"red":62===a.campType?"volcano":63===a.campType?"green":"blue",n=57===a.campType?"领优惠":62===a.campType?"要优惠":63===a.campType?"领优惠分享奖励":"要优惠参与奖励（接受分享/参团）";return t("Tag",{props:{color:i}},n)}},{title:"优惠券类型",key:"couponType",width:200,align:"center",render:function(t,e){var a=e.row,i=1===a.couponType?"red":2===a.couponType?"cyan":3===a.couponType?"green":4===a.couponType?"blue":"purple",n=1===a.couponType?"换购券":2===a.couponType?"商品券":3===a.couponType?"折扣券":4===a.couponType?"全场券":"赠品券";return t("Tag",{props:{color:i}},n)}},{title:"活动时间类型",key:"dateType",width:200,align:"center",render:function(t,e){var a=e.row,i=(a.dateType,"red"),n=(a.dateType,"固定日期时间范围有效");return t("Tag",{props:{color:i}},n)}},{title:"投放渠道",key:"sendChannel",width:200,align:"center",render:function(t,e){var a=e.row,i=1===a.sendChannel?"red":2===a.sendChannel?"cyan":3===a.sendChannel?"green":4===a.sendChannel?"blue":5===a.sendChannel?"yellow":"purple",n=1===a.sendChannel?"领优惠列表":2===a.sendChannel?"拉新奖励":3===a.sendChannel?"签到奖励":4===a.sendChannel?"领优惠分享领用奖励":5===a.sendChannel?"要优惠领优惠领券抽奖奖励":"新人奖励";return t("Tag",{props:{color:i}},n)}},{title:"开始时间",key:"startDate",width:200,align:"center"},{title:"结束时间",key:"endDate",width:200,align:"center"},{title:"兑换类型",key:"ChangeDateType",width:200,align:"center",render:function(t,e){var a=e.row,i=0===a.changeDateType?"red":"blue",n=0===a.changeDateType?"固定时间兑换":"发券后+X天后开始兑换";return t("Tag",{props:{color:i}},n)}},{title:"兑换开始时间",key:"ChangeStart",width:200,align:"center",slot:"ChangeStart"},{title:"兑换结束时间",key:"ChangeEnd",width:200,align:"center",slot:"ChangeEnd"},{title:"优惠券缩略图",width:200,align:"center",key:"couponImg",slot:"couponImg"},{title:"优惠券详情图",width:200,align:"center",key:"imgUrl",slot:"imgUrl"},{title:"状态",key:"status",width:200,align:"center",render:function(t,e){var a=e.row,i=0===a.status?"green":1===a.status?"blue":"red",n=0===a.status?"创建":1===a.status?"上架":"下架";return t("Tag",{props:{color:i}},n)}},{title:"活动/领券规则",key:"rules",width:200,align:"center",slot:"getrules"},{title:"优惠面额描述",key:"couponValueDesc",width:200,align:"center",slot:"getcouponValueDesc"},{title:"使用门槛描述",key:"doorsillDesc",width:200,align:"center",slot:"getcouponValueDesc"},{title:"操作",key:"action",fixed:"left",align:"center",width:230,render:function(t,a){var i=a.row,n="",s="";return 0==i.status?(n="#19be6b",s="上架"):1==i.status?(n="red",s="下架"):-1==i.status&&(n="#19be6b",s="上架"),t("div",[t("Button",{props:{type:"text",size:"small"},style:{display:1==a.row.status?"none":"inline-block",color:"#5cadff"},on:{click:function(){e.editInfo(a.row)}}},"编辑"),t("Button",{props:{type:"text",size:"small"},style:{color:n},on:{click:function(){e.changeStatus(a.row)}}},s),t("Button",{props:{type:"text",size:"small"},style:{display:1==a.row.status?"none":"inline-block",color:"#ff3300"},on:{click:function(){e.removeInfo(a.row)}}},"删除"),t("Button",{props:{type:"text",size:"small"},style:{color:"#2db7f5"},on:{click:function(){e.detailsDisplayFn(a.row)}}},"查看详情")])}}],tabs:[{lable:"领优惠",value:"57"},{lable:"要优惠",value:"62"},{lable:"要优惠参与奖励",value:"64"}],changeTabValue:"",add_info:{appid:"",campId:"",campType:"57",couponType:"",couponValueDesc:"",dateType:"2",doorsillDesc:"",endDate:"",imgUrl:"",couponImg:"",name:"",rules:"",startDate:"",status:"0",ticketTemplateId:"",useDesc:""},imgUrl:"",url:r["g"],uploadList:[],uploadList1:[],userToken:"",pageStatus:"",add_loading:!1,getUrl:"",msg:"",appId_info:[],codeList:[],res_Modal_show:!1,res_loading:!1},Object(s["a"])(t,"res_list",[]),Object(s["a"])(t,"res_info",{}),Object(s["a"])(t,"chooseResArray",[]),Object(s["a"])(t,"isCheckDisabled",!0),Object(s["a"])(t,"currentChooseID",""),Object(s["a"])(t,"currentChooseName",""),Object(s["a"])(t,"res_columns",[{title:"选择",key:"ticketTemplateID",width:70,align:"center",render:function(t,a){var i=a.row.ticketTemplateID,n=a.row.ticketName,s=!1;s=e.currentChooseID===i;var o=e;return t("div",[t("Radio",{props:{value:s},on:{"on-change":function(){o.currentChooseID=i,o.currentChooseName=n,o.chooseResArray=a.row}}})])}},{title:"sheetID",key:"sheetID",align:"center"},{title:"模版ID",key:"ticketTemplateID",align:"center"},{title:"模版名称",key:"ticketName",align:"center"},{title:"ticketKind",key:"ticketKind",align:"center"}]),Object(s["a"])(t,"grabInfoSetStatus",!1),Object(s["a"])(t,"detailsDisplay",!1),t},created:function(){this.userToken={jwttoken:localStorage.getItem("jwttoken")}},methods:{init:function(){this.searchType=1,this.updateTableList(),this.getAppId(),this.getActivity(),this.getchannel()},share:function(t){var e=this;console.log(111),t&&(this.formShareModal.shareData=[],Object(o["f"])("/commonConfig/queryConfigByCode",{code:t}).then(function(t){200==t.code?t.data||t.data.noOverallCommonConfigList?(e.formShareModal.shareData=t.data.noOverallCommonConfigList||[],e.formShareModal.shareData.forEach(function(t){t.value=Number(t.value)||0,"分享奖励"==t.name&&(t.value=0)}),e.shareDisplay=!0):e.$Message.error("未查询到数据"):e.$Message.error(t.msg)}))},shareSave:function(t){var e=this,a=!0;this.formShareModal.shareData.forEach(function(t){t.createTime=null,t.updateTime=null,t.updateBy=null,t.value||0===t.value||(a=!1,"请输入完整表单"),"倍数"==t.name&&t.value<1&&(a=!1,"请输入大于等于1的倍数")}),a?Object(o["f"])("/commonConfig/updateConfigBatch",{noOverallCommonConfigList:this.formShareModal.shareData}).then(function(t){200==t.code?e.$Message.success("保存成功"):e.$Message.error(t.msg)}):this.$Message.error("请输入完整表单")},getchannel:function(){var t=this,e={dictCode:"send_channel"};Object(o["f"])("/system/sys-dict-data/list?pageNum="+this.pageNum+"&pageSize="+this.limit,e).then(function(e){200==e.code?t.res_list=e.data.records:t.$Message.error(e.msg)})},changeTab:function(t){switch(console.log(t),this.tab_model=t,this.Status="",this.chooseResArray=[],this.grabInfoSetStatus=!1,console.log(this.add_info.campType),t){case"57":this.add_info.campType="57",this.add_info.couponType="";break;case"62":this.add_info.campType="62",this.add_info.couponType="2",this.add_info.dateType="2";break;case"63":this.add_info.campType="63",this.add_info.couponType="4",this.add_info.dateType="2";break;case"64":this.add_info.campType="64",this.add_info.couponType="4",this.add_info.dateType="2";break}this.updateTableList()},getActivity:function(){var t=this,e={dictCode:"campLabel"};Object(o["f"])("/system/sys-dict-data/list?pageNum=1&pageSize=10",e).then(function(e){200==e.code?t.templatelist=e.data.records:t.$Message.error(e.msg)})},refresh:function(){this.searchType=1,this.updateTableList()},queryTableList:function(){this.pageNum=1,this.searchType=2,this.updateTableList(this.search)},resetting:function(){this.search.campId="",this.search.ticketTemplateId=null,this.search.name="",this.search.label="",this.search.isLimitGrap="",this.search.couponType="",this.search.status="",this.search.sendChannel="",this.updateTableList()},changeCurrent:function(t){this.pageNum=t,this.updateTableList()},updateTableList:function(){var t=this;this.TableLoading=!0;var e={campId:this.search.campId,ticketTemplateId:this.search.ticketTemplateId,name:this.search.name,label:this.search.label,isLimitGrap:this.search.isLimitGrap,couponType:this.search.couponType,status:this.search.status,campType:this.add_info.campType,sendChannel:this.search.sendChannel};Object(o["f"])("/campagin/list?pageNum="+this.pageNum+"&pageSize="+this.limit,e).then(function(a){if(console.log(111),t.TableLoading=!1,a.isSuccess)if(62==t.add_info.campType&&t.share(a.data.records[0].campId),57==t.add_info.campType)t.totalSize=a.data.total,t.table_list=a.data.records,t.pageStatus="edit";else if(57!=t.add_info.campType&&0!=a.data.records.length)t.uploadList=[{url:a.data.records[0].imgUrl}],t.uploadList1=[{url:a.data.records[0].couponImg}],t.add_info.appid=a.data.records[0].appid,t.add_info.campId=a.data.records[0].campId,t.add_info.name=a.data.records[0].name,t.add_info.rules=a.data.records[0].rules.replace(/\\n/g,"\n"),t.add_info.doorsillDesc=a.data.records[0].doorsillDesc.replace(/\\n/g,"\n"),t.add_info.imgUrl=a.data.records[0].imgUrl,t.add_info.couponImg=a.data.records[0].couponImg,t.add_info.campType=57==a.data.records[0].campType?"57":62==a.data.records[0].campType?"62":63==a.data.records[0].campType?"63":"64",t.add_info.couponType=1==a.data.records[0].couponType?"1":2==a.data.records[0].couponType?"2":3==a.data.records[0].couponType?"3":4==a.data.records[0].couponType?"4":"5",t.add_info.status=0==a.data.records[0].status?"0":1==a.data.records[0].status?"1":"-1",t.add_info.dateType=(a.data.records[0].dateType,"2"),t.add_info.startDate=a.data.records[0].startDate||"",t.add_info.endDate=a.data.records[0].endDate||"",t.add_info.useDesc=a.data.records[0].useDesc.replace(/\\n/g,"\n"),t.add_info.ticketName=a.data.records[0].ticketName,t.add_info.ticketTemplateId=a.data.records[0].ticketTemplateId,t.add_info.couponValueDesc="",1==t.grabInfoSetStatus&&t.groupInfo(t.add_info.campId),t.pageStatus="edit";else switch(t.add_info={appid:"",campId:"",couponValueDesc:"",doorsillDesc:"",imgUrl:"",couponImg:"",name:"",rules:"",status:"0",ticketTemplateId:"",dateType:"2",endDate:"",startDate:"",useDesc:""},t.uploadList=[],t.pageStatus="add",e.campType){case"57":t.add_info.campType="57",t.add_info.couponType="";break;case"62":t.add_info.campType="62",t.add_info.couponType="2",t.add_info.dateType="2";break;case"63":t.add_info.campType="63",t.add_info.couponType="4",t.add_info.dateType="2";break;case"64":t.add_info.campType="64",t.add_info.couponType="4",t.add_info.dateType="2";break}else t.$Message.error(a.msg)})},removeInfo:function(t){var e=this;this.$Modal.confirm({title:"删除确认",content:"删除后不可恢复，是否继续删除？",onOk:function(){var a={campId:t.campId};Object(o["f"])("/campagin/delete?campId="+t.campId,a).then(function(t){e.loading=!1,"200"==t.code?(e.$Message.info("删除成功！"),setTimeout(function(){e.pageNum=1,e.updateTableList()},1200)):e.$Message.error(t.msg)})},onCancel:function(){e.$Message.info("点击了取消")}})},addInfo:function(){this.setStore("camp_pageStatus","add"),this.basicSetPage=!0},editInfo:function(t){this.setStore("camp_pageStatus","edit"),this.camp_Info=t,this.basicSetPage=!0},showbasicSetStatus:function(t){this.basicSetPage=t,this.updateTableList()},changeStatus:function(t){var e=this,a="";switch(t.status){case 0:a="1";break;case 1:a="-1";break;case-1:a="1";break;case"0":a="1";break;case"1":a="-1";break;case"-1":a="1";break}this.$Modal.confirm({title:"更改状态",content:"是否继续更改状态？",onOk:function(){var i={campId:t.campId,status:a};Object(o["f"])("/campagin/updStatus/?campId="+t.campId+"&status="+a,i).then(function(t){e.loading=!1,"200"==t.code?(e.$Message.info("更改状态成功！"),setTimeout(function(){e.pageNum=1,e.updateTableList()},1200)):e.$Message.error(t.msg)})},onCancel:function(){e.$Message.info("点击了取消")}})},showBigImg:function(t){this.bigImgDialog=!0,this.big_Image_url=t.imgUrl},bigImgCancel:function(){this.bigImgDialog=!1},statusCheckChange:function(){this.isCheckDisabled=!1},campagin_add:function(){var t=this;if(""!=this.add_info.name)if(""!=this.add_info.appid)if(""!=this.add_info.rules)if(""!=this.add_info.doorsillDesc)if(""!=this.add_info.couponImg)if(""!=this.add_info.imgUrl)if(""!=this.add_info.ticketTemplateId){"add"===this.pageStatus?(this.getUrl="/campagin/add",this.add_info.campId="",this.msg="新增成功"):(this.getUrl="/campagin/edit/"+this.add_info.campId,this.msg="编辑成功");var e={appid:this.add_info.appid,campId:this.add_info.campId,campType:this.add_info.campType,couponType:this.add_info.couponType,couponValueDesc:this.add_info.couponValueDesc,dateType:this.add_info.dateType,doorsillDesc:this.add_info.doorsillDesc.replace(/\t/g,"").replace(/\n/g,"\\n"),endDate:this.add_info.endDate,imgUrl:this.add_info.imgUrl,couponImg:this.add_info.couponImg,name:this.add_info.name,rules:this.add_info.rules.replace(/\t/g,"").replace(/\n/g,"\\n"),startDate:this.add_info.startDate,status:this.add_info.status,ticketName:this.add_info.ticketName,ticketTemplateId:this.add_info.ticketTemplateId,useDesc:this.add_info.useDesc.replace(/\t/g,"").replace(/\n/g,"\\n")};this.add_loading=!0,Object(o["f"])(this.getUrl,e).then(function(e){t.add_loading=!1,t.isCheckDisabled=!0,200==e.code?(t.$Message.info(t.msg),"62"==t.add_info.campType&&(t.grabInfoSetStatus=!0),setTimeout(function(){t.updateTableList()},1200)):t.$Message.error(e.msg)})}else this.$Message.error("请选择优惠券模板");else this.$Message.error("请上传优惠券详情图");else this.$Message.error("请上传优惠券缩略图");else this.$Message.error("请填写使用门槛描述");else this.$Message.error("请填写活动/领券规则");else this.$Message.error("请选择appid");else this.$Message.error("请填写活动标题")},groupInfo:function(t){var e=this;this.$Modal.confirm({title:"设置拼团",content:"<p>是否设置要优惠拼团</p>",onOk:function(){e.campId=t,e.basicSetPage=!1,e.grabInfoSetPage=!0,e.campaginGrabInfoPage=!1},onCancel:function(){}})},showGgrabInfoSet:function(t){this.grabInfoSetPage=t},handleSuccess:function(t,e){if(200==t.code){if(this.add_info.imgUrl=t.image_url,0==this.uploadList.length){var a={url:t.image_url};this.uploadList.push(a)}else this.uploadList[0].url=t.image_url;this.$Message.info("上传图片成功")}else this.$Message.error("上传图片失败，请重新上传");this.statusCheckChange()},handleSuccess1:function(t,e){if(200==t.code){if(this.add_info.couponImg=t.image_url,0==this.uploadList1.length){var a={url:t.image_url};this.uploadList1.push(a)}else this.uploadList1[0].url=t.image_url;this.$Message.info("上传图片成功")}else this.$Message.error("上传图片失败，请重新上传");this.statusCheckChange()},getAppId:function(){var t=this;Object(o["c"])("/miniapp/miniapp-info/store").then(function(e){200==e.code?t.appId_info=e.data:t.$Message.error(e.msg)})},resInfo:function(){this.res_Modal_show=!0,this.res_info.ticketTemplateIDs=this.add_info.ticketTemplateId,this.getTicketTemplate(this.add_info.campType),this.statusCheckChange()},getTicketTemplate:function(t){var e=this;Object(o["f"])("/campagin/selectSweetprojectitemBySheetID?type="+t).then(function(t){200==t.code?e.res_list=t.data:e.$Message.error(t.msg)})},resOk:function(){this.res_info.ticketTemplateIDs=this.currentChooseID,this.add_info.ticketTemplateId=this.currentChooseID,this.add_info.ticketName=this.currentChooseName,getShopList(),this.res_Modal_show=!1},goback:function(){this.Status=""},detailsDisplayFn:function(t){var e={appid:t.appid,campId:t.campId,campType:t.campType,couponType:t.couponType,couponValueDesc:t.couponValueDesc,createBy:t.createBy,createTime:t.createTime,dateType:t.dateType,doorsillDesc:t.doorsillDesc,endDate:t.endDate,imgUrl:t.imgUrl,isLimitGrap:t.isLimitGrap,label:t.label,name:t.name,params:t.params,rules:t.rules,startDate:t.startDate,status:t.status,ticketName:t.ticketName,ticketTemplateId:t.ticketTemplateId,updateBy:t.updateBy,updateTime:t.updateTime,useDesc:t.useDesc,couponImg:t.couponImg,ChangeDateType:t.changeDateType,ChangeStartDate:t.changeStartDate,ChangeEndDate:t.changeEndDate,ChangeStart:t.changeStart,ChangeEnd:t.changeEnd};this.camp_Info3=e,this.detailsDisplay=!0},showdetailsView:function(t){},dropDown:function(){this.drop?(this.dropDownContent="展开",this.dropDownIcon="ios-arrow-down"):(this.dropDownContent="收起",this.dropDownIcon="ios-arrow-up"),this.drop=!this.drop},time1:function(t){var e=t.slice(0,10)+" 00:00:00";this.search.startDate=e},time2:function(t){var e=t.slice(0,10)+" 00:00:00";this.search.endDate=e}},mounted:function(){this.init()}},h=p,u=(a("19da"),a("2877")),m=Object(u["a"])(h,i,n,!1,null,"491b2a83",null);m.options.__file="campaginManagement.vue";e["default"]=m.exports}}]);