(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c524"],{"566b":function(t,e,o){"use strict";var a=o("5a02"),i=o.n(a);i.a},"5a02":function(t,e,o){},d318:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t.addStorePage?t._e():o("div",[o("Card",{staticStyle:{"margin-bottom":"2px"},attrs:{bordered:!1}},[o("Form",{ref:"store_data",attrs:{inline:"",model:t.store_data}},[o("FormItem",{attrs:{label:"门店店号:","label-width":85,prop:"shopId"}},[o("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入门店店号"},on:{"on-change":t.changeData},model:{value:t.store_data.shopId,callback:function(e){t.$set(t.store_data,"shopId",e)},expression:"store_data.shopId"}})],1),t.drop?o("span",[o("FormItem",{attrs:{label:"门店名称:","label-width":85,prop:"shopName"}},[o("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入门店名称:"},on:{"on-change":t.changeData},model:{value:t.store_data.shopName,callback:function(e){t.$set(t.store_data,"shopName",e)},expression:"store_data.shopName"}})],1),o("FormItem",{attrs:{label:"零售商名称:","label-width":85,prop:"venderName"}},[o("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入零售商名称:"},on:{"on-change":t.changeData},model:{value:t.store_data.venderName,callback:function(e){t.$set(t.store_data,"venderName",e)},expression:"store_data.venderName"}})],1)],1):t._e(),o("FormItem",{staticClass:"br",staticStyle:{"margin-left":"35px"}},[o("Button",{attrs:{type:"primary",icon:"md-search"},on:{click:t.queryTableList}},[t._v("查询")]),o("Button",{attrs:{icon:"md-refresh"},on:{click:function(e){t.handleReset("store_data"),t.changeDisplay=!0}}},[t._v("重置")]),o("a",{staticClass:"drop-down",staticStyle:{"margin-left":"10px"},on:{click:t.dropDown}},[t._v("\n                "+t._s(t.dropDownContent)+"\n                "),o("Icon",{attrs:{type:t.dropDownIcon}})],1)],1),o("Row",{attrs:{type:"flex",justify:"start"}},[o("Col",{attrs:{span:"24"}},[o("FormItem",{staticStyle:{"margin-bottom":"0"}},[o("Button",{staticStyle:{width:"120px"},attrs:{type:"success",icon:"md-add"},on:{click:t.addStore}},[t._v("新增门店")])],1),o("FormItem",{staticStyle:{"margin-bottom":"0"}},[o("Button",{staticStyle:{width:"120px"},attrs:{type:"primary",icon:"md-arrow-round-up"},on:{click:t.upShopXls}},[t._v("导入门店信息")])],1),o("FormItem",{staticStyle:{"margin-bottom":"0"}},[o("Button",{staticStyle:{width:"120px"},attrs:{type:"warning",icon:"md-arrow-round-down"},on:{click:t.deriveFn}},[t._v("导出门店信息")])],1)],1)],1)],1)],1),o("Modal",{attrs:{width:"700"},model:{value:t.uploadShopModal,callback:function(e){t.uploadShopModal=e},expression:"uploadShopModal"}},[o("p",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[o("span",[t._v("导入门店列表")])]),o("div",{staticClass:"improt-store",staticStyle:{"text-align":"left",padding:"30px 16px"}},[o("Form",{attrs:{"label-width":180}},[o("FormItem",{staticClass:"upload-excel",attrs:{label:"上传门店Excel：",required:"",enctype:"multipart/form-data"}},[o("Upload",{ref:"uploadGoodsFileItem",staticStyle:{float:"left","margin-right":"30px"},attrs:{action:t.action_item,format:["xlsx","xls"],"on-success":t.handleItemSuccess,"on-format-error":t.handleItemFormatError,"before-upload":t.handleBeforeItemUpload,"on-remove":t.handleItemRemove,headers:t.uploadToken}},[o("i-button",{attrs:{type:"success",icon:"ios-cloud-upload-outline"}},[t._v("上传文件")])],1),o("Button",{staticStyle:{color:"#2d8cf0"},attrs:{type:"text"},on:{click:t.downloadTemplet}},[t._v("点击下载模板")])],1)],1)],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[t.closeBtn?o("Button",{attrs:{type:"primary",size:"large",long:""},on:{click:function(e){t.uploadShopModal=!1}}},[t._v("关闭对话框")]):o("Button",{attrs:{type:"primary",size:"large",long:"",disabled:""}},[t._v("请上传文件")])],1)]),o("Card",{attrs:{bordered:!1}},[o("div",[o("Table",{attrs:{border:"",width:"100%",columns:t.columns6,data:t.store_data_list,loading:t.TableLoading},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.row;e.index;return[o("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){t.editStore(a)}}},[t._v("编辑")]),o("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){t.inputDeleteStore(a.shopId)}}},[t._v("删除")])]}},{key:"enabled",fn:function(e){var a=e.row;return[0==a.enabled?o("span",{staticStyle:{color:"#ed4014"}},[t._v("禁用")]):1==a.enabled?o("span",{staticStyle:{color:"#19be6b"}},[t._v("正常")]):t._e()]}},{key:"createTime",fn:function(e){var a=e.row;return[a.createTime?o("span",[t._v(t._s(t._f("timeFilters")(a.createTime)))]):o("span",{staticStyle:{color:"#ddd"}},[t._v("暂无")])]}},{key:"updateTime",fn:function(e){var a=e.row;return[a.updateTime?o("span",[t._v(t._s(t._f("timeFilters")(a.updateTime)))]):o("span",{staticStyle:{color:"#ddd"}},[t._v("暂无")])]}}])})],1),o("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[o("Page",{attrs:{total:t.totalSize,"show-total":"","show-elevator":"",current:t.current},on:{"on-change":t.changeCurrent}})],1)],1)],1),t.addStorePage?o("div",[o("add-store",{attrs:{type:t.type,storeItem:t.storeItem},on:{changeStatus:t.showStatus}})],1):t._e(),o("Modal",{attrs:{title:"删除门店"},on:{"on-ok":t.deleteStore},model:{value:t.delShopDisplay,callback:function(e){t.delShopDisplay=e},expression:"delShopDisplay"}},[o("span",{staticStyle:{color:"red"}},[t._v("确认删除该门店？")])]),o("Modal",{attrs:{title:"导出门店"},model:{value:t.deriveDisplay,callback:function(e){t.deriveDisplay=e},expression:"deriveDisplay"}},[o("Alert",{attrs:{type:"warning","show-icon":""}},[t._v("全部不输入为导出全部门店")]),o("Form",{ref:"deriveForm",attrs:{inline:"",model:t.deriveForm}},[o("FormItem",{attrs:{label:"门店店号:","label-width":85,prop:"shopId"}},[o("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入门店店号"},on:{"on-change":t.changeData},model:{value:t.deriveForm.shopId,callback:function(e){t.$set(t.deriveForm,"shopId",e)},expression:"deriveForm.shopId"}})],1),o("FormItem",{attrs:{label:"门店名称:","label-width":85,prop:"shopName"}},[o("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入门店名称:"},on:{"on-change":t.changeData},model:{value:t.deriveForm.shopName,callback:function(e){t.$set(t.deriveForm,"shopName",e)},expression:"deriveForm.shopName"}})],1),o("FormItem",{attrs:{label:"零售商名称:","label-width":85,prop:"venderName"}},[o("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入零售商名称:"},on:{"on-change":t.changeData},model:{value:t.deriveForm.venderName,callback:function(e){t.$set(t.deriveForm,"venderName",e)},expression:"deriveForm.venderName"}})],1)],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"primary",size:"large",long:""},on:{click:t.deriveShopXls}},[t._v("导出门店")])],1)],1)],1)},i=[],n=o("ed72"),r=o("6797"),s=o("365c"),l={name:"store-management",components:{addStore:n["default"]},data:function(){return{drop:!1,dropDownContent:"展开",dropDownIcon:"ios-arrow-down",TableLoading:!1,columns6:[{title:"操作",key:"operation",minWidth:145,align:"center",slot:"action",fixed:"left"},{title:"知而行店号",key:"shopId",minWidth:80,align:"center"},{title:"门店名称",key:"shopName",minWidth:145,align:"center"},{title:"门店类型",key:"categories",minWidth:145,align:"center"},{title:"所在省份",key:"province",minWidth:145,align:"center"},{title:"所在城市",key:"city",minWidth:145,align:"center"},{title:"详细地址",key:"address",minWidth:205,align:"center"},{title:"经度",key:"longitude",minWidth:105,align:"center"},{title:"纬度",key:"latitude",minWidth:105,align:"center"},{title:"状态",key:"enabled",minWidth:80,align:"center",slot:"enabled"},{title:"零售商编号",key:"venderId",minWidth:130,align:"center"},{title:"零售商名称",key:"venderName",minWidth:130,align:"center"},{title:"零售商自有店号",key:"venderShopId",minWidth:80,align:"center"},{title:"创建人",key:"createBy",minWidth:145,align:"center"},{title:"创建时间",key:"createTime",minWidth:165,align:"center",slot:"createTime"},{title:"修改人",key:"updateBy",minWidth:145,align:"center"},{title:"修改时间",key:"updateTime",minWidth:165,align:"center",slot:"updateTime"}],store_data:{shopId:"",shopName:"",venderName:""},store_data_list:[],current:1,totalSize:0,uploadShopModal:!1,importStoreInfo:{appid:"",filePath:""},addStorePage:!1,type:1,storeItem:{},delShopDisplay:!1,delShopId:"",listStatus:1,uploadToken:{},action_item:s["a"]+"/system/sys-shop-info/importShopInfo",add_item_data:[],closeBtn:!1,changeDisplay:!0,deriveDisplay:!1,deriveForm:{shopId:"",venderName:"",shopName:""}}},created:function(){this.getShopListFn()},methods:{showStatus:function(t){this.addStorePage=t,this.getShopListFn()},queryTableList:function(){this.listStatus=2,this.current=1,this.getWebankMallPage(this.store_data)},getShopListFn:function(){this.listStatus=1,this.current=1,this.getWebankMallPage({})},getWebankMallPage:function(t){var e=this;this.TableLoading=!0,Object(r["Fb"])(t,this.current).then(function(t){200==t.code?(e.store_data_list=t.data.records,e.totalSize=t.data.total,e.current=t.data.current,e.TableLoading=!1):e.msgErr(t.msg)})},addStore:function(){this.addStorePage=!0,this.type=1},editStore:function(t){this.addStorePage=!0,this.type=2,this.storeItem=t},inputDeleteStore:function(t){this.delShopId=t,this.delShopDisplay=!0},deleteStore:function(){var t=this;Object(r["z"])(this.delShopId).then(function(e){200==e.code?(t.msgOk("删除成功"),t.getWebankMallPage({}),t.delShopId=""):t.msgErr(e.msg)})},handleReset:function(t){this.$refs[t].resetFields(),"store_data"==t&&this.getShopListFn()},setVender:function(t){this.store_data.appid=t.value},changeCurrent:function(t){this.current=t,1==this.listStatus?this.getWebankMallPage({}):2==this.listStatus&&this.getWebankMallPage(this.store_data)},msgOk:function(t){this.$Message.info({content:t,duration:3})},msgErr:function(t){this.$Message.error({content:t,duration:3})},deriveFn:function(){this.deriveForm.shopId="",this.deriveForm.venderName="",this.deriveForm.shopName="",this.deriveDisplay=!0},deriveShopXls:function(){window.location.href=s["a"]+"/system/sys-shop-info/downloadShopInfoList?&shopId="+this.deriveForm.shopId+"&venderName="+this.deriveForm.venderName+"&shopName="+this.deriveForm.shopName,this.deriveDisplay=!1,this.deriveForm.shopId="",this.deriveForm.venderName="",this.deriveForm.shopName=""},upShopXls:function(){this.uploadShopModal=!0,this.closeBtn=!1,this.uploadToken={jwttoken:localStorage.getItem("jwttoken")}},handleItemRemove:function(t){this.add_item_data=[]},handleItemSuccess:function(t,e){200==t.code?(this.closeBtn=!0,this.msgOk("上传成功"),this.getShopListFn()):this.msgErr(t.msg)},handleItemFormatError:function(t){this.$Notice.warning({title:"文件格式不正确",desc:"文件 "+t.name+" 格式不正确，请上传 xlsx 或 xls 格式的表格。"})},handleBeforeItemUpload:function(){this.$refs.uploadGoodsFileItem.clearFiles()},downloadTemplet:function(){window.location.href=s["c"]+"/document/shop_import.xlsx"},dropDown:function(){this.drop?(this.dropDownContent="展开",this.dropDownIcon="ios-arrow-down"):(this.dropDownContent="收起",this.dropDownIcon="ios-arrow-up"),this.drop=!this.drop},changeData:function(){this.changeDisplay=!1}},filters:{timeFilters:function(t){if(t){var e=t.slice(0,10),o=t.slice(11,19);return e+" "+o}}}},d=l,c=(o("566b"),o("2877")),p=Object(c["a"])(d,a,i,!1,null,null,null);p.options.__file="shopManage.vue";e["default"]=p.exports}}]);