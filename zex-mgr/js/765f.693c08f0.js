(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["765f"],{"765f":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Row",[i("Col",{attrs:{span:"4"}},[i("FormItem",{attrs:{prop:"shops["+e.index+"].provinceId",rules:{required:!0,message:"请选择省份"}}},[i("Select",{attrs:{placeholder:"选择省","label-in-value":!0},on:{"on-change":e.provinceChange},model:{value:e.provinceId,callback:function(t){e.provinceId=t},expression:"provinceId"}},e._l(e.provinceList,function(t,s){return i("Option",{key:s,attrs:{value:t.provinceCode}},[e._v(e._s(t.provinceName))])}))],1)],1),i("Col",{attrs:{span:"4"}},[i("FormItem",[i("Select",{attrs:{placeholder:"选择市","label-in-value":!0},on:{"on-change":e.cityChange},model:{value:e.cityId,callback:function(t){e.cityId=t},expression:"cityId"}},e._l(e.cityList,function(t,s){return i("Option",{key:s,attrs:{value:t.cityCode}},[e._v(e._s(t.cityName))])}))],1)],1),i("Col",{attrs:{span:"4"}},[i("FormItem",[i("Select",{attrs:{placeholder:"选择区","label-in-value":!0},on:{"on-change":e.areaChange},model:{value:e.areaId,callback:function(t){e.areaId=t},expression:"areaId"}},e._l(e.areaList,function(t,s){return i("Option",{key:s,attrs:{value:t.areaCode}},[e._v(e._s(t.areaName))])}))],1)],1),i("Col",{attrs:{span:"4"}},[i("FormItem",[i("Select",{attrs:{placeholder:"选择门店","label-in-value":!0},on:{"on-change":e.shopCodeChange},model:{value:e.shopCode,callback:function(t){e.shopCode=t},expression:"shopCode"}},e._l(e.shopList,function(t,s){return i("Option",{key:s,attrs:{value:t.shopId}},[e._v(e._s(t.shopName))])}))],1)],1),i("Col",{attrs:{span:"2"}},[i("Button",{attrs:{type:"dashed",long:"",icon:"ios-close"},on:{click:function(t){e.handleRemove()}}})],1)],1)],1)},n=[],o=i("7f80"),a={props:{index:Number,shop:Object},data:function(){return{isInit:0,provinceList:[],cityList:[],areaList:[],shopList:[],provinceId:null,cityId:null,areaId:null,shopCode:null,provinceName:null,cityName:null,districtName:null}},methods:{loadProvinceList:function(e){var t=this;Object(o["g"])("/system/area/province/list").then(function(e){200==e.code?t.provinceList=e.data:t.$Message.error(e.msg)})},provinceChange:function(e,t){var i=this;this.cityList=[],this.areaList=[],this.shopList=[],this.cityId=null,this.areaId=null,this.shopCode=null,this.cityName=null,this.districtName=null,this.provinceName=e.label,this.$emit("sendProvinceId",this.provinceId,this.index),Object(o["d"])("/system/area/city/"+this.provinceId).then(function(e){200==e.code?(i.cityList=e.data,i.areaId=null):i.$Message.error(e.msg)}),this.loadShops()},cityChange:function(e,t){var i=this;this.areaList=[],this.shopList=[],this.areaId=null,this.shopCode=null,this.districtName=null,this.cityName=e?e.label:null,this.$emit("sendCityId",this.cityId,this.index),Object(o["d"])("/system/area/district/"+this.cityId).then(function(e){200==e.code?(i.areaList=e.data,t&&t()):i.$Message.error(e.msg)}),this.loadShops()},areaChange:function(e){this.shopList=[],this.shopCode=null,this.districtName=e?e.label:null,this.$emit("sendAreaId",this.areaId,this.index),this.loadShops()},shopCodeChange:function(e){this.isInit,e?this.$emit("sendShopCode",this.shopCode,e.label,this.index):this.$emit("sendShopCode",this.shopCode,null,this.index)},loadShops:function(){var e=this;Object(o["f"])("/system/sys-shop-info/list?pageNum=1&pageSize=2000",{province:this.provinceName,city:this.cityName,district:this.districtName}).then(function(t){200==t.code?e.shopList=t.data.records:e.$Message.error(t.msg)})},handleRemove:function(){this.$emit("handleRemove-event",this.index)},init:function(){var e=this;Object(o["f"])("/system/area/province/list").then(function(t){return 200==t.code?e.provinceList=t.data:e.$Message.error(t.msg),t}).then(function(t){return e.shop.provinceId&&(e.provinceId=e.shop.provinceId,e.provinceName=e.provinceList.find(function(t){return t.provinceCode==e.provinceId}).provinceName,e.loadShops()),t}).then(function(t){Object(o["d"])("/system/area/city/"+e.provinceId).then(function(t){return 200==t.code?(e.cityList=t.data,e.areaId=null,e.cityId=e.shop.cityId,e.shop.cityId&&(e.cityName=e.cityList.find(function(t){return t.cityCode==e.cityId}).cityName),e.loadShops()):e.$Message.error(t.msg),t}).then(function(t){e.shop.cityId&&Object(o["d"])("/system/area/district/"+e.cityId).then(function(t){200==t.code?(e.areaList=t.data,e.areaId=e.shop.areaId,e.shop.areaId&&(e.districtName=e.areaList.find(function(t){return t.areaCode==e.areaId}).areaName),e.shop.provinceId&&(e.shopCode=e.shop.shopCode,e.loadShops())):e.$Message.error(t.msg)})})})}},mounted:function(){null!=this.shop.provinceId&&1!=this.shop.provinceId&&(this.isInit=1),this.init()}},r=a,c=i("2877"),d=Object(c["a"])(r,s,n,!1,null,null,null);d.options.__file="store.vue";t["default"]=d.exports}}]);