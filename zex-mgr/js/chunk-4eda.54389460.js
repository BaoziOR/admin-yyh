(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4eda"],{7754:function(t,e,i){},a648:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.merchantRolePage?t._e():i("div",[i("Card",{attrs:{bordered:!1}},[i("Row",{staticClass:"operation"},[i("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.addInfo}},[t._v("新增")]),i("Button",{attrs:{icon:"md-refresh"},on:{click:t.search}},[t._v("刷新")])],1),i("div",[i("Table",{attrs:{border:"",width:"100%",columns:t.columns,data:t.roleList,loading:t.TableLoading},scopedSlots:t._u([{key:"action",fn:function(e){var o=e.row;return["0"==o.status?i("Button",{staticStyle:{color:"#f39913"},attrs:{type:"text",size:"small"},on:{click:function(e){t.stop(o)}}},[t._v("停用")]):t._e(),"1"==o.status?i("Button",{staticStyle:{color:"#368029"},attrs:{type:"text",size:"small"},on:{click:function(e){t.use(o)}}},[t._v("启用")]):t._e(),i("Button",{staticStyle:{color:"#2db7f5"},attrs:{type:"text",size:"small"},on:{click:function(e){t.editInfo(o)}}},[t._v("编辑")])]}}])})],1),i("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[i("Page",{attrs:{total:t.totalSize,"show-total":"","show-elevator":"",current:t.current},on:{"on-change":t.changeCurrent}})],1)],1)],1),i("Modal",{attrs:{title:"启用/停用原因",width:"600","footer-hide":"",closable:!1,"mask-closable":!1},model:{value:t.stopDisplay,callback:function(e){t.stopDisplay=e},expression:"stopDisplay"}},[i("Divider",{staticStyle:{"margin-top":"-10px"}},[t._v("角色编号："+t._s(t.stopRemark.roleId))]),i("Row",[i("Input",{staticStyle:{width:"100%"},attrs:{type:"textarea",placeholder:"200个字符以内原因",clearable:"",rows:2},model:{value:t.stopRemark.remark,callback:function(e){t.$set(t.stopRemark,"remark",e)},expression:"stopRemark.remark"}})],1),i("Row",{staticStyle:{margin:"10px 0 0 456px"}},[i("Button",{attrs:{type:"text"},on:{click:function(e){t.stopDisplay=!1}}},[t._v("取消")]),i("Button",{attrs:{type:"primary"},on:{click:t.addStopOrUse}},[t._v(t._s(t.stopRemark.title))])],1),i("div",[i("Divider",[t._v("操作日志")]),i("Table",{attrs:{height:"350",columns:t.remarkColumns,data:t.remarkList}})],1)],1),i("Modal",{attrs:{title:t.add_info.title,width:"800","footer-hide":"",closable:!1,"mask-closable":!1},model:{value:t.addDisplay,callback:function(e){t.addDisplay=e},expression:"addDisplay"}},[""!=t.add_info.id?i("Divider",{staticStyle:{"margin-top":"10px"}},[t._v("角色编号："+t._s(t.add_info.id))]):t._e(),i("Row",{staticClass:"box"},[i("Col",{staticClass:"left-text",attrs:{span:"4"}},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("角色类型名称")]),i("Col",{attrs:{span:"10"}},[i("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"最多10个汉字",placement:"right"}},[i("Input",{staticStyle:{width:"300px"},attrs:{type:"text",placeholder:"请输入角色类型名称",maxlength:10},on:{"on-change":t.checkName},model:{value:t.add_info.name,callback:function(e){t.$set(t.add_info,"name",e)},expression:"add_info.name"}})],1)],1)],1),i("Row",{staticClass:"box",staticStyle:{"margin-top":"10px"}},[i("Col",{staticClass:"left-text",attrs:{span:"4"}},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("分配权限")]),i("Col",{attrs:{span:"10"}},[i("Row",{staticClass:"box"},[i("Col",{attrs:{span:"10"}},[t._v("\n                        功能\n                    ")]),i("Col",{attrs:{span:"10"}},[t._v("\n                        权限\n                    ")])],1),i("Row",{staticClass:"box"},[i("Divider"),i("div",{staticStyle:{width:"400px",float:"left","margin-bottom":"10px"}},[i("Checkbox",{staticStyle:{float:"left","margin-top":"2px","margin-right":"50px"},attrs:{indeterminate:t.indeterminateCoupon,value:t.checkAllCoupon},nativeOn:{click:function(e){return e.preventDefault(),t.handleCheckAllCoupon(e)}}},[t._v("优惠券管理")]),i("CheckboxGroup",{staticStyle:{float:"left","margin-left":"-13px"},on:{"on-change":t.checkAllGroupChangeCoupon},model:{value:t.checkAllGroupCoupon,callback:function(e){t.checkAllGroupCoupon=e},expression:"checkAllGroupCoupon"}},[i("Checkbox",{attrs:{label:"1001"}},[t._v("浏览")]),i("Checkbox",{attrs:{label:"1002"}},[t._v("新建/编辑")]),i("Checkbox",{attrs:{label:"1003"}},[t._v("下架")])],1)],1),i("Divider"),i("div",{staticStyle:{width:"400px",float:"left","margin-bottom":"10px"}},[i("Checkbox",{staticStyle:{float:"left","margin-top":"2px","margin-right":"50px"},attrs:{indeterminate:t.indeterminateUse,value:t.checkAllUse},nativeOn:{click:function(e){return e.preventDefault(),t.handleCheckAllUse(e)}}},[t._v("核销管理")]),i("CheckboxGroup",{staticStyle:{float:"left"},on:{"on-change":t.checkAllGroupChangeUse},model:{value:t.checkAllGroupUse,callback:function(e){t.checkAllGroupUse=e},expression:"checkAllGroupUse"}},[i("Checkbox",{attrs:{label:"2001"}},[t._v("核销")]),i("Checkbox",{attrs:{label:"2002"}},[t._v("核销记录")]),i("Checkbox",{attrs:{label:"2003"}},[t._v("赠券")])],1)],1),i("Divider"),i("div",{staticStyle:{width:"400px",float:"left","margin-bottom":"10px"}},[i("Checkbox",{staticStyle:{float:"left","margin-top":"2px","margin-right":"50px"},attrs:{indeterminate:t.indeterminateCustomer,value:t.checkAllCustomer},nativeOn:{click:function(e){return e.preventDefault(),t.handleCheckAllCustomer(e)}}},[t._v("精准拓客")]),i("CheckboxGroup",{staticStyle:{float:"left"},on:{"on-change":t.checkAllGroupChangeCustomer},model:{value:t.checkAllGroupCustomer,callback:function(e){t.checkAllGroupCustomer=e},expression:"checkAllGroupCustomer"}},[i("Checkbox",{attrs:{label:"3001"}},[t._v("浏览")]),i("Checkbox",{attrs:{label:"3002"}},[t._v("拓客")])],1)],1),i("Divider"),i("div",{staticStyle:{width:"400px",float:"left","margin-bottom":"10px"}},[i("Checkbox",{staticStyle:{float:"left","margin-top":"2px","margin-right":"50px"},attrs:{indeterminate:t.indeterminateIm,value:t.checkAllIm},nativeOn:{click:function(e){return e.preventDefault(),t.handleCheckAllIm(e)}}},[t._v("客服中心")]),i("CheckboxGroup",{staticStyle:{float:"left"},on:{"on-change":t.checkAllGroupChangeIm},model:{value:t.checkAllGroupIm,callback:function(e){t.checkAllGroupIm=e},expression:"checkAllGroupIm"}},[i("Checkbox",{attrs:{label:"4001"}},[t._v("私信")]),i("Checkbox",{attrs:{label:"4002"}},[t._v("发券")])],1)],1),i("Divider")],1)],1)],1),i("Row",{staticStyle:{margin:"10px 0 0 456px"}},[i("Button",{attrs:{type:"text"},on:{click:function(e){t.addDisplay=!1}}},[t._v("取消")]),i("Button",{attrs:{type:"primary"},on:{click:t.createOrUpdate}},[t._v(t._s(t.add_info.title))])],1)],1)],1)},l=[],a=i("7f80"),s=(i("365c"),{name:"merchant-role",data:function(){return{indeterminateCoupon:!1,checkAllCoupon:!1,checkAllGroupCoupon:[],indeterminateUse:!1,checkAllUse:!1,checkAllGroupUse:[],indeterminateCustomer:!1,checkAllCustomer:!1,checkAllGroupCustomer:[],indeterminateIm:!1,checkAllIm:!1,checkAllGroupIm:[],stopRemark:{roleId:"",remark:"",title:""},remarkColumns:[{title:"操作时间",key:"time",minWidth:150},{title:"操作人",key:"operater",minWidth:100},{title:"类型",key:"operateType",minWidth:100},{title:"原因",key:"remark",minWidth:200}],remarkList:[],current:1,totalSize:0,stopDisplay:!1,merchantRolePage:!1,columns:[{title:"操作",align:"center",fixed:"left",slot:"action",minWidth:100,width:180},{title:"角色编号",key:"id",minWidth:50},{title:"角色类型",key:"name",minWidth:100},{title:"状态",key:"status",minWidth:100,render:function(t,e){return"0"==e.row.status?t("span","启用"):"1"==e.row.status?t("span","停用"):void 0}},{title:"创建时间",key:"createTime",minWidth:150},{title:"创建人",key:"createBy",minWidth:100},{title:"修改时间",key:"updateTime",minWidth:150},{title:"修改人",key:"updateBy",minWidth:100}],roleList:[],TableLoading:!1,addDisplay:!1,addStatus:!1,add_info:{id:"",name:"",title:"新增"}}},created:function(){this.userToken={jwttoken:localStorage.getItem("jwttoken")}},methods:{createOrUpdate:function(){var t=this;if(console.info(JSON.stringify(this.add_info)),""!=this.add_info.name)if(0!=this.checkAllGroupCoupon.length||0!=this.checkAllGroupUse.length||0!=this.checkAllGroupCustomer.length||0!=this.checkAllGroupIm.length){var e={id:this.add_info.id,name:this.add_info.name,checkAllGroupCoupon:this.checkAllGroupCoupon,checkAllGroupUse:this.checkAllGroupUse,checkAllGroupCustomer:this.checkAllGroupCustomer,checkAllGroupIm:this.checkAllGroupIm};console.info(JSON.stringify(e)),Object(a["f"])("/merchant/MerchantRoleInfo/add",e).then(function(e){200==e.code?(t.msgOk(t.add_info.title+"成功"),t.search(),t.addDisplay=!1):(t.TableLoading=!1,t.msgErr(e.msg))})}else this.msgErr("至少选择一个权限");else this.msgErr("名称不能为空")},handleCheckAllCoupon:function(){this.indeterminateCoupon?this.checkAllCoupon=!1:this.checkAllCoupon=!this.checkAllCoupon,this.indeterminateCoupon=!1,this.checkAllCoupon?this.checkAllGroupCoupon=["1001","1002","1003"]:this.checkAllGroupCoupon=[]},checkAllGroupChangeCoupon:function(t){3===t.length?(this.indeterminateCoupon=!1,this.checkAllCoupon=!0):t.length>0?(this.indeterminateCoupon=!0,this.checkAllCoupon=!1):(this.indeterminateCoupon=!1,this.checkAllCoupon=!1)},handleCheckAllUse:function(){this.indeterminateUse?this.checkAllUse=!1:this.checkAllUse=!this.checkAllUse,this.indeterminateUse=!1,this.checkAllUse?this.checkAllGroupUse=["2001","2002","2003"]:this.checkAllGroupUse=[]},checkAllGroupChangeUse:function(t){2===t.length?(this.indeterminateUse=!1,this.checkAllUse=!0):t.length>0?(this.indeterminateUse=!0,this.checkAllUse=!1):(this.indeterminateUse=!1,this.checkAllUse=!1)},handleCheckAllCustomer:function(){this.indeterminateCustomer?this.checkAllCustomer=!1:this.checkAllCustomer=!this.checkAllCustomer,this.indeterminateCustomer=!1,this.checkAllCustomer?this.checkAllGroupCustomer=["3001","3002"]:this.checkAllGroupCustomer=[]},checkAllGroupChangeCustomer:function(t){2===t.length?(this.indeterminateCustomer=!1,this.checkAllCustomer=!0):t.length>0?(this.indeterminateCustomer=!0,this.checkAllCustomer=!1):(this.indeterminateCustomer=!1,this.checkAllCustomer=!1)},handleCheckAllIm:function(){this.indeterminateIm?this.checkAllIm=!1:this.checkAllIm=!this.checkAllIm,this.indeterminateIm=!1,this.checkAllIm?this.checkAllGroupIm=["4001","4002"]:this.checkAllGroupIm=[]},checkAllGroupChangeIm:function(t){2===t.length?(this.indeterminateIm=!1,this.checkAllIm=!0):t.length>0?(this.indeterminateIm=!0,this.checkAllIm=!1):(this.indeterminateIm=!1,this.checkAllIm=!1)},checkName:function(){},search:function(){this.current=1,this.totalSize=0,this.getRoleList()},stop:function(t){this.stopRemark.remark="",this.stopDisplay=!0,this.stopRemark.roleId=t.id,this.stopRemark.title="停用",this.stopRemark.status=t.status,t.remark?this.remarkList=JSON.parse(t.remark):this.remarkList=[]},use:function(t){var e=this;this.stopRemark.remark="",this.stopRemark.roleId=t.id,this.stopRemark.title="启用",this.stopRemark.status=t.status;var i={id:this.stopRemark.roleId,remark:this.stopRemark.remark.trim(),status:this.stopRemark.status};Object(a["f"])("/merchant/MerchantRoleInfo/stop",i).then(function(t){200==t.code?(e.msgOk(e.stopRemark.title+"成功"),e.stopDisplay=!1,e.search()):e.msgErr(t.msg)})},addStopOrUse:function(){var t=this;if(console.info(this.stopRemark),""!=this.stopRemark.remark.trim()){var e={id:this.stopRemark.roleId,remark:this.stopRemark.remark.trim(),status:this.stopRemark.status};Object(a["f"])("/merchant/MerchantRoleInfo/stop",e).then(function(e){200==e.code?(t.msgOk(t.stopRemark.title+"成功"),t.stopDisplay=!1,t.search()):t.msgErr(e.msg)})}else this.msgErr(this.stopRemark.remark+"原因不能为空")},delete:function(){},init:function(){this.getRoleList()},getRoleList:function(){var t=this;this.TableLoading=!0,Object(a["f"])("/merchant/MerchantRoleInfo/list?isAsc=DESC&orderByColumn=1&pageNum="+this.current+"&pageSize=10",{}).then(function(e){200==e.code?(t.roleList=e.data.records,t.current=e.data.current,t.totalSize=e.data.total,t.TableLoading=!1):(t.TableLoading=!1,t.msgErr(e.msg))})},addInfo:function(){this.add_info={id:"",name:"",title:"新增"},this.checkAllGroupCoupon=[],this.checkAllGroupUse=[],this.checkAllGroupCustomer=[],this.checkAllGroupIm=[],this.addDisplay=!0},editInfo:function(t){this.add_info={id:t.id,name:"",title:"编辑"},this.selectById(),this.addDisplay=!0},selectById:function(){var t=this;""!=this.add_info.id&&Object(a["f"])("/merchant/MerchantRoleInfo/selectById?id="+this.add_info.id).then(function(e){200==e.code?(t.add_info.id=e.data.id,t.add_info.name=e.data.name,t.checkAllGroupCoupon=e.data.checkAllGroupCoupon,t.checkAllGroupUse=e.data.checkAllGroupUse,t.checkAllGroupCustomer=e.data.checkAllGroupCustomer,t.checkAllGroupIm=e.data.checkAllGroupIm):t.$Message.error(e.msg)})},changeCurrent:function(t){this.current=t,this.getRoleList()},msgOk:function(t){this.$Message.info({content:t,duration:3})},msgErr:function(t){this.$Message.error({content:t,duration:3})},back:function(){this.$emit("changeStatus",!1)}},mounted:function(){this.init()}}),n=s,c=(i("baaa"),i("2877")),r=Object(c["a"])(n,o,l,!1,null,"4ccbf0ce",null);r.options.__file="merchant-role.vue";e["default"]=r.exports},baaa:function(t,e,i){"use strict";var o=i("7754"),l=i.n(o);l.a}}]);