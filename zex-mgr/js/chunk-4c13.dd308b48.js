(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c13"],{"0966":function(t,e,i){"use strict";var n=i("2981"),a=i.n(n);a.a},2981:function(t,e,i){},"4e8e":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=this,i=e.$createElement,n=e._self._c||i;return n("div",[n("Card",[n("Form",[n("FormItem",{attrs:{label:"单图上传"}},[n("uploadImg",{ref:"upload",attrs:{uploadImg:e.image_url,width:200,height:160},on:{handleSuccess:function(e){return t.image_url=e}}}),n("p",[e._v("选择单图上传图 (不大于1M,尺寸为200*160, JPG/PNG/JPEG/BMP）")])],1),n("FormItem",{attrs:{label:"多图上传"}},[n("uploadImgMore",{attrs:{uploadList:e.ulrList,width:200,height:160},on:{handleSuccess:function(e){return t.ulrList=e}}}),n("p",[e._v("选择多图上传图 (不大于1M,尺寸为200*160, JPG/PNG/JPEG/BMP）")])],1),n("FormItem",{attrs:{label:"图片裁剪"}},[e.imgSrc?n("div",{staticClass:"imgSrc_box"},[n("img",{staticStyle:{width:"100%"},attrs:{src:e.imgSrc}})]):e._e(),n("ImgCutter",{attrs:{label:"选择图片",boxWidth:400,boxHeight:500,rate:1.2},on:{click:e.cutDown}},[n("span",{staticClass:"ivu-btn",staticStyle:{width:"100px"},attrs:{slot:"openImgCutter"},slot:"openImgCutter"},[e._v("上传图片")])]),n("p",{staticStyle:{color:"red"}},[e._v(" boxWidth为裁剪框宽度 boxHeight为裁剪框高度  rate为宽高比")])],1),n("Alert",[e._v("\n      可编辑表格\n        "),n("template",{slot:"desc"},[e._v("\n      参考模版 ：   components/editTable.vue\n\n           ")])],2),n("Alert",{attrs:{type:"success"}},[e._v("\n      树形表格\n        "),n("template",{slot:"desc"},[e._v("\n      参考模版  ：   sys/menu-manage/menuManage.vue\n\n           ")])],2),n("Alert",[e._v("\n       时间戳转为年月日时分秒\n        "),n("template",{slot:"desc"},[e._v('\n             import { formatDate } from "@/libs/dataUtil";\n           '),n("br"),e._v('\n           formatDate( new Date(JSON.parse(this.add_time)), "yyyy-MM-dd hh:mm:ss" )\n\n           ')])],2),n("Alert",{attrs:{type:"success"}},[e._v("\n       去重复\n        "),n("template",{slot:"desc"},[e._v('\n           import { uniqueArray } from "@/libs/dataUtil";\n           '),n("br"),e._v('\n        var afterArr = uniqueArray(this.checkUserList, "id");\n\n           ')])],2),n("Alert",[e._v("\n       时间戳+日期\n        "),n("template",{slot:"desc"},[e._v('\n           import { addDate } from "@/libs/dataUtil";\n           '),n("br"),e._v('\n     var validity_end =\n                addDate(\n                  formatDate(\n                    new Date(JSON.parse(this.add_time)),\n                    "yyyy-MM-dd"\n                  ),\n                11\n                ) ;\n\n           ')])],2),n("Button",{on:{click:e.saveInfo}},[e._v("保存")])],1)],1)],1)},a=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.uploadImg?i("div",{staticClass:"demo-upload-list"},[[i("img",{attrs:{src:t.uploadImg}}),i("div",{staticClass:"demo-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(e){t.handleView()}}}),i("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(e){t.handleRemove()}}})],1)]],2):t._e(),i("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"78px"},attrs:{defaultList:t.uploadImg,accept:"image","show-upload-list":!1,"on-success":t.handleSuccess,format:["jpg","jpeg","png"],"max-size":1048,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,type:"drag",headers:t.userToken,action:t.actionUrl,"before-upload":t.handleBeforeUpload}},[i("div",{staticStyle:{width:"78px",height:"78px","line-height":"58px"}},[i("Icon",{staticStyle:{"margin-top":"24px"},attrs:{type:"ios-camera",size:"36"}})],1)]),i("Modal",{attrs:{title:"查看图片"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.visible?i("img",{staticStyle:{width:"100%"},attrs:{src:t.imgName}}):t._e()])],1)},s=[],l=i("7f80"),r=i("365c"),c=i("e069");function u(t,e,i,n){return new Promise(function(n,a){"image/png"!=t.type&&"image/jpeg"!=t.type&&"image/jpg"!=t.type&&"image/bmp"!=t.type&&(c["Message"].error("图片格式只能选择png/jpeg/jpg/bmp"),a());var o=new FileReader;o.onload=function(t){var o=t.target.result,s=new Image;s.onload=function(){e&&this.width!=e?(c["Notice"].warning({title:"文件尺寸超出限制",desc:"请上传宽为"+e+"的图片"}),a()):i&&this.height!=i?(c["Notice"].warning({title:"文件尺寸超出限制",desc:"请上传高为"+i+"的图片"}),a()):n()},s.onerror=a,s.src=o},o.readAsDataURL(t)})}var d={props:["uploadImg","width","height"],data:function(){return{defaultList:[],imgName:"",visible:!1,uptoken:{},actionUrl:r["g"],fileList:[],userToken:""}},created:function(){this.userToken={jwttoken:localStorage.getItem("jwttoken")}},methods:{handleView:function(t){this.imgName=this.uploadImg,this.visible=!0},handleRemove:function(){this.uploadImg="",this.$emit("handleSuccess","")},handleSuccess:function(t,e){this.$emit("handleSuccess",t.image_url)},handleFormatError:function(t){this.$Notice.warning({title:"上传的格式不正确",desc:"文件'"+t.name+"'不合法, 请重新选择jpg or png.的格式"})},handleMaxSize:function(t){this.$Notice.warning({title:"文件大小超出限制",desc:"文件'"+t.name+"'大小超出"+this.maxSize/1024+"M限制"})},handleBeforeUpload:function(t){return u(t,this.width,this.height)}},mounted:function(){}},m=d,p=(i("ccab"),i("2877")),h=Object(p["a"])(m,o,s,!1,null,null,null);h.options.__file="uploadImg.vue";var g=h.exports,f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._l(t.uploadList,function(e,n){return i("div",{key:n,staticClass:"demo-upload-list"},[[i("img",{attrs:{src:e.img_url}}),i("div",{staticClass:"demo-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(i){t.handleView(e)}}}),i("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(e){t.handleRemove(n)}}})],1)]],2)}),i("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"78px"},attrs:{defaultList:t.uploadList,accept:"image","show-upload-list":!1,"on-success":t.handleSuccess,format:["jpg","jpeg","png"],"max-size":1024,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,type:"drag",headers:t.userToken,action:t.actionUrl,"before-upload":t.handleBeforeUpload}},[i("div",{staticStyle:{width:"78px",height:"78px","line-height":"58px"}},[i("Icon",{staticStyle:{"margin-top":"24px"},attrs:{type:"ios-camera",size:"36"}})],1)]),i("Modal",{attrs:{title:"查看图片"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.visible?i("img",{staticStyle:{width:"100%"},attrs:{src:t.imgName}}):t._e()])],2)},v=[],_=i("a322"),b={props:["uploadList","width","height"],data:function(){return{defaultList:[],imgName:"",visible:!1,uptoken:{},actionUrl:r["g"],fileList:[],userToken:""}},created:function(){this.userToken={jwttoken:localStorage.getItem("jwttoken")}},methods:Object(_["a"])({handleView:function(t){this.imgName=t.img_url,this.visible=!0},handleRemove:function(t){this.uploadList.splice(t,1)},handleSuccess:function(t,e){var i={img_url:t.image_url};this.uploadList.push(i),this.$emit("handleSuccess",this.uploadList)},handleFormatError:function(t){this.$Notice.warning({title:"上传的格式不正确",desc:"文件'"+t.name+"'不合法, 请重新选择jpg or png.的格式"})},handleMaxSize:function(t){this.$Notice.warning({title:"文件大小超出限制",desc:"文件'"+t.name+"'大小超出"+this.maxSize/1024+"M限制"})},handleBeforeUpload:function(){var t=this.uploadList.length<5;return t||this.$Notice.warning({title:"最多只能上传五张图片"}),t}},"handleBeforeUpload",function(t){return u(t,this.width,this.height)}),mounted:function(){}},w=b,y=(i("0966"),Object(p["a"])(w,f,v,!1,null,null,null));y.options.__file="uploadImgMore.vue";var S=y.exports,x=i("9cd5"),I={components:{uploadImg:g,uploadImgMore:S,ImgCutter:x["a"]},data:function(){return{image_url:"http://pic17.nipic.com/20111102/8732394_164338399113_2.jpg",ulrList:[{img_url:"http://www.ghost64.com/qqtupian/zixunImg/local/2019/03/15/15525976683034.jpeg"},{img_url:"https://ku.90sjimg.com/element_origin_min_pic/17/06/17/8b91e3acb380d9cd4de59796f6c035cb.jpg"}],imgSrc:null}},methods:{saveInfo:function(){console.log(this.image_url),console.log(this.ulrList)},cutDown:function(t){var e=this;console.log(t),this.imgSrc=t.dataURL;var i={imgStr:t.dataURL.substr(22)};Object(l["i"])("/operation/operation-info/uploadBase64Image2AliOss",i).then(function(t){200==t.code?e.imgSrc=t.image_url:e.$Message.error(t.msg)})}},mounted:function(){}},k=I,j=(i("dd7f"),Object(p["a"])(k,n,a,!1,null,null,null));j.options.__file="exampleList.vue";e["default"]=j.exports},ccab:function(t,e,i){"use strict";var n=i("ef8c"),a=i.n(n);a.a},d695:function(t,e,i){},dd7f:function(t,e,i){"use strict";var n=i("d695"),a=i.n(n);a.a},ef8c:function(t,e,i){}}]);