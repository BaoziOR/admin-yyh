(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44c5"],{"18a2":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"search"},[i("Row",[i("Col",[i("Card",[i("Button",{attrs:{type:"dashed",icon:"md-arrow-round-back"},on:{click:t.goback}},[t._v("返回列表")]),i("Row",[i("Table",{ref:"table",attrs:{loading:t.TableLoading,border:"",columns:t.tableColumns,data:t.table_list,sortable:"custom"}})],1),i("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[i("Page",{staticStyle:{float:"right"},attrs:{total:t.totalSize,"show-total":"","show-elevator":"",current:t.current},on:{"on-change":t.changeCurrent,"update:current":function(e){t.current=e}}})],1)],1)],1)],1),i("Modal",{attrs:{width:"700",title:t.title,"mask-closable":!1},model:{value:t.edit_Modal_show,callback:function(e){t.edit_Modal_show=e},expression:"edit_Modal_show"}},[i("Form",{ref:"edit_info",attrs:{model:t.edit_info,"label-width":80,rules:t.ruleValidate}},[t.edit_info.firstPage&&!t.edit_info.industryIsSecond?i("span",[i("FormItem",{attrs:{label:"一级行业"}},[i("Input",{attrs:{placeholder:"请输入",clearable:""},model:{value:t.edit_info.name,callback:function(e){t.$set(t.edit_info,"name",e)},expression:"edit_info.name"}})],1)],1):t._e(),t.edit_info.secondPage||t.edit_info.industryIsSecond?i("span",[i("FormItem",{attrs:{label:"一级行业"}},[i("Select",{staticStyle:{width:"150px"},attrs:{clearable:""},on:{"on-change":t.getFirstIndustrylist},model:{value:t.edit_info.parentId,callback:function(e){t.$set(t.edit_info,"parentId",e)},expression:"edit_info.parentId"}},t._l(t.parentList,function(e,n){return i("Option",{key:n,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),i("FormItem",{attrs:{label:"二级行业"}},[i("Input",{attrs:{placeholder:"请输入",clearable:""},model:{value:t.edit_info.name,callback:function(e){t.$set(t.edit_info,"name",e)},expression:"edit_info.name"}})],1)],1):t._e(),i("FormItem",{attrs:{label:"排序",prop:"orderBy"}},[i("Input",{attrs:{placeholder:"请输入",clearable:""},model:{value:t.edit_info.orderBy,callback:function(e){t.$set(t.edit_info,"orderBy",e)},expression:"edit_info.orderBy"}})],1),i("FormItem",{attrs:{label:"备注"}},[i("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入...",clearable:""},model:{value:t.edit_info.remark,callback:function(e){t.$set(t.edit_info,"remark",e)},expression:"edit_info.remark"}})],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text"},on:{click:function(e){t.edit_Modal_show=!1}}},[t._v("取消")]),i("Button",{attrs:{type:"primary",loading:t.edit_loading},on:{click:function(e){t.editOk("edit_info")}}},[t._v("保存")])],1)],1)],1)},a=[],o=i("a322"),s=i("7f80"),r={name:"industryManageSecond",props:{parentId:String},components:{},data:function(){var t=this;return{drop:!1,dropDownContent:"展开",dropDownIcon:"ios-arrow-down",searchItem:{},current:1,totalSize:0,pageNum:1,limit:10,TableLoading:!1,table_list:[],self:this,tableColumns:[{title:"一级行业",key:"parentName",width:200,align:"center"},{title:"二级行业",key:"name",width:200,align:"center"},{title:"状态",key:"status",align:"center",width:150,render:function(t,e){var i=e.row,n="1"==i.status?"blue":"red",a="1"==i.status?"显示":"隐藏";return t("Tag",{props:{color:n}},a)}},{title:"排序",key:"orderBy",width:100,align:"center"},{title:"创建人",key:"createBy",width:170,align:"center"},{title:"创建时间",key:"createTime",width:250,align:"center",sortable:!0},{title:"操作",key:"action",fixed:"left",align:"center",width:250,render:function(e,i){var n=i.row,a="1"==n.status?"red":"#5cadff",o="1"==n.status?"隐藏":"显示";return e("div",[e("Button",{props:{type:"text",size:"small"},style:{color:"#5cadff"},on:{click:function(){t.editInfo(i.row)}}},"编辑"),e("Button",{props:{type:"text",size:"small"},style:{color:a},on:{click:function(){t.updateStatusInfo(i.row)}}},o)])}}],edit_Modal_show:!1,parentList:[],edit_info:{id:"",parentId:"",name:"",status:"",orderBy:"",industryLevel:"",remark:null,firstPage:!1,secondPage:!1,action:"",industryIsSecond:!1},edit_loading:!1,ruleValidate:{postName:[{required:!0,message:"岗位名称不能为空",trigger:"blur"}],postCode:[{required:!0,message:"岗位编码不能为空",trigger:"blur"}],postSort:[{required:!0,message:"显示顺序不能为空",trigger:"blur"}],status:[{required:!0,message:"请选择岗位状态",trigger:"change"}]},requestUrl:"",msg:"",title:""}},created:function(){},methods:{init:function(){this.updateTableList(),this.getFirstIndustrylist()},getFirstIndustrylist:function(){var t=this;Object(s["f"])("/merchant/industryMain/listall").then(function(e){200==e.code?t.parentList=e.data:t.$Message.error(e.msg)})},dropDown:function(){this.drop?(this.dropDownContent="展开",this.dropDownIcon="ios-arrow-down"):(this.dropDownContent="收起",this.dropDownIcon="ios-arrow-up"),this.drop=!this.drop},refresh:function(){this.updateTableList()},queryTableList:function(){this.updateTableList()},changeCurrent:function(t){this.pageNum=t,this.updateTableList()},goback:function(){this.$emit("changeStatus",!1)},updateTableList:function(){var t=this;this.TableLoading=!0;var e={parentId:this.parentId};Object(s["f"])("/merchant/industrySecond/list?pageNum="+this.pageNum+"&pageSize="+this.limit,e).then(function(e){t.TableLoading=!1,e.isSuccess?(t.totalSize=e.data.total,t.table_list=e.data.records):t.$Message.error(e.msg)})},addInfo:function(){this.edit_info={postId:"",postName:"",postCode:"",status:"1",remark:"",postSort:null},this.edit_Modal_show=!0,this.title="岗位管理新增"},addFirstInfo:function(){var t;this.edit_info=(t={id:"",name:"",industryLevel:1,orderBy:"",status:"1",parentId:""},Object(o["a"])(t,"parentId",""),Object(o["a"])(t,"remark",""),Object(o["a"])(t,"firstPage",!0),Object(o["a"])(t,"secondPage",!1),Object(o["a"])(t,"action","add"),t),this.edit_Modal_show=!0,this.title="一级行业新增"},addSecondInfo:function(){this.edit_info={id:"",name:"",industryLevel:2,orderBy:"",status:"1",parentId:"",remark:"",firstPage:!1,secondPage:!0,action:"add"},this.edit_Modal_show=!0,this.title="二级行业新增"},editInfo:function(t){this.edit_info={id:t.id,name:t.name,industryLevel:t.industryLevel,orderBy:t.orderBy,status:t.status,parentId:t.parentId,remark:t.remark,action:"edit"},"1"==this.edit_info.industryLevel?(this.edit_info.industryIsSecond=!1,this.edit_info.firstPage=!0,this.edit_info.secondPage=!1):(this.edit_info.industryIsSecond=!0,this.edit_info.firstPage=!1,this.edit_info.secondPage=!0),this.edit_Modal_show=!0,this.title="行业编辑"},editOk:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var i;if(""==e.edit_info.postSort)return void e.$Message.error("显示顺序不能为空");e.edit_info.firstPage&&"add"==e.edit_info.action&&(e.requestUrl="/merchant/industryMain/add",e.msg="新增成功"),e.edit_info.firstPage&&"edit"==e.edit_info.action&&(e.requestUrl="/merchant/industryMain/edit",e.msg="编辑成功"),e.edit_info.secondPage&&"add"==e.edit_info.action&&(e.requestUrl="/merchant/industrySecond/add",e.msg="新增成功"),e.edit_info.secondPage&&"edit"==e.edit_info.action&&(e.requestUrl="/merchant/industrySecond/edit",e.msg="编辑成功"),e.edit_loading=!0;var n=(i={id:e.edit_info.id,parentId:e.edit_info.parentId,name:e.edit_info.name,industryLevel:e.edit_info.industryLevel},Object(o["a"])(i,"parentId",e.edit_info.parentId),Object(o["a"])(i,"orderBy",e.edit_info.orderBy),Object(o["a"])(i,"status",e.edit_info.status),Object(o["a"])(i,"remark",e.edit_info.remark),i);Object(s["f"])(e.requestUrl,n).then(function(t){e.edit_loading=!1,200==t.code?(e.$Message.info(e.msg),setTimeout(function(){e.edit_Modal_show=!1,e.updateTableList()},1200)):e.$Message.error(t.msg)})}else e.$Message.error("表单验证失败!")})},updateStatusInfo:function(t){var e=this,i=1==t.status?"您确定要将记录修改为隐藏状态吗？":"确定要将记录修改为显示状态吗？",n=1==t.status?0:1;this.$Modal.confirm({title:"确认",content:i,onOk:function(){e.$Loading.start(),Object(s["f"])("/merchant/industrySecond/statusEdit?id="+t.id+"&status="+n).then(function(t){e.loading=!1,"200"==t.code?(e.$Message.info("更新成功！"),setTimeout(function(){e.pageNum=1,e.updateTableList()},1200)):e.$Message.error(t.msg)})},onCancel:function(){e.$Message.info("点击了取消")}})},removeInfo:function(t){var e=this;this.$Modal.confirm({title:"删除确认",content:"删除后不可恢复，是否继续删除？",onOk:function(){e.$Loading.start(),Object(s["f"])("/system/sys-post/delete?postId="+t.postId).then(function(t){e.loading=!1,"200"==t.code?(e.$Message.info("删除成功！"),setTimeout(function(){e.pageNum=1,e.updateTableList()},1200)):e.$Message.error(t.msg)})},onCancel:function(){e.$Message.info("点击了取消")}})}},mounted:function(){this.init()}},d=r,l=(i("51d4"),i("2877")),c=Object(l["a"])(d,n,a,!1,null,"9b049faa",null);c.options.__file="industryManageSecond.vue";e["default"]=c.exports},"51d4":function(t,e,i){"use strict";var n=i("bfd8"),a=i.n(n);a.a},bfd8:function(t,e,i){}}]);