(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2582"],{3978:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[a("Row",[a("Col",[a("Card",[a("Row",[a("Form",{ref:"searchItem",staticClass:"search-form",attrs:{model:t.searchItem,inline:"","label-width":70}},[a("FormItem",{attrs:{label:"字典名称"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",clearable:""},model:{value:t.searchItem.dictCode,callback:function(e){t.$set(t.searchItem,"dictCode",e)},expression:"searchItem.dictCode"}},t._l(t.dictCodeList,function(e,i){return a("Option",{key:i,attrs:{value:e.dictCode}},[t._v(t._s(e.dictName))])}))],1),t.drop?a("span",[a("FormItem",{attrs:{label:"字典标签"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",clearable:"",placeholder:"请输入字典标签"},model:{value:t.searchItem.dictLabel,callback:function(e){t.$set(t.searchItem,"dictLabel",e)},expression:"searchItem.dictLabel"}})],1),a("FormItem",{attrs:{label:"数据状态"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",clearable:""},model:{value:t.searchItem.status,callback:function(e){t.$set(t.searchItem,"status",e)},expression:"searchItem.status"}},[a("Option",{attrs:{value:""}},[t._v("所有")]),a("Option",{attrs:{value:"0"}},[t._v("正常")]),a("Option",{attrs:{value:"1"}},[t._v("停用")])],1)],1)],1):t._e(),a("FormItem",{staticClass:"br",staticStyle:{"margin-left":"-35px"}},[a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.queryTableList}},[t._v("搜索")]),a("Button",{on:{click:t.refresh}},[t._v("重置")]),a("a",{staticClass:"drop-down",on:{click:t.dropDown}},[t._v("\n                "+t._s(t.dropDownContent)+"\n                "),a("Icon",{attrs:{type:t.dropDownIcon}})],1)],1)],1)],1)],1),a("Card",[a("Row",{staticClass:"operation"},[a("Button",{attrs:{type:"dashed",icon:"md-arrow-round-back"},on:{click:function(e){t.goback()}}},[t._v("返回")]),a("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:function(e){t.addInfo()}}},[t._v("新增")]),a("Button",{attrs:{icon:"md-refresh"},on:{click:t.updateTableList}},[t._v("刷新")])],1),a("Row",[a("Table",{ref:"table",attrs:{loading:t.TableLoading,border:"",columns:t.tableColumns,data:t.table_list,sortable:"custom"},scopedSlots:t._u([{key:"dictLabel",fn:function(e){var i=e.row;return["image"==i.dictCode?a("Button",{attrs:{size:"small"},on:{click:function(e){t.wxQrcodeLook(i.dictLabel)}}},[t._v("查看图片")]):a("span",[t._v(t._s(i.dictLabel))])]}}])})],1),a("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[a("Page",{staticStyle:{float:"right"},attrs:{total:t.totalSize,"show-total":"","show-elevator":"",current:t.current},on:{"on-change":t.changeCurrent,"update:current":function(e){t.current=e}}})],1)],1)],1)],1),a("Modal",{attrs:{width:"700",title:"数据字典新增","mask-closable":!1},model:{value:t.add_Modal_show,callback:function(e){t.add_Modal_show=e},expression:"add_Modal_show"}},[a("Form",{ref:"add_info",attrs:{model:t.add_info,"label-width":80,rules:t.ruleValidate}},[a("Row",["image"==t.searchItem.dictCode?a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"字典类型"}},[a("Input",{attrs:{placeholder:"请输入",disabled:"",clearable:""},model:{value:t.searchItem.dictCode,callback:function(e){t.$set(t.searchItem,"dictCode",e)},expression:"searchItem.dictCode"}})],1)],1):t._e(),"image"!=t.searchItem.dictCode?a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"字典标签",prop:"dictLabel"}},[a("Input",{attrs:{placeholder:"请输入",clearable:""},model:{value:t.add_info.dictLabel,callback:function(e){t.$set(t.add_info,"dictLabel",e)},expression:"add_info.dictLabel"}})],1)],1):t._e(),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"字典键值",prop:"dictValue"}},[a("Input",{attrs:{placeholder:"请输入",clearable:""},model:{value:t.add_info.dictValue,callback:function(e){t.$set(t.add_info,"dictValue",e)},expression:"add_info.dictValue"}})],1)],1)],1),a("Row",["image"==t.searchItem.dictCode?a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"字典标签",prop:"dictLabel"}},[a("div",{staticStyle:{float:"left",width:"90px",height:"90px","line-height":"90px","margin-right":"10px",border:"1px dashed #dcdee2",background:"#fff"}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.add_info.dictLabel}})]),a("div",{staticStyle:{display:"inline-block"}},[a("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"90px"},attrs:{defaultList:t.uploadList1,type:"drag",format:["jpg","jpeg","png","bmp"],"on-success":t.handleSuccess1,action:t.url,accept:"image","max-size":1024,"on-exceeded-size":t.handleMaxSize,"on-format-error":t.formatError,headers:t.userToken,"show-upload-list":!1}},[a("div",{staticStyle:{width:"90px",height:"90px","line-height":"90px"}},[a("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)])],1),a("p",{staticStyle:{width:"256px",height:"23px","line-height":"23px"}},[t._v("请上传图片(不大于1M, JPG/PNG/JPEG/BMP)")])])],1):t._e(),"image"!=t.searchItem.dictCode?a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"字典类型",required:""}},[a("Input",{attrs:{placeholder:"请输入",disabled:"",clearable:""},model:{value:t.searchItem.dictCode,callback:function(e){t.$set(t.searchItem,"dictCode",e)},expression:"searchItem.dictCode"}})],1)],1):t._e(),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"字典排序",prop:"dictSort"}},[a("Input",{attrs:{placeholder:"请输入",clearable:""},model:{value:t.add_info.dictSort,callback:function(e){t.$set(t.add_info,"dictSort",e)},expression:"add_info.dictSort"}})],1)],1)],1),a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"系统默认",prop:"isDefault"}},[a("Select",{model:{value:t.add_info.isDefault,callback:function(e){t.$set(t.add_info,"isDefault",e)},expression:"add_info.isDefault"}},[a("Option",{attrs:{value:"Y"}},[t._v("是")]),a("Option",{attrs:{value:"N"}},[t._v("否")])],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"状态",prop:"status"}},[a("Select",{model:{value:t.add_info.status,callback:function(e){t.$set(t.add_info,"status",e)},expression:"add_info.status"}},[a("Option",{attrs:{value:"0"}},[t._v("正常")]),a("Option",{attrs:{value:"1"}},[t._v("停用")])],1)],1)],1)],1),a("FormItem",{attrs:{label:"备注"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入...",clearable:""},model:{value:t.add_info.remark,callback:function(e){t.$set(t.add_info,"remark",e)},expression:"add_info.remark"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:function(e){t.add_Modal_show=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.add_loading},on:{click:function(e){t.addOk("add_info")}}},[t._v("保存")])],1)],1),a("Modal",{attrs:{width:"700",title:"数据字典编辑","mask-closable":!1},model:{value:t.edit_Modal_show,callback:function(e){t.edit_Modal_show=e},expression:"edit_Modal_show"}},[a("Form",{ref:"edit_info",attrs:{model:t.edit_info,"label-width":80,rules:t.ruleValidate}},[a("Row",["image"==t.searchItem.dictCode?a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"字典类型"}},[a("Input",{attrs:{placeholder:"请输入",disabled:"",clearable:""},model:{value:t.searchItem.dictCode,callback:function(e){t.$set(t.searchItem,"dictCode",e)},expression:"searchItem.dictCode"}})],1)],1):t._e(),"image"!=t.searchItem.dictCode?a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"字典标签",prop:"dictLabel"}},[a("Input",{attrs:{placeholder:"请输入",clearable:""},model:{value:t.edit_info.dictLabel,callback:function(e){t.$set(t.edit_info,"dictLabel",e)},expression:"edit_info.dictLabel"}})],1)],1):t._e(),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"字典键值",prop:"dictValue"}},[a("Input",{attrs:{placeholder:"请输入",clearable:""},model:{value:t.edit_info.dictValue,callback:function(e){t.$set(t.edit_info,"dictValue",e)},expression:"edit_info.dictValue"}})],1)],1)],1),a("Row",["image"==t.searchItem.dictCode?a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"字典标签",prop:"dictLabel"}},[a("div",{staticStyle:{float:"left",width:"90px",height:"90px","line-height":"90px","margin-right":"10px",border:"1px dashed #dcdee2",background:"#fff"}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.edit_info.dictLabel}})]),a("div",{staticStyle:{display:"inline-block"}},[a("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"90px"},attrs:{defaultList:t.uploadList2,type:"drag",format:["jpg","jpeg","png","bmp"],"on-success":t.handleSuccess2,action:t.url,accept:"image","max-size":1024,"on-exceeded-size":t.handleMaxSize,"on-format-error":t.formatError,headers:t.userToken,"show-upload-list":!1}},[a("div",{staticStyle:{width:"90px",height:"90px","line-height":"90px"}},[a("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)])],1),a("p",{staticStyle:{width:"256px",height:"23px","line-height":"23px"}},[t._v("请上传图片(不大于1M, JPG/PNG/JPEG/BMP)")])])],1):t._e(),"image"!=t.searchItem.dictCode?a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"字典类型",required:""}},[a("Input",{attrs:{placeholder:"请输入",disabled:"",clearable:""},model:{value:t.searchItem.dictCode,callback:function(e){t.$set(t.searchItem,"dictCode",e)},expression:"searchItem.dictCode"}})],1)],1):t._e(),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"字典排序",required:""}},[a("Input",{attrs:{placeholder:"请输入",clearable:""},model:{value:t.edit_info.dictSort,callback:function(e){t.$set(t.edit_info,"dictSort",e)},expression:"edit_info.dictSort"}})],1)],1)],1),a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"系统默认",prop:"isDefault"}},[a("Select",{model:{value:t.edit_info.isDefault,callback:function(e){t.$set(t.edit_info,"isDefault",e)},expression:"edit_info.isDefault"}},[a("Option",{attrs:{value:"Y"}},[t._v("是")]),a("Option",{attrs:{value:"N"}},[t._v("否")])],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"状态",prop:"status"}},[a("Select",{model:{value:t.edit_info.status,callback:function(e){t.$set(t.edit_info,"status",e)},expression:"edit_info.status"}},[a("Option",{attrs:{value:"0"}},[t._v("正常")]),a("Option",{attrs:{value:"1"}},[t._v("停用")])],1)],1)],1)],1),a("FormItem",{attrs:{label:"备注"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入...",clearable:""},model:{value:t.edit_info.remark,callback:function(e){t.$set(t.edit_info,"remark",e)},expression:"edit_info.remark"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:function(e){t.edit_Modal_show=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.edit_loading},on:{click:function(e){t.editOk("edit_info")}}},[t._v("保存")])],1)],1),a("Modal",{attrs:{title:"查看图片",width:"450","footer-hide":""},model:{value:t.imageDisplay,callback:function(e){t.imageDisplay=e},expression:"imageDisplay"}},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.image_url}})])],1)},o=[],s=a("a322"),d=a("7f80"),r=a("365c"),l={name:"dicData",components:{},props:{dictCode:String},data:function(){var t,e=this;return t={drop:!1,dropDownContent:"展开",dropDownIcon:"ios-arrow-down",dictCodeList:[],searchItem:{status:"",dictLabel:"",dictCode:""},current:1,totalSize:0,pageNum:1,limit:10,TableLoading:!1,table_list:[],self:this,tableColumns:[{title:"字典类型",key:"dictCode",width:150,align:"center"},{title:"字典标签",key:"dictLabel",minWidth:150,align:"center",slot:"dictLabel"},{title:"字典键值",key:"dictValue",width:150,align:"center"},{title:"字典排序",key:"dictSort",width:110,sortable:!0,align:"center"},{title:"状态",key:"status",width:100,align:"center",render:function(t,e){var a=e.row,i="1"===a.status?"red":"blue",o="1"===a.status?"停用":"正常";return t("Tag",{props:{color:i}},o)}},{title:"创建人",key:"createBy",width:100,align:"center"},{title:"创建时间",key:"createTime",minWidth:140,align:"center",sortable:!0},{title:"编辑人",key:"updateBy",width:100,align:"center"},{title:"编辑时间",key:"updateTime",minWidth:140,align:"center",sortable:!0},{title:"备注",key:"remark",align:"center",width:200},{title:"操作",key:"action",fixed:"left",align:"center",width:200,render:function(t,a){return t("div",[t("Button",{props:{type:"text",size:"small"},style:{color:"#5cadff"},on:{click:function(){e.editInfo(a.row)}}},"编辑"),t("Button",{props:{type:"text",size:"small"},style:{color:"#ff3300"},on:{click:function(){e.removeInfo(a.row)}}},"删除")])}}],add_Modal_show:!1,add_loading:!1,add_info:{},edit_Modal_show:!1,edit_info:{},edit_loading:!1,ruleValidate:{dictLabel:[{required:!0,message:"字典标签不能为空",trigger:"blur"}],dictValue:[{required:!0,message:"字典键值不能为空",trigger:"blur"}],dictSort:[{required:!0,message:"字典排序不能为空",trigger:"blur"}],isDefault:[{required:!0,message:"请选择系统默认",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]}},Object(s["a"])(t,"table_list",[]),Object(s["a"])(t,"searchType",""),Object(s["a"])(t,"uploadList1",[]),Object(s["a"])(t,"uploadList2",[]),Object(s["a"])(t,"url",r["g"]),Object(s["a"])(t,"userToken",{}),Object(s["a"])(t,"imageDisplay",!1),Object(s["a"])(t,"image_url",""),t},created:function(){},methods:{init:function(){var t=this.dictCode;this.searchItem.dictCode=t,this.updateTableList(),this.getDictCodeList(),this.userToken={jwttoken:localStorage.getItem("jwttoken")}},getDictCodeList:function(){var t=this,e={dictName:"",dictCode:"",status:"",beginTime:"",endTime:""};Object(d["f"])("/system/sys-dict/list?pageNum=1&pageSize=100",e).then(function(e){t.TableLoading=!1,e.isSuccess?t.dictCodeList=e.data.records:t.$Message.error(e.msg)})},dropDown:function(){this.drop?(this.dropDownContent="展开",this.dropDownIcon="ios-arrow-down"):(this.dropDownContent="收起",this.dropDownIcon="ios-arrow-up"),this.drop=!this.drop},refresh:function(){this.updateTableList()},queryTableList:function(){this.searchType=2,this.updateTableList()},changeCurrent:function(t){this.pageNum=t,this.updateTableList()},updateTableList:function(){var t=this;this.TableLoading=!0;var e={dictLabel:this.searchItem.dictLabel,dictCode:this.searchItem.dictCode,status:this.searchItem.status};Object(d["f"])("/system/sys-dict-data/list?pageNum="+this.pageNum+"&pageSize="+this.limit,e).then(function(e){t.TableLoading=!1,e.isSuccess?(t.totalSize=e.data.total,t.table_list=e.data.records):t.$Message.error(e.msg)})},addInfo:function(){this.add_info={},this.add_Modal_show=!0},addOk:function(t){var e=this;void 0!=this.add_info.dictSort&&""!=this.add_info.dictSort?this.$refs[t].validate(function(t){if(t){var a={dictLabel:e.add_info.dictLabel,dictValue:e.add_info.dictValue,dictCode:e.searchItem.dictCode,dictSort:e.add_info.dictSort,isDefault:e.add_info.isDefault,status:e.add_info.status,remark:e.add_info.remark};e.add_loading=!0,Object(d["f"])("/system/sys-dict-data/add",a).then(function(t){e.add_loading=!1,200==t.code?(e.$Message.info("新增成功！"),setTimeout(function(){e.add_Modal_show=!1,e.updateTableList()},1200)):e.$Message.error(t.msg)})}else e.$Message.error("表单验证失败!")}):this.$Message.error("字典排序还没有填写")},editInfo:function(t){this.edit_Modal_show=!0,this.edit_info=t},editOk:function(t){var e=this;void 0!=this.edit_info.dictSort&&""!=this.edit_info.dictSort?this.$refs[t].validate(function(t){if(t){var a={id:e.edit_info.id,dictId:e.edit_info.dictId,dictLabel:e.edit_info.dictLabel,dictValue:e.edit_info.dictValue,dictCode:e.searchItem.dictCode,dictSort:e.edit_info.dictSort,isDefault:e.edit_info.isDefault,status:e.edit_info.status,remark:e.edit_info.remark};e.edit_loading=!0,Object(d["f"])("/system/sys-dict-data/edit",a).then(function(t){e.edit_loading=!1,200==t.code?(e.$Message.info("编辑成功！"),setTimeout(function(){e.edit_Modal_show=!1,e.updateTableList()},1200)):e.$Message.error(t.msg)})}else e.$Message.error("表单验证失败!")}):this.$Message.error("字典排序还没有填写")},goback:function(){this.$emit("changeStatus",!1)},removeInfo:function(t){var e=this;this.$Modal.confirm({title:"删除确认",content:"删除后不可恢复，是否继续删除？",onOk:function(){e.$Loading.start(),Object(d["f"])("/system/sys-dict-data/delete?id="+t.id).then(function(t){e.loading=!1,"200"==t.code?(e.$Message.info("删除成功！"),setTimeout(function(){e.pageNum=1,e.updateTableList()},1200)):e.$Message.error(t.msg)})},onCancel:function(){e.$Message.info("点击了取消")}})},handleSuccess1:function(t,e){if(200==t.code){this.add_info.dictLabel=t.image_url;var a=[{url:t.image_url}];this.uploadList1=a,this.msgOk("上传图片成功")}else this.msgErr("上传图片失败，请重新上传")},handleSuccess2:function(t,e){if(200==t.code){this.edit_info.dictLabel=t.image_url;var a=[{url:t.image_url}];this.uploadList2=a,this.msgOk("上传图片成功")}else this.msgErr("上传图片失败，请重新上传")},handleMaxSize:function(){this.msgErr("上传图片不能超过1MB,请重新上传")},formatError:function(){this.msgErr("只能上传jpg,jpeg,png,bmp格式,请重新上传")},wxQrcodeLook:function(t){this.image_url=t,this.imageDisplay=!0},msgOk:function(t){this.$Message.info({content:t,duration:3})},msgErr:function(t){this.$Message.error({content:t,duration:3})}},mounted:function(){this.init()}},n=l,c=(a("bc83"),a("2877")),u=Object(c["a"])(n,i,o,!1,null,"3fbd0350",null);u.options.__file="dicData.vue";e["default"]=u.exports},bc83:function(t,e,a){"use strict";var i=a("d40a"),o=a.n(i);o.a},d40a:function(t,e,a){}}]);