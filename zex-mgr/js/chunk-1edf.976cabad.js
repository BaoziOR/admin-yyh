(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1edf"],{"3a08":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"search"},[i("Row",[i("Col",[i("Card",[i("Row",[i("Form",{ref:"searchItem",staticClass:"search-form",attrs:{model:e.searchItem,inline:"","label-width":70}},[i("FormItem",{attrs:{label:"菜单名称"}},[i("Input",{staticStyle:{width:"200px"},attrs:{type:"text",clearable:"",placeholder:"请输入菜单名称"},model:{value:e.searchItem.menuName,callback:function(t){e.$set(e.searchItem,"menuName",t)},expression:"searchItem.menuName"}})],1),e.drop?i("span",[i("FormItem",{attrs:{label:"菜单状态"}},[i("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.searchItem.visible,callback:function(t){e.$set(e.searchItem,"visible",t)},expression:"searchItem.visible"}},[i("Option",{attrs:{value:" "}},[e._v("所有")]),i("Option",{attrs:{value:"1"}},[e._v("正常")]),i("Option",{attrs:{value:"0"}},[e._v("停用")])],1)],1)],1):e._e(),i("FormItem",{staticClass:"br",staticStyle:{"margin-left":"-35px"}},[i("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.queryTableList}},[e._v("搜索")]),i("Button",{on:{click:e.refresh}},[e._v("重置")]),i("a",{staticClass:"drop-down",on:{click:e.dropDown}},[e._v("\n                "+e._s(e.dropDownContent)+"\n                "),i("Icon",{attrs:{type:e.dropDownIcon}})],1)],1)],1)],1)],1),i("Card",[i("Row",{staticClass:"operation"},[i("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:function(t){e.addInfo()}}},[e._v("新增")]),i("Button",{staticClass:"ivu-btn ivu-btn-info",on:{click:function(t){e.fold=!1}}},[e._v("全部展开")]),i("Button",{staticClass:"ivu-btn ivu-btn-error",on:{click:function(t){e.fold=!0}}},[e._v("全部折叠")]),i("Button",{attrs:{icon:"md-refresh"},on:{click:e.update}},[e._v("刷新")])],1),i("Row",[e.TableLoading?i("Spin",{attrs:{size:"large",fix:""}}):e._e(),i("tree-table",{attrs:{"expand-key":"title","expand-type":!1,selectable:!1,columns:e.tableColumns,data:e.table_list,"show-index":!0,"is-fold":e.fold},scopedSlots:e._u([{key:"visible",fn:function(t){return["0"==t.row.visible?i("span",{staticStyle:{color:"#ed4014"}},[e._v("隐藏")]):e._e(),"1"==t.row.visible?i("span",{staticStyle:{color:"#19be6b"}},[e._v("显示")]):e._e()]}},{key:"menuType",fn:function(t){return["M"==t.row.menuType?i("Tag",{attrs:{checkable:"",color:"primary"}},[e._v("目录")]):e._e(),"C"==t.row.menuType?i("Tag",{attrs:{checkable:"",color:"success"}},[e._v("菜单")]):"F"==t.row.menuType?i("Tag",{attrs:{checkable:"",color:"warning"}},[e._v("按钮")]):e._e()]}},{key:"likes",fn:function(t){return[i("Button",{staticStyle:{color:"#5cadff"},attrs:{type:"text",size:"small"},on:{click:function(i){e.editInfo(t.row)}}},[e._v("编辑")]),e._v("   \n              "),i("Button",{staticStyle:{color:"#19be6b"},attrs:{type:"text",size:"small"},on:{click:function(i){e.edit_add(t.row)}}},[e._v("新增")]),e._v("   \n              "),i("Button",{staticStyle:{color:"#ff3300"},attrs:{type:"text",size:"small"},on:{click:function(i){e.removeInfo(t.row)}}},[e._v("删除")])]}}])})],1)],1)],1)],1),i("Modal",{attrs:{width:"700",title:"菜单管理新增","mask-closable":!1},model:{value:e.add_Modal_show,callback:function(t){e.add_Modal_show=t},expression:"add_Modal_show"}},[i("Form",{ref:"add_info",attrs:{model:e.add_info,"label-width":80}},[i("FormItem",{attrs:{label:"菜单类型",required:""}},[i("RadioGroup",{model:{value:e.add_info.menuType,callback:function(t){e.$set(e.add_info,"menuType",t)},expression:"add_info.menuType"}},[i("Radio",{attrs:{label:"M"}},[e._v("目录")]),i("Radio",{attrs:{label:"C"}},[e._v("菜单")]),i("Radio",{attrs:{label:"F"}},[e._v("按钮")])],1)],1),"C"==e.add_info.menuType?i("FormItem",{attrs:{label:"上级菜单",required:""}},[i("Button",{staticStyle:{width:"252px"},on:{click:function(t){e.tree_Modal_show=!0}}},[e._v(e._s(e.bumenname||"请选择"))])],1):e._e(),i("FormItem",{attrs:{label:"菜单名称",required:""}},[i("Input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.add_info.title,callback:function(t){e.$set(e.add_info,"title",t)},expression:"add_info.title"}})],1),"F"!=e.add_info.menuType?i("FormItem",{attrs:{label:"菜单路径",required:""}},[i("Input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.add_info.path,callback:function(t){e.$set(e.add_info,"path",t)},expression:"add_info.path"}})],1):e._e(),i("FormItem",{attrs:{label:"显示排序",required:""}},[i("InputNumber",{staticStyle:{width:"100%"},attrs:{max:99999,min:0,placeholder:"请输入",clearable:""},model:{value:e.add_info.orderNum,callback:function(t){e.$set(e.add_info,"orderNum",t)},expression:"add_info.orderNum"}})],1),"M"==e.add_info.menuType?i("FormItem",{attrs:{label:"图标",required:""}},[i("Input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.add_info.icon,callback:function(t){e.$set(e.add_info,"icon",t)},expression:"add_info.icon"}})],1):e._e(),"C"==e.add_info.menuType?i("FormItem",{attrs:{label:"请求地址",required:""}},[i("Input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.add_info.url,callback:function(t){e.$set(e.add_info,"url",t)},expression:"add_info.url"}})],1):e._e(),"M"!=e.add_info.menuType?i("FormItem",{attrs:{label:"权限标识"}},[i("Input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.add_info.perms,callback:function(t){e.$set(e.add_info,"perms",t)},expression:"add_info.perms"}})],1):e._e(),i("FormItem",{attrs:{label:"菜单状态",required:""}},[i("Select",{model:{value:e.add_info.visible,callback:function(t){e.$set(e.add_info,"visible",t)},expression:"add_info.visible"}},[i("Option",{attrs:{value:"1"}},[e._v("显示")]),i("Option",{attrs:{value:"0"}},[e._v("隐藏")])],1)],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text"},on:{click:function(t){e.add_Modal_show=!1}}},[e._v("取消")]),i("Button",{attrs:{type:"primary",loading:e.add_loading},on:{click:function(t){e.addOk("add_info")}}},[e._v("保存")])],1)],1),i("Modal",{attrs:{width:"700",title:"菜单管理编辑","mask-closable":!1},model:{value:e.edit_Modal_show,callback:function(t){e.edit_Modal_show=t},expression:"edit_Modal_show"}},[i("Form",{ref:"edit_info",attrs:{model:e.edit_info,"label-width":80}},[i("FormItem",{attrs:{label:"菜单类型",required:""}},[i("RadioGroup",{model:{value:e.edit_info.menuType,callback:function(t){e.$set(e.edit_info,"menuType",t)},expression:"edit_info.menuType"}},[i("Radio",{attrs:{label:"M"}},[e._v("目录")]),i("Radio",{attrs:{label:"C"}},[e._v("菜单")]),i("Radio",{attrs:{label:"F"}},[e._v("按钮")])],1)],1),"C"==e.edit_info.menuType?i("FormItem",{attrs:{label:"上级菜单",required:""}},[i("Button",{staticStyle:{width:"252px"},on:{click:function(t){e.tree_Modal_show=!0}}},[e._v(e._s(e.bumenname||"请选择"))])],1):e._e(),i("FormItem",{attrs:{label:"菜单名称",required:""}},[i("Input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.edit_info.title,callback:function(t){e.$set(e.edit_info,"title",t)},expression:"edit_info.title"}})],1),"F"!=e.edit_info.menuType?i("FormItem",{attrs:{label:"菜单路径",required:""}},[i("Input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.edit_info.path,callback:function(t){e.$set(e.edit_info,"path",t)},expression:"edit_info.path"}})],1):e._e(),i("FormItem",{attrs:{label:"显示排序",required:""}},[i("InputNumber",{staticStyle:{width:"100%"},attrs:{max:99999,min:0,placeholder:"请输入",clearable:""},model:{value:e.edit_info.orderNum,callback:function(t){e.$set(e.edit_info,"orderNum",t)},expression:"edit_info.orderNum"}})],1),"M"==e.edit_info.menuType?i("FormItem",{attrs:{label:"图标",required:""}},[i("Input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.edit_info.icon,callback:function(t){e.$set(e.edit_info,"icon",t)},expression:"edit_info.icon"}})],1):e._e(),"C"==e.edit_info.menuType?i("FormItem",{attrs:{label:"请求地址",required:""}},[i("Input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.edit_info.url,callback:function(t){e.$set(e.edit_info,"url",t)},expression:"edit_info.url"}})],1):e._e(),"M"!=e.edit_info.menuType?i("FormItem",{attrs:{label:"权限标识"}},[i("Input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.edit_info.perms,callback:function(t){e.$set(e.edit_info,"perms",t)},expression:"edit_info.perms"}})],1):e._e(),i("FormItem",{attrs:{label:"菜单状态",required:""}},[i("Select",{model:{value:e.edit_info.visible,callback:function(t){e.$set(e.edit_info,"visible",t)},expression:"edit_info.visible"}},[i("Option",{attrs:{value:"1"}},[e._v("显示")]),i("Option",{attrs:{value:"0"}},[e._v("隐藏")])],1)],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text"},on:{click:function(t){e.edit_Modal_show=!1}}},[e._v("取消")]),i("Button",{attrs:{type:"primary",loading:e.edit_loading},on:{click:function(t){e.editOk("edit_info")}}},[e._v("保存")])],1)],1),i("Modal",{attrs:{width:"400",title:"选择菜单"},on:{"on-ok":e.treeOk},model:{value:e.tree_Modal_show,callback:function(t){e.tree_Modal_show=t},expression:"tree_Modal_show"}},[i("Tree",{ref:"tree4",attrs:{data:e.data2},on:{"on-select-change":e.choiceAll}})],1),i("Modal",{attrs:{width:"400",closable:!1,title:"是否重新登录"},model:{value:e.logOut_Modal_show,callback:function(t){e.logOut_Modal_show=t},expression:"logOut_Modal_show"}},[i("p",{staticStyle:{color:"red"}},[e._v("菜单变更需要重新登录即可生效")]),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"error",size:"large"},on:{click:e.logOutOk}},[e._v("确定")])],1)])],1)},a=[],n=i("7f80"),s={name:"menu-manage",components:{},data:function(){return{fold:!0,drop:!1,dropDownContent:"展开",dropDownIcon:"ios-arrow-down",searchItem:{menuName:"",visible:""},TableLoading:!1,table_list:[],tableColumns:[{key:"title",minWidth:250,title:"菜单名称"},{key:"path",minWidth:200,title:"菜单路径"},{key:"orderNum",title:"排序"},{key:"url",title:"请求地址",minWidth:250},{key:"visible",title:"类型",type:"template",template:"visible"},{title:"类型",key:"menuType",width:80,type:"template",template:"menuType"},{key:"perms",title:"权限标识"},{title:"操作",key:"likes",align:"center",minWidth:"200px",type:"template",template:"likes"}],add_Modal_show:!1,add_loading:!1,add_info:{},edit_Modal_show:!1,edit_info:{},edit_loading:!1,tree_Modal_show:!1,data2:[],parentId:"",bumenname:"",menuId:"",ruleValidate:{},logOut_Modal_show:!1,searchType:""}},created:function(){},methods:{init:function(){this.searchType=1,this.updateTableList({}),this.refreshDept()},dropDown:function(){this.drop?(this.dropDownContent="展开",this.dropDownIcon="ios-arrow-down"):(this.dropDownContent="收起",this.dropDownIcon="ios-arrow-up"),this.drop=!this.drop},refresh:function(){this.searchItem.menuName="",this.searchItem.visible="",this.updateTableList({})},queryTableList:function(){this.searchType=2,this.updateTableList(this.searchItem)},update:function(){""==this.searchItem.menuName||" "==this.searchItem.menuName?this.updateTableList({}):this.updateTableList(this.searchItem)},changeCurrent:function(e){this.pageNum=e,1==this.searchType?this.updateTableList({}):this.updateTableList(this.searchItem)},updateTableList:function(e){var t=this;this.TableLoading=!0,Object(n["f"])("/system/sys-menu/rightTree",e).then(function(e){t.TableLoading=!1,e.isSuccess?t.table_list=e.data:t.$Message.error(e.msg)})},addInfo:function(){this.add_info={},this.add_info.orderNum=null,this.add_Modal_show=!0,this.parentId=null,this.bumenname=null,this.menuId=null},addOk:function(e){var t=this;if(void 0!=this.add_info.menuType&&""!=this.add_info.menuType)if(void 0!=this.add_info.title&&""!=this.add_info.title){if("F"==this.add_info.menuType)this.add_info.path="#";else if(void 0==this.add_info.path||""==this.add_info.path)return void this.$Message.error("菜单路径还没有填写!");if(void 0!=this.add_info.orderNum&&""!=this.add_info.orderNum)if("M"!=this.add_info.menuType||(this.add_info.url="Main",void 0!=this.add_info.icon&&""!=this.add_info.icon))if(void 0!=this.add_info.visible&&""!=this.add_info.visible){if("C"==this.add_info.menuType){if(void 0==this.bumenname||""==this.bumenname)return void this.$Message.error("请选择上级菜单!");if(void 0==this.add_info.url||""==this.add_info.url)return void this.$Message.error("请求地址还没有填写!")}this.add_loading=!0;var i={path:this.add_info.path,parentId:this.menuId,title:this.add_info.title,orderNum:this.add_info.orderNum,url:this.add_info.url,menuType:this.add_info.menuType,visible:this.add_info.visible,perms:this.add_info.perms,icon:this.add_info.icon,remark:this.add_info.remark,menuName:this.add_info.title};Object(n["f"])("/system/sys-menu/add",i).then(function(e){t.add_loading=!1,200==e.code?(t.$Message.info("新增成功！"),setTimeout(function(){t.add_Modal_show=!1,t.logOut_Modal_show=!0},1200)):t.$Message.error(e.msg)})}else this.$Message.error("菜单状态还没有填写!");else this.$Message.error("图标还没有填写!");else this.$Message.error("显示排序还没有填写!")}else this.$Message.error("菜单名称还没有填写!");else this.$Message.error("菜单类型还没有填写!")},editInfo:function(e){this.edit_Modal_show=!0,this.edit_info=e,this.parentId=e.parentId,this.bumenname=e.parentName,this.menuId=e.menuId},edit_add:function(e){this.add_Modal_show=!0,this.add_info.orderNum=null,this.parentId=e.parentId,this.bumenname=e.parentName,this.menuId=e.menuId},editOk:function(e){var t=this;if(void 0!=this.edit_info.menuType&&""!=this.edit_info.menuType)if(void 0!=this.edit_info.title&&""!=this.edit_info.title)if(void 0!=this.edit_info.orderNum&&""!=this.edit_info.orderNum)if(void 0!=this.edit_info.visible&&""!=this.edit_info.visible)if("M"!=this.edit_info.menuType||(this.edit_info.url="Main",void 0!=this.edit_info.icon&&""!=this.edit_info.icon))if("C"!=this.edit_info.menuType||void 0!=this.edit_info.url&&""!=this.edit_info.url){if("F"==this.edit_info.menuType)this.edit_info.path="#";else if(void 0==this.edit_info.path||""==this.edit_info.path)return void this.$Message.error("菜单路径还没有填写!");this.edit_loading=!0;var i={menuId:this.edit_info.menuId,path:this.edit_info.path,title:this.edit_info.title,icon:this.edit_info.icon,remark:this.edit_info.remark,parentId:this.edit_info.parentId,orderNum:this.edit_info.orderNum,url:this.edit_info.url,menuType:this.edit_info.menuType,visible:this.edit_info.visible,perms:this.edit_info.perms,createBy:this.edit_info.createBy,createTime:this.edit_info.createTime,menuName:this.edit_info.title};Object(n["f"])("/system/sys-menu/edit",i).then(function(e){t.edit_loading=!1,200==e.code?(t.$Message.info("编辑成功！"),setTimeout(function(){t.edit_Modal_show=!1,t.logOut_Modal_show=!0},1200)):t.$Message.error(e.msg)})}else this.$Message.error("请求地址还没有填写!");else this.$Message.error("图标还没有填写!");else this.$Message.error("菜单状态还没有填写!");else this.$Message.error("显示排序还没有填写!");else this.$Message.error("菜单名称还没有填写!");else this.$Message.error("菜单类型还没有填写!")},refreshDept:function(){var e=this,t={};Object(n["f"])("/system/sys-menu/rightTree",t).then(function(t){"200"==t.code?e.data2=t.data:e.$Message.error(t.msg)})},choiceAll:function(e){this.menuId=e[0].menuId,this.parentId=e[0].menuId,this.bumenname=e[0].title},treeOk:function(){void 0!=this.menuId?this.tree_Modal_show=!1:this.$Message.error("请选择菜单名称")},removeInfo:function(e){var t=this;this.$Modal.confirm({title:"删除确认",content:"删除后不可恢复，是否继续删除？",onOk:function(){t.$Loading.start(),Object(n["f"])("/system/sys-menu/delete?menuId="+e.menuId).then(function(e){t.loading=!1,"200"==e.code?(t.$Message.info("删除成功！"),setTimeout(function(){t.logOut_Modal_show=!0},1200)):t.$Message.error(e.msg)})},onCancel:function(){t.$Message.info("点击了取消")}})},logOutOk:function(){this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),location.reload()}},mounted:function(){this.init()}},d=s,r=(i("47eb"),i("2877")),l=Object(r["a"])(d,o,a,!1,null,"e89727ec",null);l.options.__file="menuManage.vue";t["default"]=l.exports},"47eb":function(e,t,i){"use strict";var o=i("8725"),a=i.n(o);a.a},8725:function(e,t,i){}}]);