(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6fc0f697","chunk-2d0cf4a3","chunk-2d0cf4a3"],{2268:function(e,t,i){"use strict";var o=i("f979"),n=i.n(o);n.a},"62a2":function(e,t,i){"use strict";i.d(t,"c",function(){return n}),i.d(t,"b",function(){return r}),i.d(t,"a",function(){return a}),i.d(t,"d",function(){return s});var o=i("2864");function n(e,t){var i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),S:e.getMilliseconds()};for(var o in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?i[o]:("00"+i[o]).substr((""+i[o]).length)));return t}function r(e,t,i,n){return new Promise(function(n,r){"image/png"!=e.type&&"image/jpeg"!=e.type&&"image/jpg"!=e.type&&"image/bmp"!=e.type&&(o["Message"].error("图片格式只能选择png/jpeg/jpg/bmp"),r());var a=new FileReader;a.onload=function(e){var a=e.target.result,s=new Image;s.onload=function(){t&&this.width!=t?(o["Message"].error("请上传宽为"+t+"的图片"),r()):i&&this.height!=i?(o["Message"].error("请上传高为"+i+"的图片"),r()):n()},s.onerror=r,s.src=a},a.readAsDataURL(e)})}function a(e,t){return new Promise(function(t,i){"image/png"!=e.type&&"image/jpeg"!=e.type&&"image/jpg"!=e.type&&"image/bmp"!=e.type&&(o["Message"].error("图片格式只能选择png/jpeg/jpg/bmp"),i());var n=new FileReader;n.onload=function(e){var o=e.target.result,n=new Image;t(),n.onerror=i,n.src=o},n.readAsDataURL(e)})}function s(e,t){for(var i=[e[0]],o=1;o<e.length;o++){for(var n=e[o],r=!1,a=0;a<i.length;a++)if(n[t]==i[a][t]){r=!0;break}r||i.push(n)}return i}},"8dd3":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"search"},[i("Card",[i("p",{attrs:{slot:"title"},slot:"title"},[e._v("要优惠----拼团设置")]),i("a",{attrs:{slot:"extra",href:"#"},slot:"extra"},[i("Button",{attrs:{type:"dashed",icon:"md-arrow-round-back"},on:{click:function(t){return e.goback()}}},[e._v("返回")])],1),i("p",[i("Alert",{attrs:{"show-icon":""}},[e._v("\n        活动ID:\n        "),i("span",{staticStyle:{color:"red"}},[e._v(e._s(e.edit_info.campId))]),i("span",{attrs:{slot:"desc"},slot:"desc"})]),i("Card",[i("Form",{attrs:{"label-width":240}},[i("FormItem",{attrs:{label:"每人每天开团次数",required:""}},[i("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"只能输入整数",placement:"right"}},[i("InputNumber",{staticStyle:{width:"300px"},attrs:{min:0,placeholder:"请输入"},on:{"on-change":e.statusCheckChange},model:{value:e.edit_info.dailyOpenTimes,callback:function(t){e.$set(e.edit_info,"dailyOpenTimes",t)},expression:"edit_info.dailyOpenTimes"}})],1),i("span",{staticStyle:{color:"red"}},[e._v("   次")])],1),i("FormItem",{attrs:{label:"成团人数",required:""}},[i("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"只能输入整数",placement:"right"}},[i("InputNumber",{staticStyle:{width:"300px"},attrs:{min:0,placeholder:"请输入",disabled:""},on:{"on-change":e.statusCheckChange},model:{value:e.edit_info.groupCount,callback:function(t){e.$set(e.edit_info,"groupCount",t)},expression:"edit_info.groupCount"}}),i("span",{staticStyle:{color:"red"}},[e._v("   人")])],1)],1),i("FormItem",{attrs:{label:"拼团限时(分钟)",required:""}},[i("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"单位为(分钟),范围为(0~60)  (只能输入整数)",placement:"right"}},[i("InputNumber",{staticStyle:{width:"300px"},attrs:{min:1,max:60,placeholder:"请输入"},on:{"on-change":e.statusCheckChange},model:{value:e.edit_info.limitTime,callback:function(t){e.$set(e.edit_info,"limitTime",t)},expression:"edit_info.limitTime"}}),i("span",{staticStyle:{color:"red"}},[e._v("   分钟")])],1)],1),i("FormItem",{attrs:{label:"每人每天参团限制次数",required:""}},[i("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"只能输入整数",placement:"right"}},[i("InputNumber",{staticStyle:{width:"300px"},attrs:{min:0,placeholder:"请输入 "},on:{"on-change":e.statusCheckChange},model:{value:e.edit_info.dailyJoinGroupTimes,callback:function(t){e.$set(e.edit_info,"dailyJoinGroupTimes",t)},expression:"edit_info.dailyJoinGroupTimes"}}),i("span",{staticStyle:{color:"red"}},[e._v("  次")])],1)],1),i("FormItem",{attrs:{label:"每人每天接受分享奖励限制次数",required:""}},[i("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"只能输入整数",placement:"right"}},[i("InputNumber",{staticStyle:{width:"300px"},attrs:{min:0,placeholder:"请输入"},on:{"on-change":e.statusCheckChange},model:{value:e.edit_info.dailyAcceptShareTimes,callback:function(t){e.$set(e.edit_info,"dailyAcceptShareTimes",t)},expression:"edit_info.dailyAcceptShareTimes"}})],1),i("span",{staticStyle:{color:"red"}},[e._v("  次")])],1),i("FormItem",{attrs:{label:"助力得全场满减现金券面额下限百分比",required:""}},[i("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"范围为(0~100)  (只能输入整数)",placement:"right"}},[i("InputNumber",{staticStyle:{width:"300px"},attrs:{max:100,min:0,placeholder:"请输入"},on:{"on-change":e.statusCheckChange},model:{value:e.edit_info.helpAwardLower,callback:function(t){e.$set(e.edit_info,"helpAwardLower",t)},expression:"edit_info.helpAwardLower"}}),i("span",{staticStyle:{color:"red"}},[e._v("   %")])],1)],1),i("FormItem",{attrs:{label:"助力得全场满减现金券面额上限百分比",required:""}},[i("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"范围为(0~100)  (只能输入整数)",placement:"right"}},[i("InputNumber",{staticStyle:{width:"300px"},attrs:{max:100,min:0,placeholder:"请输入"},on:{"on-change":e.statusCheckChange},model:{value:e.edit_info.helpAwardUpper,callback:function(t){e.$set(e.edit_info,"helpAwardUpper",t)},expression:"edit_info.helpAwardUpper"}}),i("span",{staticStyle:{color:"red"}},[e._v("   %")])],1)],1),i("FormItem",{attrs:{label:"接受分享领用现金券金额比例",required:""}},[i("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"范围为(0~100)  (只能输入整数)",placement:"right"}},[i("InputNumber",{staticStyle:{width:"300px"},attrs:{max:100,min:0,placeholder:"请输入"},on:{"on-change":e.statusCheckChange},model:{value:e.edit_info.acceptPercent,callback:function(t){e.$set(e.edit_info,"acceptPercent",t)},expression:"edit_info.acceptPercent"}}),i("span",{staticStyle:{color:"red"}},[e._v("   %")])],1)],1)],1)],1),i("Card",[i("Alert",[i("h4",[e._v("要优惠算法参数")])]),i("Form",{attrs:{"label-width":240,inline:""}},[i("FormItem",{attrs:{label:"前",required:""}},[i("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"只能输入整数",placement:"right"}},[i("InputNumber",{staticStyle:{width:"100px"},attrs:{min:0,placeholder:"请输入"},on:{"on-change":e.statusCheckChange},model:{value:e.edit_info.receiveCount,callback:function(t){e.$set(e.edit_info,"receiveCount",t)},expression:"edit_info.receiveCount"}}),i("span",{staticStyle:{color:"red"}},[e._v("  次")])],1)],1),i("FormItem",{attrs:{label:"折扣比例百分比",required:""}},[i("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"范围在(0~100)  (只能输入整数)",placement:"right"}},[i("InputNumber",{staticStyle:{width:"300px"},attrs:{max:100,min:0,placeholder:"请输入"},on:{"on-change":e.statusCheckChange},model:{value:e.edit_info.discountRatio,callback:function(t){e.$set(e.edit_info,"discountRatio",t)},expression:"edit_info.discountRatio"}}),i("span",{staticStyle:{color:"red"}},[e._v("   %")])],1)],1),i("FormItem",{attrs:{label:"后续获得折扣比例百分比",required:""}},[i("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"范围在(0~100)  (只能输入整数)",placement:"right"}},[i("InputNumber",{staticStyle:{width:"300px"},attrs:{max:100,min:0,placeholder:"请输入"},on:{"on-change":e.statusCheckChange},model:{value:e.edit_info.laterDiscountRatio,callback:function(t){e.$set(e.edit_info,"laterDiscountRatio",t)},expression:"edit_info.laterDiscountRatio"}}),i("span",{staticStyle:{color:"red"}},[e._v("   %")])],1)],1),i("FormItem",{attrs:{label:"随机因子",required:""}},[i("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"范围在1±random_seed之间（0.1~0.5）",placement:"right"}},[i("InputNumber",{staticStyle:{width:"300px"},attrs:{max:.5,min:.1,placeholder:"请输入"},on:{"on-change":e.statusCheckChange},model:{value:e.edit_info.randomSeed,callback:function(t){e.$set(e.edit_info,"randomSeed",t)},expression:"edit_info.randomSeed"}})],1)],1),i("FormItem",{attrs:{label:"最低优惠额",required:""}},[i("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"单位元",placement:"right"}},[i("InputNumber",{staticStyle:{width:"300px"},attrs:{min:0,placeholder:"请输入"},on:{"on-change":e.statusCheckChange},model:{value:e.edit_info.lowerDiscountAmount,callback:function(t){e.$set(e.edit_info,"lowerDiscountAmount",t)},expression:"edit_info.lowerDiscountAmount"}}),i("span",{staticStyle:{color:"red"}},[e._v("   元")])],1)],1),i("FormItem",{attrs:{label:"最高优惠额",required:""}},[i("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"单位元",placement:"right"}},[i("InputNumber",{staticStyle:{width:"300px"},attrs:{min:0,placeholder:"请输入"},on:{"on-change":e.statusCheckChange},model:{value:e.edit_info.upperDiscountAmount,callback:function(t){e.$set(e.edit_info,"upperDiscountAmount",t)},expression:"edit_info.upperDiscountAmount"}}),i("span",{staticStyle:{color:"red"}},[e._v("   元")])],1)],1),i("FormItem",{attrs:{label:"团长优惠金额放大倍数",required:""}},[i("InputNumber",{staticStyle:{width:"300px"},attrs:{min:0,placeholder:"请输入"},on:{"on-change":e.statusCheckChange},model:{value:e.edit_info.addMultiple,callback:function(t){e.$set(e.edit_info,"addMultiple",t)},expression:"edit_info.addMultiple"}})],1),i("FormItem",{attrs:{"label-width":220}},[i("Button",{staticStyle:{width:"220px","margin-right":"30px"},attrs:{type:"primary",loading:e.edit_loading,disabled:e.isCheckDisabled},on:{click:function(t){return e.editOk()}}},[e._v("保存")]),i("Button",{staticStyle:{width:"220px","margin-right":"30px"},attrs:{type:"dashed",icon:"md-arrow-round-back"},on:{click:function(t){return e.goback()}}},[e._v("返回")])],1)],1)],1)],1)])],1)},n=[],r=i("7f80"),a=(i("62a2"),{name:"grabInfoSet",components:{},props:{campId:String},data:function(){return{edit_info:{campId:"",addMultiple:0,dailyAcceptShareTimes:0,dailyJoinGroupTimes:0,dailyOpenTimes:0,discountRatio:0,groupCount:3,helpAwardLower:0,helpAwardUpper:0,limitTime:0,lowerDiscountAmount:0,randomSeed:.1,upperDiscountAmount:0,acceptPercent:0,receiveCount:0,laterDiscountRatio:0},edit_loading:!1,status:"",getUrl:"",msg:"",isCheckDisabled:!0}},created:function(){this.init()},methods:{init:function(){this.updateTableList()},updateTableList:function(){var e=this,t={campId:this.campId};Object(r["g"])("/campaginGrabInfoSet/selectCampaginGrabInfoByCampId?campId="+this.campId,t).then(function(t){200==t.code?t.data.length>0?(e.edit_info=t.data[0],e.edit_info.acceptPercent=100*e.edit_info.acceptPercent,e.edit_info.helpAwardLower=100*e.edit_info.helpAwardLower,e.edit_info.helpAwardUpper=100*e.edit_info.helpAwardUpper,e.edit_info.discountRatio=parseInt(100*e.edit_info.discountRatio),e.edit_info.laterDiscountRatio=100*e.edit_info.laterDiscountRatio,e.edit_info.limitTime=e.edit_info.limitTime/60,e.status="edit"):(e.edit_info={campId:e.campId,addMultiple:0,dailyAcceptShareTimes:0,dailyJoinGroupTimes:0,dailyOpenTimes:0,discountRatio:0,groupCount:3,helpAwardLower:0,helpAwardUpper:0,limitTime:0,lowerDiscountAmount:0,randomSeed:.1,upperDiscountAmount:0,acceptPercent:0,receiveCount:0,laterDiscountRatio:0},e.status="add"):e.$Message.error(t.msg)})},statusCheckChange:function(){this.isCheckDisabled=!1},editOk:function(){var e=this;if(this.edit_info.dailyOpenTimes||0==this.edit_info.dailyOpenTimes)if(this.edit_info.acceptPercent||0==this.edit_info.acceptPercent)if(this.edit_info.acceptPercent>100)this.$Message.error("受邀人助力者用券后给分享者返佣比例范围为（0～100）");else if(this.edit_info.addMultiple||0==this.edit_info.addMultiple)if(this.edit_info.dailyAcceptShareTimes||0==this.edit_info.dailyAcceptShareTimes)if(this.edit_info.discountRatio||0==this.edit_info.discountRatio)if(this.edit_info.discountRatio>100)this.$Message.error("折扣比例范围为（0～100）");else if(this.edit_info.laterDiscountRatio||0==this.edit_info.laterDiscountRatio)if(this.edit_info.laterDiscountRatio>100)this.$Message.error("后续折扣比例范围为（0～100）");else if(this.edit_info.receiveCount||0==this.edit_info.receiveCount)if(this.edit_info.limitTime||0==this.edit_info.limitTime)if(this.edit_info.helpAwardLower||0==this.edit_info.helpAwardLower)if(this.edit_info.helpAwardLower>100)this.$Message.error("助力得全场满减现金券面额下限百分比范围为（0～100）");else if(this.edit_info.helpAwardUpper||0==this.edit_info.helpAwardUpper)if(this.edit_info.helpAwardUpper>100)this.$Message.error("助力得全场满减现金券面额上限百分比范围为（0～100）");else if(this.edit_info.helpAwardLower>this.edit_info.helpAwardUpper)this.$Message.error("'助力得全场满减现金券面额下限百分比'不能大于'助力得全场满减现金券面额下限百分比'");else if(this.edit_info.lowerDiscountAmount||0==this.edit_info.lowerDiscountAmount)if(this.edit_info.upperDiscountAmount||0==this.edit_info.upperDiscountAmount)if(this.edit_info.lowerDiscountAmount>this.edit_info.upperDiscountAmount)this.$Message.error("'最低优惠额'不能大于'最高优惠额'");else if(this.edit_info.randomSeed){if("add"==this.status?(this.getUrl="/campaginGrabInfoSet/add",this.msg="新增成功"):(this.getUrl="/campaginGrabInfoSet/edit",this.msg="编辑成功"),this.ruleValidate()){this.edit_loading=!0;var t={campId:this.edit_info.campId,addMultiple:this.edit_info.addMultiple,dailyAcceptShareTimes:this.edit_info.dailyAcceptShareTimes,dailyJoinGroupTimes:this.edit_info.dailyJoinGroupTimes,dailyOpenTimes:this.edit_info.dailyOpenTimes,discountRatio:this.edit_info.discountRatio/100,groupCount:this.edit_info.groupCount,helpAwardLower:this.edit_info.helpAwardLower/100,helpAwardUpper:this.edit_info.helpAwardUpper/100,limitTime:60*this.edit_info.limitTime,lowerDiscountAmount:this.edit_info.lowerDiscountAmount,randomSeed:this.edit_info.randomSeed,upperDiscountAmount:this.edit_info.upperDiscountAmount,acceptPercent:this.edit_info.acceptPercent/100,receiveCount:this.edit_info.receiveCount,laterDiscountRatio:this.edit_info.laterDiscountRatio/100};Object(r["g"])(this.getUrl,t).then(function(t){e.edit_loading=!1,200==t.code?(e.$Message.info(e.msg),e.isCheckDisabled=!0,setTimeout(function(){e.goback()},1200)):e.$Message.error(t.msg)})}}else this.$Message.error("随机因子不能为空");else this.$Message.error("最高优惠额不能为空");else this.$Message.error("最低优惠额不能为空");else this.$Message.error("助力得全场满减现金券面额上限百分比不能为空");else this.$Message.error("助力得全场满减现金券面额下限百分比不能为空");else this.$Message.error("拼团限时不能为空");else this.$Message.error("领取次数不能为空");else this.$Message.error("后续折扣比例不能为空");else this.$Message.error("折扣比例不能为空");else this.$Message.error("每人每天接受分享奖励限制次数不能为空");else this.$Message.error("团长优惠金额放大倍数不能为空");else this.$Message.error("受邀人助力者用券后给分享者返佣比例不能为空");else this.$Message.error("每人每天开团次数不能为空")},removeInfo:function(){var e=this;this.$Modal.confirm({title:"删除确认",content:"删除后不可恢复，是否继续删除？",onOk:function(){var t={campId:e.edit_info.campId};Object(r["g"])("/campaginGrabInfoSet/delete?campId="+e.edit_info.campId,t).then(function(t){e.loading=!1,"200"==t.code?(e.$Message.info("删除成功！"),setTimeout(function(){e.goback()},1200)):e.$Message.error(t.msg)})},onCancel:function(){e.$Message.info("点击了取消")}})},goback:function(){this.$emit("changeStatus",!1)},ruleValidate:function(){for(var e=[this.edit_info.dailyOpenTimes.toString(),this.edit_info.groupCount.toString(),this.edit_info.limitTime.toString(),this.edit_info.dailyJoinGroupTimes.toString(),this.edit_info.dailyAcceptShareTimes.toString(),this.edit_info.helpAwardLower.toString(),this.edit_info.helpAwardUpper.toString(),this.edit_info.discountRatio.toString()],t=0;t<e.length;t++)if(-1!=e[t].indexOf("."))return this.$Message.error("只能输入整数"),!1;return!0}},mounted:function(){}}),s=a,l=(i("2268"),i("6691")),c=Object(l["a"])(s,o,n,!1,null,null,null);t["default"]=c.exports},f979:function(e,t,i){}}]);