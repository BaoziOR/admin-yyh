(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c7a213ac","chunk-9c5f9712"],{1248:function(t,e,a){},"2d4b":function(t,e,a){"use strict";var i=a("4c3b"),s=a.n(i);s.a},"46f3":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"100%"}},[t.AddViewDialogVisible||t.ShowViewDialogVisible?t._e():a("div",{staticStyle:{height:"100%"}},[a("Card",{staticStyle:{height:"100%"}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("核销返奖励（商家）")]),a("a",{attrs:{slot:"extra",href:"#"},slot:"extra"},[a("Button",{attrs:{type:"dashed",icon:"md-arrow-round-back"},on:{click:function(e){return t.close()}}},[t._v("返回上一层")])],1),a("div",[a("Card",{staticStyle:{"margin-bottom":"2px"},attrs:{bordered:!1}},[a("Form",{ref:"searchForm",attrs:{"label-position":"right","label-width":80,model:t.searchForm,inline:""}},[a("FormItem",{staticStyle:{width:"25%"},attrs:{label:"活动名称",span:"24"}},[a("Input",{attrs:{placeholder:"活动名称",maxlength:20},model:{value:t.searchForm.name,callback:function(e){t.$set(t.searchForm,"name",e)},expression:"searchForm.name"}})],1),a("FormItem",{staticStyle:{width:"23%"},attrs:{label:"赠送方式",span:"24"}},[a("Select",{staticStyle:{width:"100%"},model:{value:t.searchForm.awardType,callback:function(e){t.$set(t.searchForm,"awardType",e)},expression:"searchForm.awardType"}},t._l(t.typeList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{staticStyle:{width:"23%"},attrs:{label:"状态",span:"24"}},[a("Select",{staticStyle:{width:"100%"},model:{value:t.searchForm.status,callback:function(e){t.$set(t.searchForm,"status",e)},expression:"searchForm.status"}},t._l(t.statusList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{staticStyle:{width:"23%"},attrs:{span:"24","label-width":1}},[a("Button",{staticClass:"submit",staticStyle:{"margin-right":"5px"},attrs:{type:"primary",icon:"ios-search"},on:{click:function(e){return t.search("searchForm")}}},[t._v("搜索")]),a("Button",{attrs:{icon:"md-refresh"},on:{click:t.reset}},[t._v("重置")])],1)],1)],1),a("Card",[a("Row",{staticClass:"operation"},[a("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.addStaff}},[t._v("新增")])],1),a("Row",[a("Table",{ref:"table",attrs:{loading:t.TableLoading,border:"",columns:t.tableColumns,data:t.listData,sortable:"custom"},on:{"on-selection-change":t.handleSelect},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.row;return[2!=i.status?a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"},on:{click:function(e){return t.edit(i)}}},[t._v("编辑")]):t._e(),a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"info",size:"small"},on:{click:function(e){return t.showDetail(i)}}},[t._v("查看")]),2!=i.status?a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"error",size:"small"},on:{click:function(e){return t.del(i)}}},[t._v("删除")]):t._e(),2==i.status?a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"error",size:"small"},on:{click:function(e){return t.stop(i)}}},[t._v("终止")]):t._e()]}},{key:"activeTime",fn:function(e){var i=e.row;return[a("div",[t._v(t._s(i.startTime+" - "+i.endTime))])]}},{key:"status",fn:function(e){var i=e.row;return[a("div",[t._v(t._s(t.statusList[i.status-1].label))])]}},{key:"awardType",fn:function(e){var i=e.row;return[a("div",[t._v(t._s(t.typeList[Number(i.awardType)-1].label))])]}}],null,!1,3720335883)})],1),a("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[a("Page",{staticStyle:{float:"right"},attrs:{total:t.totalSize,"show-total":"","show-elevator":"",current:t.current},on:{"on-change":t.changeCurrent,"update:current":function(e){t.current=e}}})],1)],1)],1)])],1),a("AddOrEdit",{ref:"AddOrEdit",attrs:{viewDialogVisible:t.AddViewDialogVisible},on:{setViewDialogVisible:t.closeTab,search:t.search}}),a("showDetail",{ref:"showDetail",attrs:{viewDialogVisible:t.ShowViewDialogVisible},on:{setViewDialogVisible:t.closeTab}})],1)},s=[],l=a("7f80"),n=a("915a"),o=a("8d04"),r={name:"WriteOffRewardB",components:{AddOrEdit:n["default"],showDetail:o["default"]},data:function(){return{typeList:[{value:1,label:"核销赠券"},{value:2,label:"核销赠U贝"}],statusList:[{value:1,label:"未开始"},{value:2,label:"进行中"},{value:3,label:"已结束"},{value:4,label:"已终止"}],TableLoading:!1,auditing:0,totalSize:0,current:1,listData:[],selectDataList:[],tableColumns:[{title:"操作",width:200,align:"center",slot:"action",fixed:"left"},{title:"活动名称",width:200,align:"center",key:"name"},{title:"赠送方式",width:150,align:"center",slot:"awardType"},{title:"活动时间",width:200,align:"center",slot:"activeTime"},{title:"状态",width:100,align:"center",slot:"status"},{title:"操作人",minWidth:100,align:"center",key:"createBy"},{title:"操作时间",minWidth:200,align:"center",key:"createTime"}],searchForm:{awardType:"",name:"",page:1,size:10,type:2,status:""},AddViewDialogVisible:!1,ShowViewDialogVisible:!1}},created:function(){},activated:function(){this.loadTableData()},methods:{search:function(){this.current=1,this.loadTableData(this.searchForm)},reset:function(){this.searchForm.name="",this.searchForm.page=1,this.searchForm.awardType="",this.searchForm.status=""},loadTableData:function(t){var e=this;this.totalSize=0,this.listData=[],this.TableLoading=!0,Object(l["g"])("/merchant/activity/award/activity/list?pageNum=".concat(this.current,"&pageSize=10"),this.searchForm).then(function(t){e.TableLoading=!1,"200"===t.code?(e.totalSize=t.data.total,e.listData=t.data.records):e.$Message.error("获取数据失败")})},addStaff:function(){var t=this;this.AddViewDialogVisible=!0,this.$emit("closeTab",!0),this.$nextTick(function(){t.$refs["AddOrEdit"].resetRow()})},edit:function(t){var e=this;this.AddViewDialogVisible=!0,this.$emit("closeTab",!0),this.$nextTick(function(){e.$refs["AddOrEdit"].resetRow(t)})},showDetail:function(t){var e=this;this.ShowViewDialogVisible=!0,this.$emit("closeTab",!0),this.$nextTick(function(){e.$refs["showDetail"].resetRow(t)})},del:function(t){var e=this;this.$Modal.confirm({title:"确认删除",content:"<p>您确定要删除该条活动吗？</p>",onOk:function(){Object(l["g"])("/merchant/activity/award/activity/status",{id:t.id,status:0,type:2}).then(function(t){e.TableLoading=!1,"200"===t.code?e.search():e.$Message.error(t.msg)})},onCancel:function(){}})},stop:function(t){var e=this;this.$Modal.confirm({title:"确认终止",content:"<p>您确定要终止该条活动吗？</p>",onOk:function(){Object(l["g"])("/merchant/activity/award/activity/status",{id:t.id,status:4,type:2}).then(function(t){e.TableLoading=!1,"200"===t.code?e.search():e.$Message.error(t.msg)})},onCancel:function(){}})},handleSelect:function(t,e){this.selectDataList=t},batchAudit:function(){},changeCurrent:function(t){this.searchForm.page!=t&&(this.searchForm.page=t,this.loadTableData(this.searchForm))},closeTab:function(t){this.AddViewDialogVisible=!1,this.ShowViewDialogVisible=!1,this.$emit("closeTab",!1)},close:function(){this.$emit("close",!1)}}},c=r,d=(a("9dd2"),a("6691")),u=Object(d["a"])(c,i,s,!1,null,"1b22394a",null);e["default"]=u.exports},"4c3b":function(t,e,a){},"8d04":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.viewDialogVisible?a("div",{staticClass:"modal",on:{click:function(t){t.stopPropagation()}}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("查看详情")]),a("a",{attrs:{slot:"extra",href:"#"},slot:"extra"},[a("Button",{attrs:{type:"dashed",icon:"md-arrow-round-back"},on:{click:function(e){return t.close()}}},[t._v("返回上一层")])],1),a("Form",{ref:"addOrEditModal",attrs:{model:t.modal,rules:t.ruleValidate,"label-width":100,"label-position":"left"}},[a("h3",[t._v("活动信息")]),a("Row",{staticClass:"padding-left-12"},[a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"活动名称"}},[t._v("\n                    "+t._s(t.modal.name)+"\n                ")])],1)],1),a("Row",{staticClass:"padding-left-12"},[a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"活动时间"}},[t._v("\n                    "+t._s(t.modal.startTime)+" -- "+t._s(t.modal.endTime)+"\n                ")])],1)],1),a("Row",{staticClass:"padding-left-12"},[a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"状态"}},[t._v("\n                    "+t._s(t.modal.status?t.statusList[t.modal.status-1].label:"")+"\n                ")])],1)],1),a("h3",[t._v("请选择参与活动券")]),a("Row",{staticClass:"padding-left-12"},[a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"参与活动券"}},[t.couponObj.length?a("Button",{attrs:{type:"dashed"}},t._l(t.couponObj,function(e){return a("span",[t._v(t._s(e.title+"  "))])}),0):t._e()],1)],1)],1),a("h3",[t._v("赠送规则")]),a("Row",{staticClass:"padding-left-12"},[a("Col",{attrs:{span:"24"}},[1==t.modal.awardType?a("div",[a("FormItem",{attrs:{label:"赠送规则"}},[a("span",[t._v("核销赠券")]),a("div",{staticStyle:{width:"2%",display:"inline-block"}}),a("span",{staticClass:"colof-a2"},[t._v("(在核销商户券码时，赠送优惠券至店员卡包，前提店员是要优惠C端用户)")]),a("div",{staticStyle:{width:"2%",display:"inline-block"}}),t._l(t.JawardRuleDtos,function(e,i){return a("div",{staticClass:"radio-item"},[a("div",[a("span",[t._v("每日核销范围在 ")]),a("InputNumber",{attrs:{min:1,step:1,type:"text",precision:0,disabled:"",placeholder:"请输入数值"},model:{value:e.verifyCountMin,callback:function(a){t.$set(e,"verifyCountMin",a)},expression:"item.verifyCountMin"}}),a("div",{staticStyle:{width:"2%",display:"inline-block"}}),a("InputNumber",{attrs:{min:1,step:1,type:"text",precision:0,disabled:"",placeholder:"请输入数值"},model:{value:e.verifyCountMax,callback:function(a){t.$set(e,"verifyCountMax",a)},expression:"item.verifyCountMax"}}),a("span",[t._v(" 张时，赠送以下优惠券")]),a("div",{staticStyle:{width:"2%",display:"inline-block"}}),a("span",{staticClass:"colof-a2"},[t._v("(后面文本框的数值不填写，表示无限大)")])],1),a("div",{staticStyle:{margin:"10px 0"}},[a("Button",{attrs:{type:"dashed"}},[t._v(t._s(e.title))])],1)])})],2)],1):t._e(),2==t.modal.awardType?a("div",[a("FormItem",{attrs:{label:"赠送规则"}},[a("span",[t._v("核销赠U贝")]),a("div",{staticStyle:{width:"2%",display:"inline-block"}}),a("span",{staticClass:"colof-a2"},[t._v("(在核销主商户券码时，赠送平台U贝，前提店员是要优惠C端用户)")]),a("div",{staticStyle:{width:"2%",display:"inline-block"}}),t._l(t.UawardRuleDtos,function(e,i){return a("div",{staticClass:"radio-item"},[a("span",[t._v("每日核销范围在 ")]),a("InputNumber",{attrs:{min:0,step:1,type:"text",precision:0,disabled:"",placeholder:"请输入数值"},model:{value:e.verifyCountMin,callback:function(a){t.$set(e,"verifyCountMin",a)},expression:"item.verifyCountMin"}}),a("div",{staticStyle:{width:"2%",display:"inline-block"}}),a("InputNumber",{attrs:{min:1,step:1,type:"text",precision:0,disabled:"",placeholder:"请输入数值"},model:{value:e.verifyCountMax,callback:function(a){t.$set(e,"verifyCountMax",a)},expression:"item.verifyCountMax"}}),a("span",[t._v(" 张时，赠送以下U贝")]),a("span",{staticClass:"colof-a2"},[t._v("(后面文本框的数值不填写，表示无限大)")]),a("div",{staticStyle:{margin:"10px 0"}},[a("InputNumber",{staticStyle:{width:"150px"},attrs:{min:0,step:1,type:"text",precision:0,disabled:"",placeholder:"请输入U贝数量"},model:{value:e.award,callback:function(a){t.$set(e,"award",a)},expression:"item.award"}}),t._v(" U贝\n                            ")],1)],1)})],2)],1):t._e()])],1),a("Row",{staticClass:"padding-left-12"},[a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"创建时间"}},[a("span",[t._v(t._s(t.modal.createTime))])])],1)],1),a("Row",{staticClass:"padding-left-12"},[a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"最后修改时间"}},[a("span",[t._v(t._s(t.modal.updateTime))])])],1)],1),a("Row",{staticClass:"padding-left-12"},[a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"最后修改人"}},[a("span",[t._v(t._s(t.modal.updateBy))])])],1)],1),a("FormItem",[a("Button",{staticStyle:{"margin-left":"8px",float:"right"},on:{click:t.close}},[t._v("关闭")])],1)],1)],1)],1):t._e()},s=[],l=a("7f80"),n={name:"show-detail-modal",props:{viewDialogVisible:{type:Boolean,default:!1}},data:function(){return{titleName:"",statusList:[{value:1,label:"未开始"},{value:2,label:"进行中"},{value:3,label:"已结束"},{value:4,label:"已终止"}],modal:{name:"",startTime:"",endTime:"",awardType:"",type:"1",id:"",static:"0",createTime:"",updateBy:"",updateTime:""},data:{},JawardRuleDtos:[{verifyCountMin:null,verifyCountMax:null,awardAmount:null,awardType:"1",couponType:"",awardName:""}],UawardRuleDtos:[{verifyCountMin:null,verifyCountMax:null,awardAmount:null,awardType:"2",couponType:"",awardName:""}],selectActiveVolumeObj:{},couponObj:[],ruleValidate:{requiredType:[{required:!0,message:"",trigger:"blur"}]}}},methods:{changeDateTime:function(t,e){switch(e){case 1:this.modal.applyDateRangeOpen=t;break;case 2:this.modal.applyDateRangeClose=t;break}},resetRow:function(t){var e=this;this.modal={},this.couponObj=[],t&&(this.data=t,this.modal.id=t.id,Object(l["c"])("/merchant/activity/award/activity/".concat(t.id)).then(function(t){if("200"===t.code){var a=t.data;e.modal.name=a.name,e.modal.startTime=a.startTime,e.modal.awardType=a.awardType.toString(),e.modal.endTime=a.endTime,e.modal.type="2",e.couponObj=a.coupons,e.modal.status=a.status,e.modal.createTime=a.createTime,e.modal.updateBy=a.updateBy,e.modal.updateTime=a.updateTime,"1"==a.awardType?(e.JawardRuleDtos=a.awardRuleVos,e.JawardRuleDtos.forEach(function(t,e){t.verifyCountMax||(t.verifyCountMax=null),t.verifyCountMin||(t.verifyCountMin=null)}),e.UawardRuleDtos=[{verifyCountMin:null,verifyCountMax:null,awardAmount:null,awardType:"1",couponType:"",awardName:""}]):"2"==a.awardType&&(e.UawardRuleDtos=a.awardRuleVos,e.UawardRuleDtos.forEach(function(t,e){t.verifyCountMax||(t.verifyCountMax=null),t.verifyCountMin||(t.verifyCountMin=null)}),e.JawardRuleDtos=[{verifyCountMin:null,verifyCountMax:null,awardAmount:null,awardType:"2",couponType:"",awardName:""}])}else e.$Message.error("获取数据失败")}))},ok:function(){console.log(this.modal)},close:function(){this.$emit("setViewDialogVisible",!1)}}},o=n,r=(a("2d4b"),a("6691")),c=Object(r["a"])(o,i,s,!1,null,"57169c0e",null);e["default"]=c.exports},"9dd2":function(t,e,a){"use strict";var i=a("1248"),s=a.n(i);s.a}}]);