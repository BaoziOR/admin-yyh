(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-003dc54a"],{"430e":function(e,t,a){},e856:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search"},[a("Row",[a("Col",[a("Card",[a("Row",[a("Form",{ref:"searchItem",staticClass:"search-form",attrs:{model:e.searchItem,inline:"","label-width":70}},[a("FormItem",{attrs:{label:"券码"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",clearable:"",placeholder:"请输入券码"},model:{value:e.searchItem.barcode,callback:function(t){e.$set(e.searchItem,"barcode",t)},expression:"searchItem.barcode"}})],1),a("FormItem",{attrs:{label:"手机号"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",clearable:"",placeholder:"请输手机号"},model:{value:e.searchItem.phoneNumber,callback:function(t){e.$set(e.searchItem,"phoneNumber",t)},expression:"searchItem.phoneNumber"}})],1),a("FormItem",{attrs:{label:"所属商户"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",clearable:"",placeholder:"请输入商户"},model:{value:e.searchItem.merchantNames,callback:function(t){e.$set(e.searchItem,"merchantNames",t)},expression:"searchItem.merchantNames"}})],1),e.drop?a("span",[a("FormItem",{attrs:{label:"领取时间"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.searchItem.receiveStartTime,callback:function(t){e.$set(e.searchItem,"receiveStartTime",t)},expression:"searchItem.receiveStartTime"}})],1),a("FormItem",{attrs:{label:"至"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.searchItem.receiveEndTime,callback:function(t){e.$set(e.searchItem,"receiveEndTime",t)},expression:"searchItem.receiveEndTime"}})],1)],1):e._e(),a("FormItem",{staticClass:"br",staticStyle:{"margin-left":"-35px"}},[a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.queryTableList}},[e._v("搜索")]),a("Button",{on:{click:e.refresh}},[e._v("重置")]),a("a",{staticClass:"drop-down",on:{click:e.dropDown}},[e._v("\n                "+e._s(e.dropDownContent)+"\n                "),a("Icon",{attrs:{type:e.dropDownIcon}})],1)],1)],1)],1)],1),a("Card",[a("Row",{staticClass:"operation"},[a("Button",{attrs:{icon:"md-refresh"},on:{click:e.queryCountsList}},[e._v("刷新")]),e._v("\n          历史验证"),a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.queryCount.histCount))]),e._v("单\n          今日验证"),a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.queryCount.todayCount))]),e._v("单\n          ")],1),a("Row",[a("Table",{ref:"table",attrs:{loading:e.TableLoading,border:"",columns:e.tableColumns,data:e.table_list,sortable:"custom"}})],1),a("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[a("Page",{staticStyle:{float:"right"},attrs:{total:e.totalSize,"show-total":"","show-elevator":"",current:e.current},on:{"on-change":e.changeCurrent,"update:current":function(t){e.current=t}}})],1)],1)],1)],1),a("Modal",{attrs:{width:"700",title:e.title,"mask-closable":!1},model:{value:e.edit_Modal_show,callback:function(t){e.edit_Modal_show=t},expression:"edit_Modal_show"}},[a("Form",{ref:"edit_info",attrs:{model:e.edit_info,"label-width":80,rules:e.ruleValidate}},[a("FormItem",{attrs:{label:"岗位名称",prop:"postName"}},[a("Input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.edit_info.postName,callback:function(t){e.$set(e.edit_info,"postName",t)},expression:"edit_info.postName"}})],1),a("FormItem",{attrs:{label:"岗位编码",prop:"postCode"}},[a("Input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.edit_info.postCode,callback:function(t){e.$set(e.edit_info,"postCode",t)},expression:"edit_info.postCode"}})],1),a("FormItem",{attrs:{label:"显示顺序",required:""}},[a("InputNumber",{staticStyle:{width:"100%"},attrs:{max:99999,min:0,placeholder:"请输入",clearable:""},model:{value:e.edit_info.postSort,callback:function(t){e.$set(e.edit_info,"postSort",t)},expression:"edit_info.postSort"}})],1),a("FormItem",{attrs:{label:"岗位状态",prop:"status"}},[a("Select",{model:{value:e.edit_info.status,callback:function(t){e.$set(e.edit_info,"status",t)},expression:"edit_info.status"}},[a("Option",{attrs:{value:"0"}},[e._v("正常")]),a("Option",{attrs:{value:"1"}},[e._v("停用")])],1)],1),a("FormItem",{attrs:{label:"备注"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入...",clearable:""},model:{value:e.edit_info.remark,callback:function(t){e.$set(e.edit_info,"remark",t)},expression:"edit_info.remark"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:function(t){e.edit_Modal_show=!1}}},[e._v("取消")]),a("Button",{attrs:{type:"primary",loading:e.edit_loading},on:{click:function(t){return e.editOk("edit_info")}}},[e._v("保存")])],1)],1)],1)},s=[],i=a("7f80"),r={name:"post-manage",components:{},data:function(){return{drop:!1,dropDownContent:"展开",dropDownIcon:"ios-arrow-down",queryCount:{histCount:0,todayCount:0},templateId:"",searchItem:{barcode:"",phoneNumber:"",merchantNames:"",receiveStartTime:"",receiveEndTime:""},current:1,totalSize:0,pageNum:1,limit:10,TableLoading:!1,table_list:[],self:this,tableColumns:[{title:"订单编号",key:"id",width:100,align:"center"},{title:"卡券标题",key:"title",width:150,align:"center",sortable:!0},{title:"所属商户",key:"merchantNames",width:150,align:"center",sortable:!0},{title:"券码",key:"barcode",width:150,align:"center",sortable:!0},{title:"领取人手机号",key:"phoneNumber",width:150,align:"center"},{title:"领取渠道",key:"receivedFrom",width:100,align:"center"},{title:"领取时间",key:"receiveTime",width:150,align:"center"},{title:"验证时间",key:"useTime",width:150,align:"center"},{title:"验证人",key:"realName",width:150,align:"center"},{title:"验证人手机号",key:"mobile",width:150,align:"center"}],edit_Modal_show:!1,edit_info:{postId:"",postName:"",postCode:"",status:"",remark:"",postSort:null},edit_loading:!1,ruleValidate:{postName:[{required:!0,message:"岗位名称不能为空",trigger:"blur"}],postCode:[{required:!0,message:"岗位编码不能为空",trigger:"blur"}],postSort:[{required:!0,message:"显示顺序不能为空",trigger:"blur"}],status:[{required:!0,message:"请选择岗位状态",trigger:"change"}]},requestUrl:"",msg:"",title:""}},created:function(){},methods:{init:function(){this.updateTableList(),this.queryCountsList()},dropDown:function(){this.drop?(this.dropDownContent="展开",this.dropDownIcon="ios-arrow-down"):(this.dropDownContent="收起",this.dropDownIcon="ios-arrow-up"),this.drop=!this.drop},refresh:function(){this.searchItem.barcode="",this.searchItem.phoneNumber="",this.searchItem.merchantNames="",this.searchItem.receiveStartTime="",this.searchItem.receiveEndTime="",this.updateTableList()},queryCountsList:function(){var e=this,t={};Object(i["c"])("/merchantCoupon/useInfo/selectUseInfosWithStatistics",t).then(function(t){e.TableLoading=!1,t.isSuccess?e.queryCount=t.data:e.$Message.error(t.msg)})},queryTableList:function(){this.pageNum=1,this.updateTableList()},changeCurrent:function(e){this.pageNum=e,this.updateTableList()},updateTableList:function(){var e=this;this.TableLoading=!0;var t={barcode:this.searchItem.barcode,phoneNumber:this.searchItem.phoneNumber,merchantNames:this.searchItem.merchantNames,receiveStartTime:this.searchItem.receiveStartTime,receiveEndTime:this.searchItem.receiveEndTime};Object(i["g"])("/merchantCoupon/useInfo/list?pageNum="+this.pageNum+"&pageSize="+this.limit,t).then(function(t){e.TableLoading=!1,t.isSuccess?(e.totalSize=t.data.total,e.table_list=t.data.records):e.$Message.error(t.msg)})},addInfo:function(){this.edit_info={postId:"",postName:"",postCode:"",status:"0",remark:"",postSort:null},this.edit_Modal_show=!0,this.title="岗位管理新增"},editInfo:function(e){this.edit_Modal_show=!0,this.edit_info=e,this.title="岗位管理编辑"},editOk:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(""==t.edit_info.postSort)return void t.$Message.error("显示顺序不能为空");t.edit_info.postId?(t.requestUrl="/system/sys-post/edit",t.msg="编辑成功"):(t.requestUrl="/system/sys-post/add",t.msg="新增成功"),t.edit_loading=!0;var a={postId:t.edit_info.postId,postName:t.edit_info.postName,postCode:t.edit_info.postCode,status:t.edit_info.status,remark:t.edit_info.remark,postSort:t.edit_info.postSort};Object(i["g"])(t.requestUrl,a).then(function(e){t.edit_loading=!1,200==e.code?(t.$Message.info(t.msg),setTimeout(function(){t.edit_Modal_show=!1,t.updateTableList()},1200)):t.$Message.error(e.msg)})}else t.$Message.error("表单验证失败!")})},removeInfo:function(e){var t=this;this.$Modal.confirm({title:"删除确认",content:"删除后不可恢复，是否继续删除？",onOk:function(){t.$Loading.start(),Object(i["g"])("/system/sys-post/delete?postId="+e.postId).then(function(e){t.loading=!1,"200"==e.code?(t.$Message.info("删除成功！"),setTimeout(function(){t.pageNum=1,t.updateTableList()},1200)):t.$Message.error(e.msg)})},onCancel:function(){t.$Message.info("点击了取消")}})}},mounted:function(){this.init()}},n=r,l=(a("eb57"),a("6691")),c=Object(l["a"])(n,o,s,!1,null,"fdb60cee",null);t["default"]=c.exports},eb57:function(e,t,a){"use strict";var o=a("430e"),s=a.n(o);s.a}}]);