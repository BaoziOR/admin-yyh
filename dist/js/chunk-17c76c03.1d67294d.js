(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17c76c03"],{"08c7":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"merchant-add"},[a("Card",[a("Button",{attrs:{type:"dashed",icon:"md-arrow-round-back"},on:{click:t.goback}},[t._v("返回列表")]),"edit"==t.pageStatus?a("Alert",{staticStyle:{"margin-left":"200px",width:"600px","margin-top":"10px"},attrs:{"show-icon":""}},[t._v("\n      员工id :\n      "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.packageId))]),a("span",{attrs:{slot:"desc"},slot:"desc"})]):t._e(),a("Row",{staticStyle:{"margin-left":"1em"}},[a("Row",{staticClass:"box flex-ac"},[a("Col",{staticClass:"left-text",attrs:{span:"5"}},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("商户类型\n        ")]),a("Col",{attrs:{span:"15"}},[a("RadioGroup",{on:{"on-change":t.changeMerchantType},model:{value:t.add_info.merchantType,callback:function(e){t.$set(t.add_info,"merchantType",e)},expression:"add_info.merchantType"}},[a("Radio",{attrs:{label:1,disabled:"read"===t.pageStatus}},[t._v("本地商户（单店）")]),a("Radio",{attrs:{label:2,disabled:"read"===t.pageStatus}},[t._v("本地商户（多店）")])],1)],1)],1),a("Row",{staticClass:"box"},[a("Col",{staticClass:"left-text",attrs:{span:"5"}},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("所属"+t._s(t.currentTitle)+"\n        ")]),a("Col",{attrs:{span:"15"}},[a("Button",{staticStyle:{width:"150px"},attrs:{disabled:t.disabled2},on:{click:t.addMerchantList}},[t._v("点击选择所属"+t._s(t.currentTitle))]),""!=this.chooseMerchant.merchantId&&t.selectIsConfirm?a("Alert",{staticStyle:{width:"300px","margin-top":"15px"},attrs:{type:"success","show-icon":""}},[a("div",[t._v(t._s(t.currentTitle)+"名称："+t._s(this.chooseMerchant.name))]),a("div",{staticStyle:{"margin-top":"5px"}},[t._v(t._s(t.currentTitle)+"编号："+t._s(this.chooseMerchant.merchantId))])]):t._e(),""==this.chooseMerchant.merchantId?a("Alert",{staticStyle:{width:"300px","margin-top":"15px"},attrs:{type:"error","show-icon":""}},[a("div",[t._v("请选择所属"+t._s(t.currentTitle)+"！只能选择一个哦！")]),a("div")]):t._e()],1)],1),2===t.add_info.merchantType?a("Row",{staticClass:"box"},[a("Col",{staticClass:"left-text",attrs:{span:"5"}},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("商户列表\n        ")]),a("Col",{attrs:{span:"6"}},[a("div",[t._v("\n            已选："+t._s(t.listByBrand.length)+" / "+t._s(t.listByBrand.length+t.listByBrandTrash.length)+"\n          ")]),a("div",{staticClass:"merchant-list"},[t._l(t.listByBrand,function(e,s){return a("div",{key:"merchantaddL59"+s,staticClass:"merchant-list-item"},[t._v("\n              "+t._s(e.name)+"\n              "),a("Button",{staticClass:"select-btn",attrs:{disabled:"read"===t.pageStatus},on:{click:function(e){return t.delOne(s)}}},[t._v("移出")])],1)}),a("div",{staticClass:"yyh-nodata pdt-5"},[t._v("\n              暂未选择任何商户\n            ")])],2)]),a("Col",{staticClass:"mgl-2",attrs:{span:"6"}},[a("div",[t._v("已移出"+t._s(t.listByBrandTrash.length))]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.listByBrandTrash.length>0,expression:"listByBrandTrash.length > 0"}],staticClass:"merchant-list"},t._l(t.listByBrandTrash,function(e,s){return a("div",{key:"merchantaddL59"+s,staticClass:"merchant-list-item"},[t._v("\n              "+t._s(e.name)+"\n              "),a("Button",{staticClass:"select-btn",attrs:{disabled:"read"===t.pageStatus},on:{click:function(e){return t.addOne(s)}}},[t._v("增加")])],1)}),0)])],1):t._e(),a("Row",{staticClass:"box"},[a("Col",{staticClass:"left-text",attrs:{span:"5"}},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("套餐\n        ")]),a("Col",{attrs:{span:"5"}},[a("Select",{staticStyle:{width:"150px"},attrs:{disabled:t.disabled2},model:{value:t.add_info.serviceCode,callback:function(e){t.$set(t.add_info,"serviceCode",e)},expression:"add_info.serviceCode"}},t._l(t.servicelist,function(e,s){return a("Option",{key:s,attrs:{value:e.serviceCode,disabled:"read"===t.pageStatus}},[t._v(t._s(e.serviceName))])}),1)],1)],1),a("Row",{staticClass:"box"},[a("Col",{staticClass:"left-text",attrs:{span:"5"}},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("推送客户数上限\n        ")]),a("Col",{attrs:{span:"10"}},[a("InputNumber",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入正整数，比如1",max:1e4,min:1,disabled:1==t.disabled2},nativeOn:{keyup:function(e){return t.changeNumber(e)}},model:{value:t.add_info.pushCustomerNum,callback:function(e){t.$set(t.add_info,"pushCustomerNum",e)},expression:"add_info.pushCustomerNum"}}),t._v("人/天\n        ")],1)],1),a("Row",{staticClass:"box"},[a("Col",{staticClass:"left-text",attrs:{span:"5"}},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("套餐有效期\n        ")]),a("Col",{attrs:{span:"16"}},[a("DatePicker",{staticStyle:{width:"150px"},attrs:{type:"date",placeholder:"请选择",format:"yyyy-MM-dd",value:t.add_info.startDate,disabled:t.disabled2},on:{"on-change":t.time1}}),a("DatePicker",{staticClass:"mgl-10",staticStyle:{width:"150px"},attrs:{type:"date",placeholder:"请选择",format:"yyyy-MM-dd",value:t.add_info.endDate,disabled:t.disabled2},on:{"on-change":t.time2}})],1)],1),a("Row",{staticClass:"box"},[a("Col",{staticClass:"left-text",attrs:{span:"5"}},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("应收款\n        ")]),a("Col",{attrs:{span:"5"}},[a("InputNumber",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入正整数，比如1",max:999999,min:0,disabled:t.disabled2},model:{value:t.add_info.receivables,callback:function(e){t.$set(t.add_info,"receivables",e)},expression:"add_info.receivables"}})],1)],1),a("Row",{staticClass:"box"},[a("Col",{staticClass:"left-text",attrs:{span:"5"}},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("合同号\n        ")]),a("Col",{attrs:{span:"16"}},[a("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"最多输入30个汉字",placement:"right"}},[a("Input",{staticStyle:{width:"200px"},attrs:{maxlength:30,placeholder:"请输入合同号",clearable:"",disabled:t.disabled2},model:{value:t.add_info.contractNumber,callback:function(e){t.$set(t.add_info,"contractNumber",e)},expression:"add_info.contractNumber"}})],1)],1)],1),a("Row",{staticClass:"box"},[a("Col",{staticClass:"left-text",attrs:{span:"5"}},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("签单销售\n        ")]),a("Col",{attrs:{span:"16"}},[a("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"最多输入10个汉字",placement:"right"}},[a("Input",{staticStyle:{width:"200px"},attrs:{maxlength:10,placeholder:"请输入签单销售",clearable:"",disabled:t.disabled2},model:{value:t.add_info.biller,callback:function(e){t.$set(t.add_info,"biller",e)},expression:"add_info.biller"}})],1)],1)],1),a("Row",{staticClass:"box"},[a("Col",{staticClass:"left-text",attrs:{span:"5"}},[t._v("备注")]),a("Col",{attrs:{span:"16"}},[a("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"最多输入500个字符",placement:"right"}},[a("Input",{staticStyle:{width:"400px"},attrs:{type:"textarea",placeholder:"500个字符以内",clearable:"",disabled:t.disabled2,rows:3},model:{value:t.add_info.remark,callback:function(e){t.$set(t.add_info,"remark",e)},expression:"add_info.remark"}})],1)],1)],1),a("Row",{staticClass:"box flex-ac"},[a("Col",{staticClass:"left-text",attrs:{span:"5"}},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("收费条目\n        ")]),a("Col",{attrs:{span:"2"}},[a("Button",{attrs:{type:"primary",icon:"md-add-circle",size:"small",disabled:t.disabled2},on:{click:t.compatible_addInfo}},[t._v("新增")])],1)],1),t.compatibleList.length>0?a("Alert",{staticClass:"merchant-alert"},t._l(t.compatibleList,function(e,s){return a("Row",{key:s,staticClass:"box"},[a("Col",{staticClass:"flex alert-content",attrs:{span:"24"}},[a("Select",{staticStyle:{width:"100px"},attrs:{placeholder:"支付方式",disabled:t.disabled2},model:{value:e.paymentMode,callback:function(a){t.$set(e,"paymentMode",a)},expression:"item.paymentMode"}},t._l(t.payTypeList,function(e){return a("Option",{key:e.id,attrs:{value:e.id,disabled:t.disabled2}},[t._v(t._s(e.name))])}),1),a("InputNumber",{staticStyle:{width:"120px"},attrs:{placeholder:"实际收款金额",disabled:t.disabled2,max:99999999,min:0},model:{value:e.actualAmount,callback:function(a){t.$set(e,"actualAmount",a)},expression:"item.actualAmount"}}),a("Input",{staticStyle:{width:"100px"},attrs:{disabled:t.disabled2,maxlength:10,placeholder:"收款人",clearable:""},model:{value:e.payee,callback:function(a){t.$set(e,"payee",a)},expression:"item.payee"}}),a("DatePicker",{staticStyle:{width:"150px"},attrs:{type:"date",placeholder:"请填写收款日期",disabled:t.disabled2},model:{value:e.receivedDate,callback:function(a){t.$set(e,"receivedDate",a)},expression:"item.receivedDate"}}),a("Input",{staticStyle:{width:"150px"},attrs:{disabled:t.disabled2,maxlength:20,placeholder:"请填写流水号",clearable:""},model:{value:e.serialNumber,callback:function(a){t.$set(e,"serialNumber",a)},expression:"item.serialNumber"}}),a("Button",{staticStyle:{"margin-left":"5px"},attrs:{type:"error",icon:"md-trash",size:"small",disabled:t.disabled2},on:{click:function(a){return t.compatible_delInfo(s,e)}}})],1)],1)}),1):t._e(),a("Row",{directives:[{name:"show",rawName:"v-show",value:"read"!==t.pageStatus,expression:"pageStatus !== 'read'"}],staticStyle:{"margin-top":"54px"}},[a("Button",{staticStyle:{width:"240px","margin-right":"20px",float:"left"},attrs:{type:"info"},on:{click:t.goback}},[t._v("取   消")]),a("Button",{staticStyle:{width:"240px",float:"left"},attrs:{type:"primary",loading:t.edit_loading,disabled:t.isCheckDisabled},on:{click:t.addPackage}},[t._v("保存")])],1)],1)],1),a("Modal",{attrs:{title:2===t.add_info.merchantType?"品牌列表":"商户列表",width:"800","footer-hide":"","mask-closable":!1},model:{value:t.merchantTabDisplay,callback:function(e){t.merchantTabDisplay=e},expression:"merchantTabDisplay"}},[a("div",[a("row",[a("Form",{ref:"searchItem",staticClass:"search-form",attrs:{model:t.searchItem,inline:"","label-width":70}},[a("FormItem",{attrs:{label:t.currentTitle+"编号"}},[a("Input",{staticStyle:{width:"150px"},attrs:{type:"text",clearable:"",placeholder:"请输入"+t.currentTitle+"编号"},model:{value:t.searchItem.merchantId,callback:function(e){t.$set(t.searchItem,"merchantId",e)},expression:"searchItem.merchantId"}})],1),a("FormItem",{attrs:{label:t.currentTitle+"名称"}},[a("Input",{staticStyle:{width:"150px"},attrs:{type:"text",clearable:"",placeholder:"请输入"+t.currentTitle+"名称"},model:{value:t.searchItem.name,callback:function(e){t.$set(t.searchItem,"name",e)},expression:"searchItem.name"}})],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:1==t.add_info.merchantType,expression:"add_info.merchantType == 1"}],attrs:{label:"所在地区"}},[a("Select",{staticStyle:{width:"150px"},attrs:{clearable:""},on:{"on-change":t.getcitylist},model:{value:t.searchItem.provinceId,callback:function(e){t.$set(t.searchItem,"provinceId",e)},expression:"searchItem.provinceId"}},t._l(t.provincelist,function(e,s){return a("Option",{key:s,attrs:{value:e.provinceCode}},[t._v(t._s(e.provinceName))])}),1),a("Select",{staticStyle:{width:"150px"},attrs:{clearable:""},on:{"on-change":t.getarealist},model:{value:t.searchItem.cityId,callback:function(e){t.$set(t.searchItem,"cityId",e)},expression:"searchItem.cityId"}},t._l(t.citylist,function(e,s){return a("Option",{key:s,attrs:{value:e.cityCode}},[t._v(t._s(e.cityName))])}),1),a("Select",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:t.searchItem.areaId,callback:function(e){t.$set(t.searchItem,"areaId",e)},expression:"searchItem.areaId"}},t._l(t.arealist,function(e,s){return a("Option",{key:s,attrs:{value:e.areaCode}},[t._v(t._s(e.areaName))])}),1)],1),a("FormItem",{staticClass:"br",staticStyle:{"margin-left":"-35px"}},[a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.search}},[t._v("搜索")]),a("Button",{on:{click:t.resetData}},[t._v("重置")])],1)],1)],1),2===t.add_info.merchantType?a("Table",{attrs:{border:"",width:"100%",columns:t.columnsBrand,data:t.merchantList,loading:t.TableLoading}}):a("Table",{ref:"selection",attrs:{border:"",width:"100%",columns:t.columnsMerchant,data:t.merchantList,loading:t.TableLoading}}),a("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[a("Page",{staticStyle:{float:"right"},attrs:{total:t.totalSize,"show-total":"","show-elevator":"",current:t.current},on:{"on-change":t.changeCurrent,"update:current":function(e){t.current=e}}})],1)],1),a("Row",{staticStyle:{"margin-left":"350px","margin-top":"30px"}},[a("Button",{staticStyle:{"margin-right":"20px"},on:{click:t.cancel}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:t.selectMerchant}},[t._v("确定")])],1)],1)],1)},i=[],r=(a("6797"),a("7f80")),n=a("365c"),c=a("62a2"),o=a("872c");function l(t){return m(t)||h(t)||d()}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function h(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function m(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}var u={name:"merchant-customer-operate",props:{packageId:String},data:function(){var t=this;return{listByBrandTrash:[],listByBrand:[],selectIsConfirm:!1,userToken:{},disabled2:!1,payTypeList:[{id:"1",name:"现金"},{id:"2",name:"微信"},{id:"3",name:"支付宝"},{id:"4",name:"银行卡"}],servicelist:[{serviceCode:"merchant_customer",serviceName:"精准拓客"},{serviceCode:"merchant_platform",serviceName:"平台拓客"}],add_info:{remark:"",serviceCode:"merchant_customer",serviceName:"精准拓客",pushCustomerNum:null,startDate:"",endDate:"",receivables:null,biller:"",contractNumber:"",merchantType:"",id:""},edit_loading:!1,isCheckDisabled:!1,bsUploadList:[],url:n["g"],roleList:[],pageStatus:"",merchantTabDisplay:!1,userInfoDisplay:!1,checkResult:0,checkMsg:"",chooseMerchant:{id:"",merchantId:"",name:""},userList:[],avatarUrl_url:"",avatarUrlDisplay:!1,currentChooseID:"",columnsMerchant:[{title:"选择",key:"chooseMerchantId",width:70,slot:"check",align:"center",render:function(e,a){var s=a.row.merchantId,i=a.row.name,r=!1;r=t.chooseMerchant.merchantId===s;var n=t;return e("div",[e("Radio",{props:{value:r},on:{"on-change":function(){n.chooseMerchant.merchantId=s,n.chooseMerchant.name=i}}})])}},{title:"商户编号",align:"center",minWidth:160,key:"merchantId"},{title:"商户名称",align:"center",width:230,key:"name"},{title:"地址",align:"center",width:340,key:"address",render:function(t,e){var a=e.row.province+e.row.city+e.row.district+e.row.address;return t("span",a)}}],columnsBrand:[{title:"选择",key:"chooseMerchantId",width:70,slot:"check",align:"center",render:function(e,a){var s=a.row.id,i=a.row.name,r=!1;r=t.chooseMerchant.merchantId===s;var n=t;return e("div",[e("Radio",{props:{value:r},on:{"on-change":function(){n.chooseMerchant.merchantId=s,n.chooseMerchant.name=i,n.chooseMerchant.brandLevel=a.row.brandLevel}}})])}},{title:"编号",align:"center",width:160,key:"id"},{title:"品牌名称",align:"center",key:"name"}],merchantList:[],current:1,totalSize:0,pageNum:1,TableLoading:!1,searchItem:{merchantId:"",name:"",provinceId:"",cityId:"",areaId:""},provincelist:[],citylist:[],arealist:[],selectedMerchantList:[],compatibleList:[],deleteChargesList:[]}},mixins:[o["a"]],computed:{currentTitle:function(){var t="商户";return 2===this.add_info.merchantType&&(t="品牌"),t}},created:function(){var t=this;this.resetData=function(){var e=t.m_cloneObj(t.searchItem);return function(){t.searchItem=t.m_cloneObj(e),t.updateTableList()}}(),this.userToken={jwttoken:localStorage.getItem("jwttoken")}},methods:{changeMerchantType:function(){this.chooseMerchant.merchantId="",this.chooseMerchant.name="",this.chooseMerchant.id=""},addOne:function(t){var e;(e=this.listByBrand).push.apply(e,l(this.listByBrandTrash.splice(t,1)))},delOne:function(t){var e;(e=this.listByBrandTrash).push.apply(e,l(this.listByBrand.splice(t,1)))},compatible_addInfo:function(){this.compatibleList.push({id:"",paymentMode:"",actualAmount:null,payee:"",receivedDate:"",serialNumber:""})},compatible_delInfo:function(t,e){""!=e.id&&this.deleteChargesList.push(e.id),this.compatibleList.splice(t,1)},time1:function(t){this.add_info.startDate=t},time2:function(t){this.add_info.endDate=t},time3:function(t,e){},getprovincelist:function(){var t=this;Object(r["g"])("/system/area/province/list").then(function(e){200==e.code?t.provincelist=e.data:t.$Message.error(e.msg)})},getcitylist:function(){var t=this;Object(r["c"])("/system/area/city/"+this.searchItem.provinceId).then(function(e){200==e.code?(t.citylist=e.data,t.searchItem.areaId=""):t.$Message.error(e.msg)})},getarealist:function(){var t=this;Object(r["c"])("/system/area/district/"+this.searchItem.cityId).then(function(e){200==e.code?t.arealist=e.data:t.$Message.error(e.msg)})},avatarUrlLook:function(t){this.avatarUrl_url=t,this.avatarUrlDisplay=!0},goback:function(){this.$emit("changeStatus",!1)},bsHandleSuccess:function(t,e){if(200==t.code){if(this.add_info.wxQrcode=t.image_url,0==this.bsUploadList.length){var a={url:t.image_url};this.bsUploadList.push(a)}else this.bsUploadList[0].url=t.image_url;this.$Message.info("上传图片成功")}else this.$Message.error("上传图片失败，请重新上传")},handleMaxSize:function(t){this.$Message.error("图片不大于1M")},formatError:function(){this.msgErr("只能上传jpg,jpeg,png,bmp格式,请重新上传")},handleBeforeUpload:function(t){return Object(c["a"])(t)},getRoleList:function(){var t=this;Object(r["g"])("/merchant/MerchantRoleInfo/all").then(function(e){200==e.code?t.roleList=e.data:t.$Message.error(e.msg)})},init:function(){this.pageStatus=this.getStore("pageStatus"),this.getRoleList(),this.getprovincelist(),this.getPackageInfo(),console.info(this.pageStatus),"edit1"==this.pageStatus||"edit2"!=this.pageStatus&&"read"!==this.pageStatus||(this.disabled2=!0)},cancel:function(){this.chooseMerchant={brandLevel:"",merchantId:"",name:""},this.merchantTabDisplay=!1,this.userInfoDisplay=!1},addMerchantList:function(){this.merchantTabDisplay=!0,this.selectedMerchantList=[],this.getMerchantListFn()},search:function(){this.current=1,this.totalSize=0,this.pageNum=1,this.getMerchantListFn()},getMerchantListFn:function(){var t=this;this.TableLoading=!1;var e={merchantId:this.searchItem.merchantId,name:this.searchItem.name};1==this.add_info.merchantType&&(e={merchantId:this.searchItem.merchantId,name:this.searchItem.name,provinceCode:this.searchItem.provinceId,cityCode:this.searchItem.cityId,areaCode:this.searchItem.areaId});var a=["/merchant/merchantInfo/list","/merchant/merchantInfo/list","/merchant/brandMain/list/data"],s=n["a"];Object(r["f"])(s+a[Number(this.add_info.merchantType)]+"?isAsc=DESC&orderByColumn=1&pageSize=10&pageNum=".concat(this.pageNum),this.m_filterParams(e)).then(function(e){200==e.code?(t.totalSize=e.data.total,t.merchantList=e.data.records):t.msgErr(e.msg),t.TableLoading=!1})},selectMerchant:function(){this.selectIsConfirm=!0,this.chooseMerchant.merchantId&&""!=this.chooseMerchant.merchantId?(this.merchantTabDisplay=!1,2===this.add_info.merchantType&&this.getMerchantByBrand()):this.msgErr("至少选一个商户")},getMerchantByBrand:function(){var t=this,e=n["a"],a={brandId:this.chooseMerchant.merchantId,brandLevel:this.chooseMerchant.brandLevel};Object(r["f"])(e+"/merchant/merchantBrand/list/merchant",a).then(function(e){console.log(e),200==e.code?(t.listByBrand=e.data.map(function(t){return{id:t.merchantId,name:t.name}}),e.data.length<1&&t.msgErr("未获取到该品牌下门店，（您可以去添加或与我们联系）")):t.msgErr(e.msg)}).catch(function(t){console.log(t,"operating_merchant/merchant-customer/merchant-customer-add, Line929")})},resetData:function(){this.searchItem.merchantId="",this.searchItem.name="",this.searchItem.provinceId="",this.searchItem.cityId="",this.searchItem.areaId="",this.updateTableList()},changeCurrent:function(t){this.pageNum=t,this.getMerchantListFn()},clearOpenid:function(){this.add_info.userId="",this.checkResult=0},msgOk:function(t){this.$Message.info({content:t,duration:3})},addPackage:function(){var t=this;if(this.ruleValidate()){var e=this.add_info,a=[];if(2===this.add_info.merchantType&&this.listByBrand.length<1)this.msgErr("至少选择一个商户");else{var s=!0,i=!1,o=void 0;try{for(var l,d=this.compatibleList[Symbol.iterator]();!(s=(l=d.next()).done);s=!0){var h=l.value,m=h.paymentMode;if(""==m)return void this.msgErr("请填写支付方式");var u=h.actualAmount;if(null==u)return void this.msgErr("请填写实际收款金额");var p=h.payee;if(""==p)return void this.msgErr("请填写收款人");var f=h.receivedDate;if(""==f)return void this.msgErr("请填写收款日期");var v=h.serialNumber;if(""==v)return void this.msgErr("请填写流水号");h.receivedDate=Object(c["c"])(new Date(h.receivedDate),"yyyy-MM-dd"),a.push(h)}}catch(y){i=!0,o=y}finally{try{s||null==d.return||d.return()}finally{if(i)throw o}}e.serviceChargesList=a,e.merchantId=this.chooseMerchant.merchantId,e.deleteChargesList=this.deleteChargesList;var g="新增";-1!==this.pageStatus.indexOf("edit")?g="编辑":"read"==this.pageStatus&&(g="查看"),this.edit_loading=!0,this.isCheckDisabled=!0,console.info(JSON.stringify(e)),2===this.add_info.merchantType?(e.brandId=e.merchantId,e.merchantIdList=this.listByBrand.map(function(t){return{id:t.id,name:t.name}})):e.merchantIdList=[{id:e.merchantId}],delete e.merchantId,delete e.serviceName,delete e.deleteChargesList;var b=n["a"];"新增"===g&&delete e.id,Object(r["f"])(b+"/merchant/merchantPackageInfo/add",e).then(function(e){200==e.code?(console.log(g),t.msgOk(g+"成功"),t.goback()):t.msgErr(e.msg),t.edit_loading=!1,t.isCheckDisabled=!1})}}},getPackageInfo:function(){var t=this;"add"!=this.pageStatus&&"read"!==this.pageStatus&&this.packageId&&Object(r["g"])("/merchant/merchantPackageInfo/selectById?id="+this.packageId).then(function(e){200==e.code?(t.add_info={merchantType:e.data.merchantType,serviceCode:e.data.serviceCode,pushCustomerNum:parseInt(e.data.pushCustomerNum),startDate:e.data.startDate,endDate:e.data.endDate,receivables:parseInt(e.data.receivables),biller:e.data.biller,contractNumber:e.data.contractNumber,id:e.data.id,remark:e.data.remark},t.compatibleList=e.data.serviceChargesList,t.chooseMerchant.name=e.data.merchantName,2===t.add_info.merchantType?(t.chooseMerchant.id=t.chooseMerchant.merchantId=e.data.brandId,t.listByBrand=e.data.merchantIdList):t.chooseMerchant.id=t.chooseMerchant.merchantId=e.data.merchantIdList[0]["id"],t.selectIsConfirm=!0,console.info(JSON.stringify(Object.assign({},t.chooseMerchant),null,2),1059)):t.$Message.error(e.msg)})},msgErr:function(t){this.$Message.error({content:t,duration:3})},ruleValidate:function(){if(""!==this.add_info.merchantType)if(""!=this.chooseMerchant.merchantId)if(""!=this.add_info.serviceCode)if(""!=this.add_info.pushCustomerNum)if(""!=this.add_info.startDate&&""!=this.add_info.endDate)if(""!=this.add_info.biller){if(!(this.compatibleList.length<1))return!0;this.msgErr("请至少添加一个收费条目")}else this.msgErr("签单销售不能为空");else this.msgErr("套餐有效期不能为空");else this.msgErr("推送客户数上限不能为空");else this.msgErr("套餐不能为空");else this.msgErr("所属".concat(this.currentTitle,"不能为空"));else this.msgErr("请选择商户类型")},changeNumber:function(){var t=""+this.add_info.pushCustomerNum;if(-1!=t.indexOf(".")){var e=t.split("");e.splice(e.length-1);var a=e.join("");this.operation_data.sort=+a,this.msgErr("只能输入整数")}}},mounted:function(){this.init()}},p=u,f=(a("5f4f"),a("6691")),v=Object(f["a"])(p,s,i,!1,null,null,null);e["default"]=v.exports},"5f4f":function(t,e,a){"use strict";var s=a("7286"),i=a.n(s);i.a},7286:function(t,e,a){}}]);