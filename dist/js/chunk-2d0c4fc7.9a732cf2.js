(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c4fc7"],{"3cbc":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{attrs:{width:"800",title:"商户选择",closable:!1,"mask-closable":!1,"footer-hide":""},model:{value:e.viewDialogVisible,callback:function(t){e.viewDialogVisible=t},expression:"viewDialogVisible"}},[a("div",[a("div",[a("Card",{staticStyle:{"margin-bottom":"2px"},attrs:{bordered:!1}},[a("Form",{ref:"businessModal",attrs:{"label-position":"right","label-width":80,model:e.businessModal,inline:""}},[a("FormItem",{staticStyle:{width:"25%"},attrs:{label:"商户名称",span:"24"}},[a("Input",{attrs:{placeholder:" 请填写商户名称",maxlength:20},model:{value:e.businessModal.name,callback:function(t){e.$set(e.businessModal,"name",t)},expression:"businessModal.name"}})],1),a("FormItem",{staticStyle:{width:"40%"},attrs:{label:"省/市",span:"24"}},[a("Cascader",{attrs:{data:e.addressData,"load-data":e.addressLoad},model:{value:e.addressValue,callback:function(t){e.addressValue=t},expression:"addressValue"}})],1),a("FormItem",{staticStyle:{float:"right"},attrs:{span:"24","label-width":1}},[a("Button",{staticClass:"submit",staticStyle:{"margin-right":"5px"},attrs:{type:"primary",icon:"ios-search"},on:{click:function(t){return e.search("searchForm")}}},[e._v("搜索")]),a("Button",{attrs:{icon:"md-refresh"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1),a("Row",[a("RadioGroup",{staticStyle:{width:"100%"},on:{"on-change":e.selectBusiness},model:{value:e.selectIndex,callback:function(t){e.selectIndex=t},expression:"selectIndex"}},[a("Table",{ref:"table",attrs:{loading:e.TableLoading,border:"",columns:e.tableColumns,data:e.listData,sortable:"custom"},on:{"on-selection-change":e.handleSelect},scopedSlots:e._u([{key:"action",fn:function(e){e.row;var t=e.index;return[a("Radio",{attrs:{label:t}},[a("span")])]}},{key:"address",fn:function(t){var s=t.row;return[a("div",[e._v(e._s(s.province+"/"+s.city))])]}}])})],1)],1),a("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[a("Page",{staticStyle:{float:"right"},attrs:{total:e.totalSize,"show-total":"","show-elevator":"",current:e.current},on:{"on-change":e.changeCurrent,"update:current":function(t){e.current=t}}})],1)],1)]),a("div",{staticStyle:{"text-align":"center",margin:"10px"}},[a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:e.businessSave}},[e._v("保存")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:e.businessClose}},[e._v("关闭")])],1)])},i=[],n=a("7f80"),l={name:"businessModal",props:{viewDialogVisible:{type:Boolean,default:!1}},data:function(){return{TableLoading:"",businessModal:{name:"",current:1},addressValue:[],selectRow:"",selectIndex:"",addressData:[],totalSize:0,current:1,tableColumns:[{title:"操作",width:80,align:"center",slot:"action",fixed:"left"},{title:"商户名称",minWidth:200,key:"name",align:"center"},{title:"省/市",minWidth:250,slot:"address",align:"center"}],listData:[],selectDataList:[]}},methods:{resetRow:function(e){this.selectRow=e,this.businessModal.name="",this.addressData=[],this.getProvinceList(),this.loadTableData()},getProvinceList:function(){var e=this;Object(n["g"])("/system/area/province/list",{}).then(function(t){"200"===t.code?(e.addressData=t.data||[],e.addressData.length&&e.addressData.forEach(function(e){e.value=e.provinceCode,e.label=e.shortName,e.children=[],e.loading=!1})):e.$Message.error("获取数据失败")})},addressLoad:function(e,t){var a=this;e.loading=!0,Object(n["d"])("/system/area/city/"+e.provinceCode).then(function(s){"200"===s.code?(e.children=s.data||[],e.loading=!1,e.children.length&&e.children.forEach(function(e){e.label=e.shortName,e.value=e.cityCode}),t()):(a.$Message.error("获取数据失败"),e.loading=!1,t())})},search:function(){this.TableLoading=!1,this.loadTableData()},reset:function(){},loadTableData:function(){var e=this,t=this;this.totalSize=0,this.listData=[],this.TableLoading=!0,this.selectIndex="",Object(n["g"])("/merchant/merchantInfo/list?pageNum=".concat(this.businessModal.current,"&pageSize=10"),{cityCode:this.addressValue[1]||"",provinceCode:this.addressValue[0]||"",name:this.businessModal.name||""}).then(function(a){e.TableLoading=!1,"200"===a.code?(e.totalSize=a.data.total,e.listData=a.data.records,e.selectRow.merchantId&&a.data.records.forEach(function(e,a){e.merchantId===t.selectRow.merchantId&&(t.selectIndex=a)})):e.$Message.error("获取数据失败")})},handleSelect:function(e,t){this.selectDataList=e},changeCurrent:function(e){this.businessModal.current!=e&&(this.businessModal.current=e,this.loadTableData())},selectBusiness:function(){this.selectRow=this.listData[this.selectIndex]},businessClose:function(){this.$emit("setViewDialogVisible",this.selectRow)},businessSave:function(){this.selectIndex||0===this.selectIndex?this.$emit("setViewDialogVisible",this.selectRow):this.$Message.error("请选择商户")}},created:function(){}},o=l,r=a("6691"),c=Object(r["a"])(o,s,i,!1,null,"6ca7b579",null);t["default"]=c.exports}}]);