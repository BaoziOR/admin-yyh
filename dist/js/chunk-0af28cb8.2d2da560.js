(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0af28cb8","chunk-464a9568","chunk-7014621b"],{"073a":function(t,e,a){"use strict";var i=a("5eb6"),n=a.n(i);n.a},"1fe3":function(t,e,a){},"5eb6":function(t,e,a){},6353:function(t,e,a){"use strict";var i=a("e914"),n=a.n(i);n.a},6571:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"yyh-modal"},[a("Modal",{staticClass:"yyh-modal",attrs:{title:"详情"+(t.dataList.groupType>0?" - "+t.types[t.dataList.groupType-1]:""),width:"800",styles:{top:"20px"}},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[-1!==t.dataList.groupType?a("div",[t._l(t.descConfig[Number(t.dataList.groupType-1)],function(e,i){return a("div",{key:"modal_detail"+i,staticClass:"yyh-modal-item"},[a("span",{staticClass:"title",staticStyle:{width:"8em"}},[t._v(t._s(e[1])+":")]),"投放门店"===e[1]?["0"===String(t.dataList.storeType)?a("span",[t._v("全国")]):[t._l(t.dataList[e[0]],function(e,i){return[a("span",{key:"L9a"+i,staticStyle:{flex:"1"}},[t._v(t._s(t.handleAddress(e)))]),a("br",{key:"L9b"+i})]})]]:"活动大奖"===e[1]||"阳光普照奖"===e[1]?a("span",{staticClass:"modal-content",staticStyle:{flex:"1"}},[a("div",{staticStyle:{display:"flex"}},["1"==t.dataList[e[0]].type&&t.dataList[e[0]].giftImg?a("img",{staticClass:"mgr-1 banner-img",attrs:{src:t.dataList[e[0]].giftImg,alt:"奖品图"}}):t._e(),a("span",{staticClass:"mgr-1 flex-1"},[t._v("奖品名称：\n              "),a("span",{directives:[{name:"show",rawName:"v-show",value:"3"==t.dataList[e[0]].type,expression:"dataList[el[0]].type == '3'"}]},[t._v(t._s(t.dataList[e[0]].prizeNum))]),t._v(t._s("3"==t.dataList[e[0]].type?t.dataList[e[0]].prizeName+"U贝":t.dataList[e[0]].prizeName)+"\n            ")])])]):"活动开奖时间"===e[1]?a("span",{staticClass:"modal-content",staticStyle:{flex:"1"}},[t._v(t._s(t.dataList[e[0]]?t.dataList[e[0]]:"")+"    "+t._s(2==t.dataList.openDrawTimeType?" 满"+t.dataList.openDrawTimeNeedPlayers+"人开奖":""))]):"参与对象"===e[1]?a("span",{staticClass:"modal-content",staticStyle:{flex:"1"}},[t._v(t._s(t.dataList[e[0]]?t.dataList[e[0]]:0==t.dataList.joinUserLevel?"全部":""))]):"抽奖规则"===e[1]?a("span",{staticClass:"modal-content",staticStyle:{flex:"1"}},[t._v("\n          "+t._s(t.dataList[e[0]])+"\n        ")]):a("span",{staticClass:"modal-content",staticStyle:{flex:"1"}},[t._v(t._s(void 0!==t.dataList[e[0]]?t.dataList[e[0]]:"")+t._s("开团有效时间"===e[1]?" 分钟":""))])],2)}),a("div",{staticClass:"par"},[t._v("\n        广告主信息:\n      ")]),a("div",{staticClass:"par mgl-2 yyh-modal-item"},[a("span",{staticClass:"title",staticStyle:{width:"3em"}},[t._v("名称：")]),a("span",{staticClass:"flex-1 modal-content"},[t._v(t._s("string"===typeof t.dataList.advertName?t.dataList.advertName:""))])]),a("div",{staticClass:"par mgl-2 yyh-modal-item"},[a("span",{staticClass:"title",staticStyle:{width:"3em"}},[t._v("简介：")]),a("span",{staticClass:"flex-1 modal-content",domProps:{innerHTML:t._s("string"===typeof t.dataList.advertIntro?t.dataList.advertIntro:"")}})]),a("div",{staticClass:"par mgl-2 yyh-modal-item"},[a("span",{staticClass:"flex",staticStyle:{width:"280px"}},[a("span",{staticClass:"title width-5"},[t._v("列表banner")]),a("img",{staticClass:"mgr-1 banner-img",attrs:{src:t.dataList.drawActiveUrl,alt:"banner"}})]),a("span",{staticClass:"flex",staticStyle:{width:"280px"}},[a("span",{staticClass:"title width-5"},[t._v("详情banner")]),a("img",{staticClass:"mgr-1 banner-img",attrs:{src:t.dataList.advertBannerImgUrl,alt:"banner"}})]),a("span",{staticClass:"flex",staticStyle:{width:"280px"}},[a("span",{staticClass:"title width-5"},[t._v("logo图")]),a("img",{staticClass:"mgr-1 banner-img",attrs:{src:t.dataList.advertLogoImgUrl,alt:"logo"}})])])],2):t._e(),a("div",{attrs:{slot:"footer"},slot:"footer"})])],1)},n=[],r=a("3add"),s=a.n(r),o=a("7f80"),l=a("365c");function c(t,e,a,i,n,r,s){try{var o=t[r](s),l=o.value}catch(c){return void a(c)}o.done?e(l):Promise.resolve(l).then(i,n)}function d(t){return function(){var e=this,a=arguments;return new Promise(function(i,n){var r=t.apply(e,a);function s(t){c(r,i,n,s,o,"next",t)}function o(t){c(r,i,n,s,o,"throw",t)}s(void 0)})}}var u={name:"ModalDetail",data:function(){return{types:["单人团","多人团"],dataList:{groupType:-1},modalShow:!1,descConfig:[]}},created:function(){this.descConfig[0]=[["name","活动名称"],["startTime","活动开始时间"],["openDrawTime","活动开奖时间"],["drawDailyShopList","投放门店"],["bigPrize","活动大奖"],["normalPrize","阳光普照奖"],["winningRemarks","领奖说明"],["joinUserLevelName","参与对象"],["couponName","参加用券"],["drawRuleRemarks","抽奖规则"]],this.descConfig[1]=[["name","活动名称"],["startTime","活动开始时间"],["openDrawTime","活动开奖时间"],["drawDailyShopList","投放门店"],["bigPrize","活动大奖"],["normalPrize","阳光普照奖"],["winningRemarks","领奖说明"],["joinUserLevelName","参与对象"],["maxOpenGroupCount","开团总次数"],["groupPlayerCount","成团人数"],["userOpenGroupCount","开团次数"],["openGroupMinutes","开团有效时间"],["openGroupFee","开团消耗U贝"],["userOpenGroupCount","参团次数"],["joinGroupFee","参团消耗U贝"],["isFailureBackFee","团失败u贝返还"],["drawRuleRemarks","抽奖规则"]]},methods:{handleNone:function(t){return""===t||"string"!==typeof t?"":"- ".concat(t)},handleAddress:function(t){if(!t)return"";var e=t,a="";return"string"===typeof e.shopName&&(a=" "+e.shopName),e.provinceName+" "+this.handleNone(e.cityName)+" "+this.handleNone(e.countryName)+a},show:function(){var t=d(s.a.mark(function t(e){var a,i,n=this;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.id,i=l["a"],this.$Spin.show(),setTimeout(function(t){n.$Spin.hide()},1e4),t.next=6,Object(o["f"])(i+"/drawDaily/activity/selectById",{id:a}).then(function(t){if(console.log(t),200==t.code){var e=t.data;1==e.isFailureBackFee?e.isFailureBackFee="是":e.isFailureBackFee="否",n.dataList=e}}).catch(function(t){console.log(t,"modal_detail")});case 6:this.$Spin.hide(),this.modalShow=!0;case 8:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()}},m=u,p=(a("cc79"),a("6691")),g=Object(p["a"])(m,i,n,!1,null,"0849aec6",null);e["default"]=g.exports},"6bb4":function(t,e,a){},a868:function(t,e,a){"use strict";a.r(e);var i,n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"draw-edit"},[a("Modal",{attrs:{title:t.title,width:"800","footer-hide":"",closable:!0,"mask-closable":!1,styles:{top:"20px"}},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[t.modalShow?a("div",{staticClass:"draw-content"},[a("Form",{attrs:{"label-width":30}},[a("FormItem",[a("RadioGroup",{on:{"on-change":t.radioGroupChange},model:{value:t.groupType,callback:function(e){t.groupType=e},expression:"groupType"}},t._l(t.groupTypeOptions,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}),1)],1)],1),a("keep-alive",[a(t.compName,{tag:"component",attrs:{groupType:t.groupType},on:{changeComp:t.changeComp,"closeFormModal-event":t.closeFormModal}})],1)],1):t._e()])],1)},r=[],s=(a("7f80"),a("591a"),a("39b3")),o=a("48c4");function l(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var c={name:"draw-edit",components:(i={},l(i,s["default"].name,s["default"]),l(i,o["default"].name,o["default"]),i),props:{id:[String,Number],action:{type:Object,default:function(){return{type:"add"}}}},watch:{modalShow:function(){var t=2==this.groupType?"多人团":"单人团",e="add"==this.action.type?"新增抽奖":"修改抽奖";this.title="".concat(e,"-").concat(t)},groupType:function(t,e){var a=2==this.groupType?"多人团":"单人团",i="add"==this.action.type?"新增抽奖":"修改抽奖";this.title="".concat(i,"-").concat(a),this.$store.commit("g_setData",{groupType:this.groupType})},action:{handler:function(t,e){this.modalShow=!0;var a=this.action,i=a.type,n=void 0===i?"add":i,r=a.groupType,s=a.data;this.groupType=r,"add"==n?this.title="新增抽奖":(this.title="修改抽奖",this.$store.commit("g_setData",{drawType:"edit",groupType:this.groupType,drawData:s}))},deep:!0}},computed:{groupTypeOptions:function(){var t=this;return this.groupTypeList.filter(function(e){return"add"==t.action.type?e:e.value==t.groupType})},compName:function(){return 2==this.groupType?s["default"].name:o["default"].name}},data:function(){return{title:"新增抽奖",modalShow:!1,groupType:2,groupTypeList:[{value:2,label:"多人团"},{value:1,label:"单人团"}],data:{}}},created:function(){},methods:{changeComp:function(t){this.compName=t},closeFormModal:function(){this.modalShow=!1,this.$emit("refresh")},radioGroupChange:function(t){this.$store.commit("g_setData",{drawType:"add_cache",groupType:t})}}},d=c,u=(a("da50"),a("6691")),m=Object(u["a"])(d,n,r,!1,null,"cda18ab8",null);e["default"]=m.exports},cc79:function(t,e,a){"use strict";var i=a("6bb4"),n=a.n(i);n.a},da50:function(t,e,a){"use strict";var i=a("1fe3"),n=a.n(i);n.a},db3f:function(t,e,a){"use strict";a.r(e);var i,n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"xxx"},[a("ModalDetail",{ref:"modalDetail",tag:"component"}),a("div",{staticClass:"query-row"},[a("Card",{staticStyle:{"margin-bottom":"2px"},attrs:{bordered:!1}},[a("Form",{attrs:{inline:""}},[a("FormItem",{attrs:{label:"团类型","label-width":60}},[a("Select",{staticStyle:{width:"100px"},model:{value:t.searchData.groupType,callback:function(e){t.$set(t.searchData,"groupType",e)},expression:"searchData.groupType"}},t._l(t.groupTypeList,function(e){return a("Option",{key:e.value+e.label,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{label:"状态","label-width":60}},[a("Select",{staticStyle:{width:"100px"},model:{value:t.searchData.status,callback:function(e){t.$set(t.searchData,"status",e)},expression:"searchData.status"}},t._l(t.statusList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{label:"抽奖id：","label-width":85}},[a("Input",{staticStyle:{width:"120px"},attrs:{type:"text",placeholder:"请输入"},model:{value:t.searchData.id,callback:function(e){t.$set(t.searchData,"id",e)},expression:"searchData.id"}})],1),a("FormItem",{attrs:{label:"抽奖名称：","label-width":85}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入"},model:{value:t.searchData.name,callback:function(e){t.$set(t.searchData,"name",e)},expression:"searchData.name"}})],1),a("FormItem",{attrs:{label:"抽奖时间：","label-width":100}},[a("DatePicker",{staticStyle:{display:"inline-block",width:"200px"},attrs:{type:"daterange",placeholder:"请选择抽奖日期",value:t.daterange},on:{"on-change":t.changeStartDate}})],1),a("FormItem",{attrs:{"label-width":0}},[a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:function(e){return t.queryTableList()}}},[t._v("搜索")]),a("Button",{staticClass:"marginLeft20",attrs:{icon:"md-refresh"},on:{click:t.reset}},[t._v("重置")])],1)],1),a("Row",{attrs:{type:"flex",justify:"start"}},[a("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:function(e){return t.addOrEdit("add")}}},[t._v("新增")]),a("Button",{staticClass:"marginLeft20",attrs:{icon:"md-refresh"},on:{click:t.refresh}},[t._v("刷新")]),a("Button",{staticClass:"marginLeft20",attrs:{type:"primary"},on:{click:function(e){return t.changeComp("schedule-daily")}}},[t._v("每日排期")]),a("Button",{staticClass:"marginLeft20",attrs:{type:"primary"},on:{click:function(e){return t.changeComp("bannerway")}}},[t._v("抽奖团banner位")])],1)],1)],1),a("Card",{attrs:{bordered:!1}},[a("Table",{attrs:{border:"","show-index":!0,loading:t.loading,columns:t.columns,data:t.tableData},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.row;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"},on:{click:function(e){return t.checkDetailsFn(i)}}},[t._v("查看")]),0==i.status||5==i.status?[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.addOrEdit("edit",i)}}},[t._v("编辑")]),a("Button",{attrs:{type:"success",size:"small"},on:{click:function(e){return t.updateOperationStatus(i)}}},[t._v("上架")])]:1==i.status?[a("Button",{attrs:{type:"warning",size:"small"},on:{click:function(e){return t.underUpdateOperationStatus(i)}}},[t._v("下架")])]:2==i.status?[a("Button",{staticStyle:{"margin-left":"5px"},attrs:{type:"error",size:"small"},on:{click:function(e){return t.underUpdateOperationStatus(i)}}},[t._v("紧急下架")])]:t._e()]}},{key:"createAndModifiedBy",fn:function(e){var i=e.row;return[a("span",[t._v(t._s(i.modifiedBy||i.createBy))])]}},{key:"gmtModifiedAndCreate",fn:function(e){var i=e.row;return[a("span",[t._v(t._s(i.gmtModified||i.gmtCreate))])]}},{key:"totalPlayer",fn:function(e){var i=e.row;return[a("a",{staticClass:"underline",attrs:{href:"javascript:;"},on:{click:function(e){return t.showTotalPlayer(i.id)}}},[t._v(t._s(i.totalPlayer))])]}},{key:"totalTicket",fn:function(e){var i=e.row;return[a("a",{staticClass:"underline",attrs:{href:"javascript:;"},on:{click:function(e){return t.showTotalTicket(i.id)}}},[t._v(t._s(i.totalTicket))])]}},{key:"result",fn:function(e){var i=e.row;return[a("Button",{attrs:{type:"success",size:"small"},on:{click:function(e){return t.queryResult(i)}}},[t._v("查看")])]}}])}),a("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[a("Page",{attrs:{"show-total":"","show-elevator":"",total:t.page.total,current:t.page.pageNum,"page-size":t.page.pageSize},on:{"on-change":t.changeCurrent}})],1)],1),a("Modal",{attrs:{closable:!0},model:{value:t.modalTotalPlayer,callback:function(e){t.modalTotalPlayer=e},expression:"modalTotalPlayer"}},[a("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"ios-information-circle"}}),a("span",[t._v("报名成功用户")])],1),a("div",{staticClass:"table-box"},[a("Table",{attrs:{border:"","show-index":!0,columns:t.totalPlayerColumns,data:t.totalPlayerTableData}})],1)]),a("Modal",{attrs:{closable:!0},model:{value:t.modalTotalTicket,callback:function(e){t.modalTotalTicket=e},expression:"modalTotalTicket"}},[a("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"ios-information-circle"}}),a("span",[t._v("抽奖券")])],1),a("div",{staticClass:"table-box"},[a("Table",{attrs:{border:"","show-index":!0,columns:t.totalTicketColumns,data:t.totalTicketTableData}})],1)]),a("Modal",{attrs:{closable:!0,"mask-closable":!1,width:"400"},model:{value:t.undercarriage,callback:function(e){t.undercarriage=e},expression:"undercarriage"}},[a("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"ios-information-circle"}}),a("span",[t._v("下架抽奖活动")])],1),a("div",[a("Form",{ref:"formValidate",attrs:{"label-position":"top",model:t.formValidate,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"填写原因：",prop:"reason"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"填写下架原因..."},model:{value:t.formValidate.reason,callback:function(e){t.$set(t.formValidate,"reason",e)},expression:"formValidate.reason"}})],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"error",size:"large"},on:{click:function(e){return t.putoff("formValidate")}}},[t._v("确认")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.cancelHandleReset("formValidate")}}},[t._v("取消")])],1)]),a("draw-edit",{attrs:{id:t.id,action:t.action},on:{refresh:t.queryTableList}}),a("winning-list",{attrs:{modalWinningList:t.modalWinningList,id:t.id}})],1)},r=[],s=a("3add"),o=a.n(s),l=a("a25d"),c=a("5623"),d=a("7f80"),u=a("6797"),m=a("e6e6"),p=a("a868"),g=a("ed2d"),f=a("6571");function h(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,i)}return a}function y(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?h(a,!0).forEach(function(e){w(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):h(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function v(t,e,a,i,n,r,s){try{var o=t[r](s),l=o.value}catch(c){return void a(c)}o.done?e(l):Promise.resolve(l).then(i,n)}function b(t){return function(){var e=this,a=arguments;return new Promise(function(i,n){var r=t.apply(e,a);function s(t){v(r,i,n,s,o,"next",t)}function o(t){v(r,i,n,s,o,"throw",t)}s(void 0)})}}function w(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var k={name:"draw-config",components:(i={ModalDetail:f["default"]},w(i,p["default"].name,p["default"]),w(i,g["default"].name,g["default"]),i),data:function(){return{action:{id:Math.random(),type:"add"},id:"",modalTotalPlayer:!1,modalTotalTicket:!1,modalWinningList:!1,undercarriage:!1,formValidate:{reason:""},ruleValidate:{reason:[{required:!0,message:"下架原因不能为空",trigger:"blur"},{type:"string",min:10,message:"原因不得少于10个字",trigger:"blur"}]},groupTypeList:[{value:0,label:"全部"},{value:1,label:"单人团"},{value:2,label:"多人团"}],statusList:[{value:"all",label:"全部"},{value:"0",label:"未上架"},{value:"1",label:"未开始"},{value:"2",label:"进行中"},{value:"3",label:"开奖中"},{value:"4",label:"已开奖"},{value:"5",label:"已下架"},{value:"6",label:"紧急下架"}],daterange:[],searchData:{groupType:0,id:"",name:"",status:"all",operationType:"",startTime:"",endTime:""},loading:!1,page:{pageNum:1,pageSize:10,total:0},columns:m["b"],totalPlayerColumns:m["d"],totalTicketColumns:m["e"],tableData:[],totalPlayerTableData:[],totalTicketTableData:[]}},created:function(){this.queryTableList()},methods:{addOrEdit:function(){var t=b(o.a.mark(function t(e,a){var i,n,r,s;return o.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(i=null,n=2,"add"!=e){t.next=6;break}this.$store.commit("g_setData",{drawType:"add",groupType:n,multiFormData:JSON.parse(JSON.stringify(l["a"])),singleFormData:JSON.parse(JSON.stringify(c["a"]))}),t.next=34;break;case 6:if("edit"!=e){t.next=34;break}if(0==a.status||5==a.status){t.next=9;break}return t.abrupt("return",this.msgErr("创建后未上架、已下架的活动，才可编辑"));case 9:return r="/drawDaily/activity/selectById",t.next=12,Object(d["g"])(r,{id:a.id});case 12:if(s=t.sent,200!=s.code){t.next=33;break}i=s.data,0==i.drawDailyShopList.length&&i.drawDailyShopList.push({id:Math.random(),provinceCode:null,cityCode:null,countryCode:null,shopId:null,shopName:null,index:this.index,status:1}),i.drawDailyShopList=i.drawDailyShopList.map(function(t){return t.id||(t.id=Math.random()),t}),i.bigPrizeTemp=this.formatPrizeData(i.bigPrize),i.normalPrizeTemp=this.formatPrizeData(i.normalPrize),i.bigPrizeGifImageList=[],i.normalPrizeGifImageList=[],i.bigPrize.giftImg&&(i.bigPrizeGifImageList=[{imgUrl:i.bigPrize.giftImg}]),i.normalPrize.giftImg&&(i.normalPrizeGifImageList=[{imgUrl:i.normalPrize.giftImg}]),i.defaultDrawActiveList=[],i.defaultBannerList=[],i.defaultLogoList=[],i.drawActiveUrl&&(i.defaultDrawActiveList=[{imgUrl:i.drawActiveUrl}]),i.advertBannerImgUrl&&(i.defaultBannerList=[{imgUrl:i.advertBannerImgUrl}]),i.advertLogoImgUrl&&(i.defaultLogoList=[{imgUrl:i.advertLogoImgUrl}]),n=i.groupType,this.$store.commit("g_setData",{drawType:"edit",groupType:n,drawData:JSON.parse(JSON.stringify(i))}),t.next=34;break;case 33:return t.abrupt("return",this.$Message.error(s.msg));case 34:this.action={id:Math.random(),type:e,groupType:n,data:i};case 35:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),formatPrizeData:function(t){var e={type:1,prizeName1:"",prizeNum1:1,giftImg:"",couponType:2,prizeReferId:null,prizeNum2:"",prizeNum3:""},a=t.type,i=t.prizeName,n=t.prizeNum,r=t.giftImg,s=t.couponType,o=t.prizeReferId;return e.type=a,1==a?(e.prizeName1=i,e.prizeNum1=n,e.giftImg=r):2==a?(e.couponType=s||2,e.prizeReferId=o,e.prizeName2=i):e.prizeNum3=n,e},checkDetailsFn:function(t){this.$refs.modalDetail.show(t)},changeComp:function(t){this.$emit("changeComp",t)},queryResult:function(t){this.modalWinningList=Math.random(),this.id=t.id},showTotalPlayer:function(t){this.modalTotalPlayer=!0,this.id=t,this.queryTotalPlayerTableList()},queryTotalPlayerTableList:function(){var t=this;Object(u["ic"])({drawId:this.id}).then(function(e){200==e.code?t.totalPlayerTableData=e.data:t.$Message.error(e.code+" 数据加载失败!",3)})},showTotalTicket:function(t){this.modalTotalTicket=!0,this.id=t,this.queryTotalTicketTableList()},queryTotalTicketTableList:function(){var t=this;Object(u["jc"])({drawId:this.id}).then(function(e){200==e.code?t.totalTicketTableData=e.data:t.$Message.error(e.code+" 数据加载失败!",3)})},cancelHandleReset:function(t){var e=this;this.undercarriage=!1,this.$nextTick(function(){e.$refs[t].resetFields()})},putoff:function(t){var e=this;this.$refs[t].validate(function(a){a&&Object(u["Wb"])({drawId:e.id,reason:e.formValidate.reason}).then(function(a){200==a.code?(e.msgOk("下架成功"),e.queryTableList()):e.msgErr(a.msg),e.cancelHandleReset(t)})})},updateBanner:function(t){},updateOperationStatus:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"<p>确定要上架吗？</p>",onOk:function(){Object(u["Xb"])({drawId:t.id}).then(function(t){200==t.code?(e.msgOk("上架成功"),e.queryTableList()):e.msgErr(t.msg)})},onCancel:function(){e.msgOk("上架已取消")}})},underUpdateOperationStatus:function(t){this.undercarriage=!0,this.id=t.id},changeStartDate:function(t){this.searchData.startTime=t[0],this.searchData.endTime=t[1]},refresh:function(){this.queryTableList(this.page.pageNum)},changeCurrent:function(t){this.queryTableList(t)},queryTableList:function(t){var e=this;this.page.pageNum=t||1,this.loading=!0;var a=this.searchData.status;"all"==a&&(a=""),Object(u["dc"])(y({},this.searchData,{status:a},this.page)).then(function(t){200==t.code?(e.tableData=t.data.records,e.page.pageNum=t.data.current,e.page.total=t.data.total,e.page.pageSize=t.data.size,e.loading=!1):(e.$Message.error(t.code+" 数据加载失败!",3),e.loading=!1)})},add:function(){},reset:function(){this.daterange=[],this.searchData={groupType:0,id:"",name:"",status:"all",operationType:"",startTime:"",endTime:""},this.page={pageNum:1,pageSize:10},this.queryTableList()},msgOk:function(t){this.$Message.info({content:t,duration:3})},msgErr:function(t){this.$Message.error({content:t,duration:3})}}},T=k,L=(a("073a"),a("6691")),x=Object(L["a"])(T,n,r,!1,null,"3e4e1870",null);e["default"]=x.exports},e6e6:function(t,e,a){"use strict";a.d(e,"d",function(){return i}),a.d(e,"e",function(){return n}),a.d(e,"c",function(){return r}),a.d(e,"a",function(){return s}),e["b"]=[{title:"操作",align:"center",width:200,fixed:"left",slot:"action"},{type:"index",width:60,title:"序号",align:"center"},{key:"id",title:"ID",align:"center",width:120},{title:"状态",key:"statusName",align:"center",width:120},{title:"团类型",key:"groupType",align:"center",minWidth:100},{key:"name",title:"抽奖名称",align:"center",minWidth:140},{title:"大奖",key:"bigPrizeName",align:"center",minWidth:140},{title:"阳光普照奖",key:"normalPrizeName",align:"center",minWidth:140},{title:"抽奖开始时间",key:"startTime",align:"center",width:170},{title:"抽奖开奖时间",key:"openDrawTime",align:"center",width:170},{title:"广告主",key:"advertName",align:"center",minWidth:80},{title:"最近修改人",key:"createAndModifiedBy",align:"center",minWidth:105,slot:"createAndModifiedBy"},{title:"最近修改时间",key:"gmtModifiedAndCreate",align:"center",width:170,slot:"gmtModifiedAndCreate"},{title:"报名成功用户",key:"totalPlayer",align:"center",minWidth:120,slot:"totalPlayer"},{title:"排列五数字",key:"winningRefValue",align:"center",minWidth:140},{title:"抽奖券",key:"totalTicket",align:"center",minWidth:140,slot:"totalTicket"},{title:"开奖结果",key:"winningRefValue",align:"center",minWidth:140,slot:"result"}];var i=[{title:"昵称",key:"nickName",align:"center"},{title:"手机号",key:"phoneNumber",align:"center"},{title:"报名时间",key:"join_time",align:"center"}],n=[{title:"昵称",key:"nickName",align:"center"},{title:"奖券",key:"ticket_code",align:"center"},{title:"手机号",key:"phoneNumber",align:"center"}],r=[{title:"昵称",key:"nickName",align:"center"},{title:"奖项",key:"prize",align:"center"},{title:"收件人",key:"realName",align:"center"},{title:"手机号",key:"phoneNumber",align:"center"},{title:"邮寄地址",key:"address",align:"center"},{title:"发放状态",key:"statusName",align:"center"},{title:"奖品发送失败备注",key:"memo",align:"center"},{title:"物流信息",key:"logistics",align:"center",slot:"logistics"}],s=[{title:"操作",align:"center",width:200,fixed:"left",slot:"action"},{title:"抽奖id或链接",key:"nickName",align:"center",slot:"idLinkUrl"},{title:"图片",key:"imgUrl",align:"center",slot:"img"},{title:"最近修改人",key:"createAndModifiedBy",align:"center",minWidth:105,slot:"createAndModifiedBy"},{title:"最近修改时间",key:"gmtModifiedAndCreate",align:"center",width:170,slot:"gmtModifiedAndCreate"},{title:"上架时间",key:"onlineTime",align:"center"}]},e914:function(t,e,a){},ed2d:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"winningList"},[a("Modal",{attrs:{closable:!0,width:"800"},model:{value:t.modalDetail,callback:function(e){t.modalDetail=e},expression:"modalDetail"}},[a("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"ios-information-circle"}}),a("span",[t._v("查看开奖结果")])],1),a("div",{staticClass:"table-box"},[a("Table",{attrs:{border:"",columns:t.columns,data:t.tableData},scopedSlots:t._u([{key:"logistics",fn:function(e){var i=e.row;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small",disabled:1!=i.prizeType},on:{click:function(e){return t.showLogistics(i)}}},[t._v("编辑")])]}}])}),a("Modal",{attrs:{closable:!0,width:"400"},model:{value:t.modalLogistics,callback:function(e){t.modalLogistics=e},expression:"modalLogistics"}},[a("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"ios-information-circle"}}),a("span",[t._v("填写物流信息")])],1),a("div",[a("Form",{ref:"formLogistics",attrs:{"label-position":"left",model:t.logistics,rules:t.ruleLogisticsValidate,"label-width":90}},[a("FormItem",{attrs:{label:"物流公司：",prop:"logisticsName"}},[a("Input",{attrs:{type:"text",placeholder:"物流公司"},model:{value:t.logistics.logisticsName,callback:function(e){t.$set(t.logistics,"logisticsName",e)},expression:"logistics.logisticsName"}})],1),a("FormItem",{attrs:{label:"物流单号：",prop:"logisticsOrderNo"}},[a("Input",{attrs:{type:"text",placeholder:"物流单号"},model:{value:t.logistics.logisticsOrderNo,callback:function(e){t.$set(t.logistics,"logisticsOrderNo",e)},expression:"logistics.logisticsOrderNo"}})],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"error",size:"large"},on:{click:function(e){return t.updateLogistics("formLogistics")}}},[t._v("确认")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.cancelUpdateLogistics("formLogistics")}}},[t._v("取消")])],1)])],1)])],1)},n=[],r=a("3add"),s=a.n(r),o=a("6797"),l=a("e6e6");function c(t,e,a,i,n,r,s){try{var o=t[r](s),l=o.value}catch(c){return void a(c)}o.done?e(l):Promise.resolve(l).then(i,n)}function d(t){return function(){var e=this,a=arguments;return new Promise(function(i,n){var r=t.apply(e,a);function s(t){c(r,i,n,s,o,"next",t)}function o(t){c(r,i,n,s,o,"throw",t)}s(void 0)})}}var u={name:"winning-list",props:{modalWinningList:[Boolean,Number],id:[String,Number]},watch:{modalWinningList:function(){console.log(this.modalWinningList,this.id),this.modalDetail=!0,this.queryResult(this.id)}},data:function(){return{modalDetail:!1,modalLogistics:!1,logistics:{winningId:"",logisticsId:"",logisticsName:"",logisticsOrderNo:""},ruleLogisticsValidate:{logisticsName:[{required:!0,message:"物流公司不能为空",trigger:"blur"}],logisticsOrderNo:[{required:!0,message:"物流单号不能为空",trigger:"blur"}]},loading:!1,columns:l["c"],tableData:[]}},created:function(){},methods:{queryResult:function(){var t=d(s.a.mark(function t(e){var a,i;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.modalDetail=!0,t.next=3,Object(o["mc"])({drawId:e});case 3:a=t.sent,200==a.code?(i=a.data.map(function(t){return 1==t.isAwards?t.prize="大奖":t.prize="普通奖",t}),this.tableData=i):this.msgErr(a.msg);case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),showLogistics:function(t){var e=this;this.modalLogistics=!0,Object.keys(this.logistics).forEach(function(a){e.logistics[a]=t[a]})},cancelUpdateLogistics:function(t){var e=this;this.modalLogistics=!1,this.$nextTick(function(){e.$refs[t].resetFields()})},updateLogistics:function(t){var e=this;this.$refs[t].validate(function(a){a&&Object(o["zc"])(e.logistics).then(function(a){200==a.code?(e.msgOk("更新物流信息成功"),e.queryResult(e.id)):e.msgErr(a.msg),e.cancelUpdateLogistics(t)})})},showTotalPlayer:function(t){this.modalTotalPlayer=!0,this.id=t,this.queryTotalPlayerTableList()},msgOk:function(t){this.$Message.info({content:t,duration:3})},msgErr:function(t){this.$Message.error({content:t,duration:3})}}},m=u,p=(a("6353"),a("6691")),g=Object(p["a"])(m,i,n,!1,null,"28b37144",null);e["default"]=g.exports}}]);