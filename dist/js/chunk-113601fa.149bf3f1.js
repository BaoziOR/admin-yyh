(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-113601fa"],{"0164":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",[a("div",{staticStyle:{height:"60px"},attrs:{slot:"title"},slot:"title"},[a("span",{staticStyle:{"font-size":"20px"}},[a("span",{staticStyle:{color:"#f00","font-size":"20px"}},[t._v("*")]),t._v("\n      运营位类型：\n    ")]),a("RadioGroup",{attrs:{type:"button"},model:{value:t.operationType,callback:function(e){t.operationType=e},expression:"operationType"}},["hp_window"==t.operationType||""==t.operationType?a("Radio",{staticStyle:{"margin-left":"20px","border-radius":"4px"},attrs:{label:"hp_window"}},[t._v("首页弹窗")]):t._e(),"yf_zt"==t.operationType||""==t.operationType?a("Radio",{staticStyle:{"margin-left":"20px","border-radius":"4px"},attrs:{label:"yf_zt"}},[t._v("专题活动")]):t._e()],1),t.operationType?t._e():a("Button",{staticStyle:{"margin-left":"50px"},attrs:{icon:"arrow-left-c",type:"dashed"},on:{click:t.back}},[t._v("返回列表")])],1),a("div",["hp_window"==t.operationType?a("i-form",{attrs:{"label-width":180}},[a("Form-item",{attrs:{label:"小程序appid：",required:""}},[a("Select",{staticStyle:{width:"250px"},attrs:{disabled:1!=t.operationStatus},model:{value:t.operation_data.appid,callback:function(e){t.$set(t.operation_data,"appid",e)},expression:"operation_data.appid"}},t._l(t.appIdData,function(e,i){return a("Option",{key:i,attrs:{value:e.appid}},[t._v(t._s(e.appName))])}),1)],1),a("Form-item",{attrs:{label:"标题：",required:""}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入",disabled:3==t.operationStatus},model:{value:t.operation_data.name,callback:function(e){t.$set(t.operation_data,"name",e)},expression:"operation_data.name"}})],1),a("Form-item",{attrs:{label:"弹窗图片：",required:""}},[t._l(t.uploadList,function(t,e){return a("div",{key:e,staticStyle:{float:"left",width:"90px",height:"90px","line-height":"90px","margin-right":"10px",border:"1px dashed #dcdee2",background:"#fff"}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.url}})])}),3!=t.operationStatus?a("div",{staticStyle:{display:"inline-block"}},[a("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"90px"},attrs:{type:"drag",format:["jpg","jpeg","png","bmp"],"on-success":t.handleSuccess1,action:t.url,accept:"image","max-size":1024,"on-exceeded-size":t.handleMaxSize,"on-format-error":t.formatError,defaultList:t.uploadList,headers:t.userToken,"show-upload-list":!1}},[a("div",{staticStyle:{width:"90px",height:"90px","line-height":"90px"}},[a("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),a("p",[t._v("选择弹窗图片 (不大于1M, JPG/PNG/JPEG/BMP，建议图片尺寸580*560）")])],1):t._e()],2),a("Form-item",{attrs:{label:"开始时间：",required:""}},[a("DatePicker",{staticStyle:{width:"250px"},attrs:{type:"date",placeholder:"选择开始日期",format:"yyyy-MM-dd",value:t.operation_data.startDate,options:t.options3,editable:!1,clearable:!1,disabled:3==t.operationStatus},on:{"on-change":t.time1,"on-clear":t.clearTime1}})],1),a("Form-item",{attrs:{label:"结束时间：",required:""}},[a("DatePicker",{staticStyle:{width:"250px"},attrs:{type:"date",placeholder:"选择结束日期",format:"yyyy-MM-dd",value:t.operation_data.endDate,options:t.options3,editable:!1,clearable:!1,disabled:3==t.operationStatus},on:{"on-change":t.time2,"on-clear":t.clearTime2}})],1),a("Form-item",{attrs:{label:"弹窗类型：",required:""}},[a("Select",{staticStyle:{width:"200px"},attrs:{disabled:3==t.operationStatus},model:{value:t.operation_data.showType,callback:function(e){t.$set(t.operation_data,"showType",e)},expression:"operation_data.showType"}},["hp_window"==t.operationType?a("Option",{attrs:{value:"2"}},[t._v("跳转内部页")]):t._e(),"hp_window"==t.operationType?a("Option",{attrs:{value:"3"}},[t._v("跳转外部小程序")]):t._e(),"hp_window"==t.operationType?a("Option",{attrs:{value:"5"}},[t._v("新人奖励")]):t._e()],1)],1),"2"==t.operation_data.showType?a("Form-item",{attrs:{label:"跳转内部链接：",required:""}},[a("Input",{staticStyle:{width:"400px"},attrs:{type:"text",placeholder:"请输入...",disabled:3==t.operationStatus},model:{value:t.operation_data.pagePath,callback:function(e){t.$set(t.operation_data,"pagePath",e)},expression:"operation_data.pagePath"}})],1):t._e(),"3"==t.operation_data.showType?a("Form-item",{attrs:{label:"外部小程序信息：",required:""}},[a("Input",{staticStyle:{width:"400px"},attrs:{type:"text",placeholder:"请输入json字符串，打开小程序信息：appId,path,extraData,envVersion",disabled:3==t.operationStatus},model:{value:t.operation_data.miniAppInfo,callback:function(e){t.$set(t.operation_data,"miniAppInfo",e)},expression:"operation_data.miniAppInfo"}})],1):t._e(),a("Form-item",{style:{"margin-top":"40px"}},[a("i-button",{style:{width:"150px","margin-right":"20px"},attrs:{type:"primary",disabled:3==t.operationStatus,size:"large"},on:{click:t.submit}},[t._v("确定")]),a("i-button",{attrs:{size:"large",icon:"arrow-left-c"},on:{click:t.backMsg}},[t._v("返回列表")])],1)],1):t._e()],1),"yf_zt"==t.operationType?a("div",[a("thematic-operation",{attrs:{thematicStatus:t.thematicStatus,thematicItem:t.thematicItem},on:{changeStatus:t.showStatus}})],1):t._e()])},o=[],r=(a("7f80"),a("6797")),n=a("365c"),s=a("949f"),p={props:{operationStatus:Number,operationItem:Object},components:{thematicOperation:s["default"]},data:function(){return{operationType:"",operation_data:{appid:"",bigImgUrl:"",endDate:"",imgUrl:"",miniAppInfo:"",name:"",operationType:"",pagePath:"",pagePathType:"",showType:"",sort:1,startDate:"",operationId:null},imgUrl:"",bigImgUrl:"",appStoreList:[],miniAppList:[],createNew:!0,scenes:[],url:n["g"],editInfo:null,pagePathType:[{label:"优惠券",value:"coupon"},{label:"自定义",value:"customized"}],categoryList:[],couponList:[],flag_Submit:!1,userToken:{},uploadList:[],uploadList1:[],appIdData:[],options3:{disabledDate:function(t){return t&&t.valueOf()<Date.now()-864e5}},specialTopic:"请选择",specialTopicDisplay:!1,totalSize:0,current:1,specialTopicList:[],columns1:[{title:"专题内容名称",align:"center",minWidth:160,key:"name"},{title:"专题描述",align:"center",minWidth:160,key:"topicDesc"}],thematicPage:!1,thematicStatus:1,thematicItem:{}}},watch:{"operation_data.appid":{handler:function(t,e){this.operation_data.appid=t,this.changePagePathType(this.operation_data.pagePathType)},deep:!0}},created:function(){this.getMiniAppFn(),this.editInputData(this.operationStatus),this.userToken={jwttoken:localStorage.getItem("jwttoken")}},methods:{showStatus:function(t){0==t&&this.back()},editInputData:function(t){if(2==t||3==t){if(this.createNew=!1,this.operationType=this.operationItem.operationType,"yf_zt"==this.operationType)return this.thematicStatus=this.operationStatus,void(this.thematicItem=this.operationItem);this.operation_data.operationType=this.operationItem.operationType,this.operation_data.appid=this.operationItem.appid,this.operation_data.operationId=this.operationItem.operationId,this.operation_data.name=this.operationItem.name,this.operation_data.startDate=this.operationItem.startDate,this.operation_data.endDate=this.operationItem.endDate,this.operation_data.showType=this.operationItem.showType+"",this.operation_data.pagePathType=this.operationItem.pagePathType,this.operation_data.imgUrl=this.operationItem.imgUrl,this.imgUrl=this.operationItem.imgUrl,this.uploadList=[{url:this.operationItem.imgUrl}],this.operation_data.bigImgUrl=this.operationItem.bigImgUrl||"",this.bigImgUrl=this.operationItem.bigImgUrl||"",this.uploadList1=[{url:this.operationItem.bigImgUrl}],this.operation_data.pagePath=this.operationItem.pagePath||"",this.operation_data.miniAppInfo=this.operationItem.miniAppInfo||"",this.operation_data.sort=this.operationItem.sort}},getMiniAppFn:function(){var t=this;Object(r["Bb"])().then(function(e){200==e.code?t.appIdData=e.data:t.msgErr("小程序appId获取失败")})},backMsg:function(){var t=this;this.$Modal.confirm({title:"提示",content:"<p>信息将不被保存</p>",okText:"离开",cancelText:"再看看",onOk:function(){t.back()},onCancel:function(){}})},back:function(){var t={operationType:this.operationType,type:!1};this.$emit("changeStatus",t)},handleUploadicon:function(){},handleSuccess1:function(t,e){if(200==t.code){this.operation_data.imgUrl=t.image_url;var a=[{url:t.image_url}];this.uploadList=a,this.msgOk("上传图片成功")}else this.msgErr("上传图片失败，请重新上传")},handleSuccess2:function(t,e){if(200==t.code){this.operation_data.bigImgUrl=t.image_url;var a=[{url:t.image_url}];this.uploadList1=a,this.msgOk("上传图片成功")}else this.msgErr("上传图片失败，请重新上传")},handleMaxSize:function(){this.msgErr("上传图片不能超过1MB,请重新上传")},formatError:function(){this.msgErr("只能上传jpg,jpeg,png,bmp格式,请重新上传")},handleGoodsSuccess:function(t,e){this.goodsFile.attachedName=t.fileName,this.goodsFile.attachedFile=t.filePath,console.log(t)},handleBeforeGoodsUpload:function(){this.$refs.uploadGoods.clearFiles()},handleGoodsRemove:function(){this.goodsFile.attachedName="",this.goodsFile.attachedFile=""},submit:function(){var t=this,e="yf_zt"==this.operationType?"专题活动":"banner"==this.operationType?"banner":"弹窗";if(this.operation_data.appid)if(this.operation_data.name)if(this.operation_data.imgUrl)if(this.operation_data.startDate)if(this.operation_data.endDate)if(Date.parse(this.operation_data.startDate)>Date.parse(this.operation_data.endDate))this.$Message.error(e+"开始时间不可大于"+e+"结束时间！",3);else if(this.operation_data.showType)if("1"!=this.operation_data.showType||"banner"!=this.operationType||this.operation_data.bigImgUrl)if("hv_coupon"!=this.operationType&&"banner"!=this.operationType||this.operation_data.sort)if("2"==this.operation_data.showType&&(this.operation_data.miniAppInfo=""),"yf_zt"==this.operationType||"2"!=this.operation_data.showType||this.operation_data.pagePath)if("3"==this.operation_data.showType&&(this.operation_data.pagePath=""),"3"!=this.operation_data.showType||this.operation_data.miniAppInfo){if("yf_zt"==this.operationType){if(!this.operation_data.showType)return void this.msgErr("请选择弹框类型");if(!this.operation_data.pagePath)return void this.msgErr("请选择专题活动")}this.operation_data.operationType=this.operationType,null==this.operation_data.operationId?Object(r["h"])(this.operation_data).then(function(e){200==e.code?(t.msgOk("新增成功"),t.back()):t.msgErr(e.msg)}):Object(r["O"])(this.operation_data).then(function(e){200==e.code?(t.msgOk("编辑成功"),t.back()):t.msgErr(e.msg)})}else this.$Message.error("请输入外部小程序json字符串！",3);else this.$Message.error("跳转内部链接不能为空！",3);else this.$Message.error("请输入"+e+"排序！",3);else this.$Message.error("请上传放大广告图片！",3);else this.$Message.error("请选择"+e+"类型！",3);else this.$Message.error("请选择结束日期！",3);else this.$Message.error("请选择开始日期！",3);else this.$Message.error("请上传"+e+"图片！",3);else this.$Message.error("标题不能为空",3);else this.$Message.error("请选择小程序appid名称！",3)},getCouponStore:function(t,e,a){var i={appid:t,startDate:e,endDate:a};zexApis.getCouponStore(i).done(function(t){200==t.code?(this.couponList=t.data,t.data.length||this.$Message.error("暂无可用优惠券模板，请选择其它小程序appid或时间段！",5)):this.$Message.error(t.msg,3)})},changePagePathType:function(t){"coupon"==t&&this.clickCategory()},clickCategory:function(){this.operation_data.appid?"coupon"==this.operation_data.pagePathType&&this.operation_data.appid&&this.operation_data.startDate&&this.operation_data.endDate&&this.getCouponStore(this.operation_data.appid,this.operation_data.startDate,this.operation_data.endDate):this.$Message.error("请选择小程序appid",3)},changeCoupon:function(t){this.operation_data.pagePath=t},getSpecialTopic:function(){var t=this;if(""!=this.operation_data.startDate)if(""!=this.operation_data.endDate){var e={operationStartDate:this.operation_data.startDate.slice(0,10),operationEndDate:this.operation_data.endDate.slice(0,10),status:1};Object(r["Ob"])(e,this.current).then(function(e){200==e.code?(t.specialTopicList=e.data.records,t.current=e.data.current,t.totalSize=e.data.total,t.specialTopicDisplay=!0):t.msgErr(e.msg)})}else this.msgErr("请先选择结束时间");else this.msgErr("请先选择开始时间")},getSpecialTopicName:function(){var t=this;this.operation_data.startDate.slice(0,10),this.operation_data.endDate.slice(0,10);Object(r["V"])(this.operation_data.pagePath).then(function(e){200==e.code?t.specialTopic="已选择"+e.data.name:t.msgErr(e.msg)})},msgOk:function(t){this.$Message.info({content:t,duration:3})},msgErr:function(t){this.$Message.error({content:t,duration:3})},time1:function(t){if(t){var e=t.slice(0,10)+" 00:00:00";this.operation_data.startDate=e}},clearTime1:function(){this.operation_data.startDate=""},time2:function(t){if(t){var e=t.slice(0,10)+" 23:59:59";this.operation_data.endDate=e}},clearTime2:function(){this.operation_data.endDate=""},changeNumber:function(){var t=""+this.operation_data.sort;if(-1!=t.indexOf(".")){var e=t.split("");e.splice(e.length-1);var a=e.join("");this.operation_data.sort=+a,this.msgErr("只能输入整数")}}}},d=p,h=(a("03ac"),a("6691")),l=Object(h["a"])(d,i,o,!1,null,"cec4a544",null);e["default"]=l.exports},"03ac":function(t,e,a){"use strict";var i=a("5003"),o=a.n(i);o.a},5003:function(t,e,a){}}]);