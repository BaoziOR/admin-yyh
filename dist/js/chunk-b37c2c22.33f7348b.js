(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b37c2c22","chunk-2d224ad6"],{"1d00":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.addStorePage?t._e():a("div",[a("Form",{attrs:{inline:""}},[a("Row",{attrs:{type:"flex",justify:"start"}},[a("Col",[a("FormItem",{attrs:{label:"知而行店号:","label-width":85}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",value:t.store_data.shopId,placeholder:"请输入知而行店号"}})],1)],1),a("Col",[a("FormItem",{attrs:{label:"门店名称:","label-width":85}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",value:t.store_data.shopName,placeholder:"请输入门店名称:"}})],1)],1),a("Col",[a("FormItem",[a("Button",{attrs:{type:"primary",icon:"md-search"},on:{click:t.queryTableList}},[t._v("查询")])],1),a("FormItem",[a("Button",{attrs:{icon:"md-refresh"},on:{click:function(e){return t.handleReset()}}},[t._v("重置")])],1)],1)],1),a("Row",{attrs:{type:"flex",justify:"start"}},[a("Col",{attrs:{span:"8"}},[a("FormItem",[a("Button",{staticStyle:{"margin-bottom":"10px",width:"120px"},attrs:{type:"primary",icon:"md-add"},on:{click:t.addStore}},[t._v("新增门店")])],1),a("FormItem",[a("Button",{staticStyle:{"margin-bottom":"10px",width:"120px"},attrs:{type:"primary",icon:"ios-cloud-upload-outline"},on:{click:function(e){t.uploadShopModal=!0}}},[t._v("导入门店信息")])],1)],1)],1)],1),a("Modal",{attrs:{visible:t.uploadShopModal,width:"700"},on:{"update:visible":function(e){t.uploadShopModal=e}}},[a("p",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v("导入门店列表")])]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",size:"large",long:""},on:{click:t.importStore}},[t._v("确认")])],1)]),a("div",[a("Table",{attrs:{border:"",width:"100%",columns:t.columns6,data:t.store_data_list},scopedSlots:t._u([{key:"action",fn:function(e){e.row;var o=e.index;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.editStore(o)}}},[t._v("编辑")]),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.deleteStore(o)}}},[t._v("删除")])]}}],null,!1,1435884140)})],1),a("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[a("Page",{attrs:{total:t.totalSize,"show-total":"","show-elevator":"","show-sizer":"",current:t.current},on:{"on-change":t.changeCurrent,"on-page-size-change":t.changePageSize}})],1)],1),t.addStorePage?a("div",[a("add-store",{attrs:{type:t.type,storeItem:t.storeItem},on:{changeStatus:t.showStatus}})],1):t._e()])},r=[],s=a("e0c8"),i={name:"store-management",components:{addStore:s["default"]},data:function(){return{columns6:[{title:"知而行店号",key:"shopId",align:"center"},{title:"门店名称",key:"shopName",align:"center"},{title:"经度",key:"longitude",sortable:!0,align:"center"},{title:"纬度",key:"latitude",sortable:!0,align:"center"},{title:"地址",key:"detailAddress",sortable:!0,align:"center"},{title:"操作",key:"operation",align:"center",slot:"action"}],store_data:{shopId:"",status:"",appid:"",shopName:"",start:0,limit:10},store_data_list:[],current:1,totalSize:0,uploadShopModal:!1,importStoreInfo:{appid:"",filePath:""},addStorePage:!1,type:1,storeItem:{}}},created:function(){},methods:{showStatus:function(t){this.addStorePage=t},queryTableList:function(){this.store_data.start=0,this.getWebankMallPage()},getWebankMallPage:function(){var t=this;zexApis.getWebankMallPage(t.store_data).done(function(e){t.store_data_list=e.resultList.resultList,t.store_data.start=e.resultList.start,t.totalSize=e.resultList.totalSize,t.store_data.limit=e.resultList.pageSize,t.current=e.resultList.curPageNum,499==e.code&&t.$Message.error(e.code+" 数据加载失败!",3)})},addStore:function(){this.addStorePage=!0},editStore:function(t){this.addStorePage=!0,this.type=2,this.storeItem=this.store_data_list[t]},deleteStore:function(t){var e=this,a={appid:e.store_data_list[t].appid,shopId:e.store_data_list[t].shopId};e.$Modal.confirm({title:"提示",content:"<p>确定要删除此条数据吗？</p>",onOk:function(){zexApis.deleteShopInfo(a).done(function(t){console.log(t),200==t.code?(e.$Message.success("门店删除成功!",3),e.getWebankMallPage()):e.$Message.error(t.code+t.msg,3)})},onCancel:function(){e.$Message.warning("门店删除已取消",3)}})},handleReset:function(){var t=this;this.$nextTick(function(){Vue.set(t.store_data,"shopId",null),Vue.set(t.store_data,"shopName",null)})},setVender:function(t){this.store_data.appid=t.value},importStore:function(){var t=this;if(t.store_data.appid&&void 0!=t.store_data.appid)if(null!=t.importStoreInfo.filePath&&""!=t.importStoreInfo.filePath){var e=t.importStoreInfo.filePath.name.split(".")[1];if("xlsx"==e||"xls"==e){t.importStoreInfo.appid=t.store_data.appid;var a=new FormData;a.append("appid",t.importStoreInfo.appid),a.append("filePath",t.importStoreInfo.filePath),zexApis.importShopInfo(a).done(function(e){200==e.code?(t.$Message.success("门店导入成功!",3),t.uploadShopModal=!1,t.getWebankMallPage()):t.$Message.error(e.code+","+e.msg,3)})}else alert("文件格式不对，请下载模板按照模板格式上传 ！")}else alert("请选择将要上传的门店文件!");else t.$Message.error("请选择小程序appid!",3)},changePageSize:function(t){var e=this;e.store_data.limit=t,e.getWebankMallPage()},changeCurrent:function(t){var e=this;e.store_data.start=t*e.store_data.limit-e.store_data.limit,e.current=t,e.getWebankMallPage()}}},l=i,n=(a("a14c"),a("6691")),d=Object(n["a"])(l,o,r,!1,null,null,null);e["default"]=d.exports},"92a3":function(t,e,a){},a14c:function(t,e,a){"use strict";var o=a("92a3"),r=a.n(o);r.a},e0c8:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form",{attrs:{"label-width":180}},[a("FormItem",{attrs:{label:"知而行门店号",required:""}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入正整数，比如1155",value:t.store_data.shopId,disabled:2==t.type}})],1),a("FormItem",{attrs:{label:"零售商自有店号",required:""}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入正整数，比如2625",value:t.store_data.venderShopId}})],1),a("FormItem",{attrs:{label:"门店名称",required:""}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入门店名称",value:t.store_data.shopName}})],1),a("FormItem",{attrs:{label:"门店类型",required:""}},[a("Select",{staticStyle:{width:"200px"},attrs:{model:t.store_data.categories},on:{"update:model":function(e){return t.$set(t.store_data,"categories",e)}}},t._l(t.categoriesType,function(e){return a("Option",{key:e.value,attrs:{value:e.label}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{label:"省份",required:""}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入门店所在省份",value:t.store_data.province}})],1),a("FormItem",{attrs:{label:"城市",required:""}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入门店所在城市",value:t.store_data.city}})],1),a("FormItem",{attrs:{label:"地区",required:""}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入门店所在地区",value:t.store_data.district}})],1),a("FormItem",{attrs:{label:"详细地址",required:""}},[a("Input",{staticStyle:{width:"400px"},attrs:{type:"text",placeholder:"请输入门店详细地址",value:t.store_data.address}})],1),a("FormItem",{staticStyle:{"{'margin-top'":"'54px'}"}},[a("i-button",{style:{width:"250px"},attrs:{type:"primary",disabled:t.flag_Submit,size:"large"},on:{click:t.submit}},[t._v("确定")]),a("i-button",{attrs:{size:"large",icon:"arrow-left-c"},on:{click:t.back}},[t._v("返回列表")])],1)],1)],1)},r=[],s={data:function(){return{appStoreList:[],operationType:"",store_data:{appid:"",shopId:"",venderShopId:"",shopName:"",categories:"",address:"",city:"",district:"",province:""},editInfo:null,categoriesType:[{label:"购物,超市",value:1},{label:"购物,便利店",value:2},{label:"购物,母婴儿童",value:3}],flag_Submit:!1}},props:{type:Number,storeItem:Object},components:{},created:function(){console.log(this.type),2==this.type&&(this.store_data.appid=this.storeItem.appid,this.store_data.shopId=this.storeItem.shopId,this.store_data.venderShopId=this.storeItem.venderShopId,this.store_data.shopName=this.storeItem.shopName,this.store_data.categories=this.storeItem.categories,this.store_data.province=this.storeItem.province,this.store_data.city=this.storeItem.city,this.store_data.district=this.storeItem.district,this.store_data.address=this.storeItem.address)},methods:{back:function(){this.$emit("changeStatus",!1)},submit:function(){1==this.type?console.log(新增门店):console.log(编辑门店)}}},i=s,l=a("6691"),n=Object(l["a"])(i,o,r,!1,null,null,null);e["default"]=n.exports}}]);