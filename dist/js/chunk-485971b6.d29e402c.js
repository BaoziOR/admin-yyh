(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-485971b6"],{"48c4":function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"single-group"},[t("Form",{ref:"form",attrs:{model:e.form,rules:e.formValite,"label-width":120}},[t("FormItem",{attrs:{label:"活动名称：",prop:"name",rules:{required:!0,message:"请输入活动名称"}}},[t("Row",[t("Col",{attrs:{span:"10"}},[t("Input",{staticStyle:{width:"90%"},attrs:{maxlength:40,placeholder:"请输入",clearable:""},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1)],1)],1),t("FormItem",{attrs:{label:"活动开始时间：",prop:"startTime",rules:{required:!0,message:"请选择活动开始时间"}}},[t("Row",[t("Col",{attrs:{span:"10"}},[t("DatePicker",{staticClass:"date-range",staticStyle:{width:"90%"},attrs:{value:e.form.startTime,type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"请选择日期",options:e.m_dateOptions},on:{"on-change":e.startTimeChange}})],1)],1)],1),t("FormItem",{attrs:{label:"活动开奖时间："}},[t("RadioGroup",{on:{"on-change":function(r){e.form.openDrawTime=""}},model:{value:e.form.openDrawTimeType,callback:function(r){e.$set(e.form,"openDrawTimeType",r)},expression:"form.openDrawTimeType"}},e._l(e.openDrawTimeTypeList,function(r){return t("Radio",{key:r.value,attrs:{label:r.value}},[e._v(e._s(r.label))])}),1)],1),1==e.form.openDrawTimeType?[t("FormItem",{attrs:{label:"",prop:"openDrawTime",rules:{required:!0,message:"请选择活动开奖时间"}}},[t("Row",[t("Col",{attrs:{span:"10"}},[t("DatePicker",{staticClass:"date-range",staticStyle:{width:"90%"},attrs:{value:e.form.openDrawTime,type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"请选择活动开奖时间",options:e.m_dateOptions},on:{"on-change":e.openDrawTimeChange}})],1)],1)],1)]:2==e.form.openDrawTimeType?[t("FormItem",{attrs:{label:"",prop:"openDrawTime",rules:{required:!0,message:"请选择活动开奖时间"}}},[t("Row",[t("Col",{attrs:{span:"10"}},[t("TimePicker",{staticClass:"date-range",staticStyle:{width:"90%"},attrs:{value:e.form.openDrawTime,format:"HH:mm",placeholder:"请选择活动开奖时间"},on:{"on-change":e.openDrawTimeChange}})],1)],1)],1),t("FormItem",{attrs:{label:"满x人开奖：",prop:"openDrawTimeNeedPlayers",rules:{required:!0,message:"请输入人数"}}},[t("Row",[t("Col",{attrs:{span:"10"}},[t("Input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入人数",clearable:""},model:{value:e.form.openDrawTimeNeedPlayers,callback:function(r){e.$set(e.form,"openDrawTimeNeedPlayers",r)},expression:"form.openDrawTimeNeedPlayers"}})],1)],1)],1)]:e._e(),t("FormItem",{attrs:{label:"投放门店："}},[t("RadioGroup",{model:{value:e.form.storeType,callback:function(r){e.$set(e.form,"storeType",r)},expression:"form.storeType"}},e._l(e.storeTypeList,function(r){return t("Radio",{key:r.value,attrs:{label:r.value}},[e._v(e._s(r.label))])}),1)],1),1==e.form.storeType?[t("FormItem",e._l(e.form.drawDailyShopList,function(r,a){return t("storeView",{key:r.id,attrs:{id:r.id,index:a,shop:r},on:{sendProvinceId:e.sendProvinceId,sendCityId:e.sendCityId,sendAreaId:e.sendAreaId,sendShopId:e.sendShopId,"handleRemove-event":e.handleRemove}})}),1),t("FormItem",{attrs:{label:""}},[t("Button",{staticStyle:{width:"100px"},attrs:{type:"dashed",long:"",icon:"md-add"},on:{click:e.handleAdd}})],1)]:e._e(),t("FormItem",{attrs:{label:"活动大奖："}},[t("RadioGroup",{on:{"on-change":function(r){e.form.bigPrize.prizeName=""}},model:{value:e.form.bigPrizeTemp.type,callback:function(r){e.$set(e.form.bigPrizeTemp,"type",r)},expression:"form.bigPrizeTemp.type"}},e._l(e.typeList,function(r){return t("Radio",{key:r.value,attrs:{label:r.value}},[e._v(e._s(r.label))])}),1)],1),1==e.form.bigPrizeTemp.type?[t("Row",[t("Col",{attrs:{span:"10"}},[t("FormItem",{attrs:{label:"实物名称："}},[t("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"最多15个字",placement:"right"}},[t("Input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入实物名称",maxlength:15,clearable:""},model:{value:e.form.bigPrizeTemp.prizeName1,callback:function(r){e.$set(e.form.bigPrizeTemp,"prizeName1",r)},expression:"form.bigPrizeTemp.prizeName1"}})],1)],1)],1),t("Col",{attrs:{span:"8"}},[t("UploadImage",{attrs:{label:"实物banner：",fileUploadType:"bigPrizeGifImage",defaultList:e.form.bigPrizeGifImageList},on:{uploadSuccess:e.bigPrizeUploadSuccess}})],1)],1)]:2==e.form.bigPrizeTemp.type?[t("FormItem",{key:11,attrs:{label:"选择优惠券",prop:"bigPrizeTemp.prizeName2",rules:{required:!0,message:"请选择优惠券"}}},[t("Row",[t("Col",{attrs:{span:"10"}},[t("Input",{key:11,attrs:{placeholder:"点击按钮选择优惠券",disabled:""},model:{value:e.form.bigPrizeTemp.prizeName2,callback:function(r){e.$set(e.form.bigPrizeTemp,"prizeName2",r)},expression:"form.bigPrizeTemp.prizeName2"}},[t("Button",{attrs:{slot:"append"},on:{click:function(r){return e.handleChoose("bigPrize")}},slot:"append"},[e._v("选择")])],1)],1)],1)],1)]:3==e.form.bigPrizeTemp.type?[t("FormItem",{attrs:{label:"U贝数：",prop:"bigPrizeTemp.prizeNum3",rules:{required:!0,validator:e.checkIsPositiveIntegerEx0}}},[t("Row",[t("Col",{attrs:{span:"10"}},[t("Input",{key:111,staticStyle:{width:"90%"},attrs:{placeholder:"请输入U贝数",clearable:""},model:{value:e.form.bigPrizeTemp.prizeNum3,callback:function(r){e.$set(e.form.bigPrizeTemp,"prizeNum3",r)},expression:"form.bigPrizeTemp.prizeNum3"}})],1)],1)],1)]:e._e(),t("FormItem",{attrs:{label:"阳光普照奖："}},[t("RadioGroup",{model:{value:e.form.normalPrizeTemp.type,callback:function(r){e.$set(e.form.normalPrizeTemp,"type",r)},expression:"form.normalPrizeTemp.type"}},e._l(e.typeList,function(r){return t("Radio",{key:r.value,attrs:{label:r.value}},[e._v(e._s(r.label))])}),1)],1),1==e.form.normalPrizeTemp.type?[t("Row",[t("Col",{attrs:{span:"10"}},[t("FormItem",{attrs:{label:"实物名称："}},[t("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"最多20个字",placement:"right"}},[t("Input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入实物名称",maxlength:20,clearable:""},model:{value:e.form.normalPrizeTemp.prizeName1,callback:function(r){e.$set(e.form.normalPrizeTemp,"prizeName1",r)},expression:"form.normalPrizeTemp.prizeName1"}})],1)],1)],1),t("Col",{attrs:{span:"8"}},[t("UploadImage",{attrs:{label:"实物banner：",fileUploadType:"normalPrizeGifImage",defaultList:e.form.normalPrizeGifImageList},on:{uploadSuccess:e.normalPrizeUploadSuccess}})],1)],1)]:2==e.form.normalPrizeTemp.type?[t("FormItem",{key:22,attrs:{label:"选择优惠券",prop:"normalPrizeTemp.prizeName2",rules:{required:!0,message:"请选择优惠券"}}},[t("Row",[t("Col",{attrs:{span:"10"}},[t("Input",{key:22,attrs:{placeholder:"点击按钮选择优惠券",disabled:""},model:{value:e.form.normalPrizeTemp.prizeName2,callback:function(r){e.$set(e.form.normalPrizeTemp,"prizeName2",r)},expression:"form.normalPrizeTemp.prizeName2"}},[t("Button",{attrs:{slot:"append"},on:{click:function(r){return e.handleChoose("normalPrize")}},slot:"append"},[e._v("选择")])],1)],1)],1)],1)]:3==e.form.normalPrizeTemp.type?[t("FormItem",{attrs:{label:"U贝数：",prop:"normalPrizeTemp.prizeNum3",rules:{required:!0,validator:e.checkIsPositiveIntegerEx0}}},[t("Row",[t("Col",{attrs:{span:"10"}},[t("Input",{key:222,staticStyle:{width:"90%"},attrs:{placeholder:"请输入输入U贝数",clearable:""},model:{value:e.form.normalPrizeTemp.prizeNum3,callback:function(r){e.$set(e.form.normalPrizeTemp,"prizeNum3",r)},expression:"form.normalPrizeTemp.prizeNum3"}})],1)],1)],1)]:e._e(),t("FormItem",{attrs:{label:"领奖说明",prop:"winningRemarks",rules:{required:!1,message:"请输入领奖说明"}}},[t("Row",[t("Col",{attrs:{span:"10"}},[t("Input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入领奖说明",clearable:""},model:{value:e.form.winningRemarks,callback:function(r){e.$set(e.form,"winningRemarks",r)},expression:"form.winningRemarks"}})],1)],1)],1),t("FormItem",{attrs:{label:"参与对象："}},[t("RadioGroup",{model:{value:e.form.joinUserLevel,callback:function(r){e.$set(e.form,"joinUserLevel",r)},expression:"form.joinUserLevel"}},e._l(e.joinUserLevelList,function(r){return t("Radio",{key:r.value,attrs:{label:r.value}},[e._v(e._s(r.label))])}),1)],1),t("FormItem",{attrs:{label:"参加条件："}},[t("RadioGroup",{attrs:{value:2}},[t("Radio",{attrs:{label:2}},[e._v("优惠券")])],1)],1),t("Row",[t("Col",{attrs:{span:"10"}},[t("FormItem",{attrs:{label:" ",prop:"couponName",rules:{required:!0,message:"请选择优惠券"}}},[t("Input",{key:333,attrs:{placeholder:"点击按钮选择优惠券",disabled:""},model:{value:e.form.couponName,callback:function(r){e.$set(e.form,"couponName",r)},expression:"form.couponName"}},[t("Button",{attrs:{slot:"append"},on:{click:function(r){return e.handleChoose("singlePrize")}},slot:"append"},[e._v("选择")])],1)],1)],1)],1),t("FormItem",{attrs:{label:"抽奖规则：",prop:"drawRuleRemarks",rules:{required:!0,message:"抽奖规则描述不能为空"}}},[t("Row",[t("Col",{attrs:{span:"10"}},[t("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"最多600个汉字",placement:"right"}},[t("Input",{staticStyle:{width:"400px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"抽奖规则",maxlength:600},model:{value:e.form.drawRuleRemarks,callback:function(r){e.$set(e.form,"drawRuleRemarks",r)},expression:"form.drawRuleRemarks"}})],1)],1)],1)],1),t("FormItem",{attrs:{label:"广告主名称：",prop:"advertName",rules:{required:!1,message:"请输入广告主名称"}}},[t("Row",[t("Col",{attrs:{span:"10"}},[t("Input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入广告主名称",clearable:""},model:{value:e.form.advertName,callback:function(r){e.$set(e.form,"advertName",r)},expression:"form.advertName"}})],1)],1)],1),t("FormItem",{attrs:{label:"介绍：",prop:"advertIntro",rules:{required:!1,message:"请输入广告主 描述富文本"}}},[t("Row",[t("Col",{attrs:{span:"10"}},[t("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"最多600个汉字",placement:"right"}},[t("Input",{staticStyle:{width:"400px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请输入广告主 描述富文本",maxlength:600},model:{value:e.form.advertIntro,callback:function(r){e.$set(e.form,"advertIntro",r)},expression:"form.advertIntro"}})],1)],1)],1)],1),t("Alert",{attrs:{type:"warning"}},[e._v("选择图片(不大于1M,JPG/PNG/JPEG/BMP）")]),t("Row",{attrs:{type:"flex",justify:"end"}},[t("Col",{attrs:{span:"8"}},[t("UploadImage",{attrs:{label:"列表banner：",fileUploadType:"drawActive",defaultList:this.form.defaultDrawActiveList},on:{uploadSuccess:e.drawActiveUploadSuccess}})],1),t("Col",{attrs:{span:"8"}},[t("UploadImage",{attrs:{label:"详情Banner：",fileUploadType:"banner",defaultList:this.form.defaultBannerList},on:{uploadSuccess:e.bannerUploadSuccess}})],1),t("Col",{attrs:{span:"8"}},[t("UploadImage",{attrs:{label:"Logo：",fileUploadType:"logo",defaultList:this.form.defaultLogoList},on:{uploadSuccess:e.logoUploadSuccess}})],1)],1),t("div",{staticStyle:{"margin-top":"20px"}},[t("FormItem",{attrs:{label:""}},[t("Button",{attrs:{type:"primary"},on:{click:function(r){return e.handleSubmit("form")}}},[e._v("提交")])],1)],1)],2),t("Modal",{attrs:{title:"选择优惠券",width:"650","footer-hide":!0,closable:!1,"mask-closable":!1,styles:{top:"20px"}},model:{value:e.couponModalShow,callback:function(r){e.couponModalShow=r},expression:"couponModalShow"}},[e.couponModalShow?t("chooseCouponListView",{attrs:{prizeType:e.prizeType},on:{"seclectedTr-event":e.selectedTrCallBack}}):e._e()],1)],1)},o=[],i=t("5623"),l=t("7f80"),n=t("05791"),s=t("d260"),m=t("1e28"),p=t("872c");function u(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var d={name:"single-group",components:{storeView:n["default"],chooseCouponListView:s["default"],UploadImage:m["default"]},mixins:[p["a"]],data:function(){var e;return e={failureBackFeeList:[{value:1,label:"是"},{value:0,label:"否"}],openDrawTimeTypeList:[{value:1,label:"固定时间"},{value:2,label:"相对时间（满x人开奖）"}],storeTypeList:[{value:0,label:"全国"},{value:1,label:"门店"}],couponType:2,couponTypelList:[{value:1,label:"周边券"},{value:2,label:"商超券"}],couponId:"",couponName:"",typeList:[{value:1,label:"实物"},{value:2,label:"优惠券"},{value:3,label:"U贝"}],prizeName:""},u(e,"couponType",2),u(e,"couponTypelList",[{value:1,label:"周边券"},{value:2,label:"商超券"}]),u(e,"prizeReferId",""),u(e,"prizeNum",""),u(e,"giftImg",""),u(e,"joinUserLevelList",[{value:4,label:"红人"},{value:5,label:"达人"},{value:0,label:"所有人"}]),u(e,"index",1),u(e,"prizeType",""),u(e,"couponModalShow",!1),u(e,"showStore",!0),u(e,"form",JSON.parse(JSON.stringify(i["a"]))),u(e,"formValite",{}),e},mounted:function(){var e=this.$store.state,r=e.drawType,t=e.singleFormData,a=e.drawData;"add"==r||"add_cache"==r?this.form=JSON.parse(JSON.stringify(t)):"edit"==r&&(this.form=JSON.parse(JSON.stringify(a)))},activated:function(){var e=this.$store.state,r=e.drawType,t=e.singleFormData,a=e.drawData;"add"==r||"add_cache"==r?this.form=JSON.parse(JSON.stringify(t)):"edit"==r&&(this.form=JSON.parse(JSON.stringify(a)))},deactivated:function(){var e=this.$store.state.drawType;"add_cache"==e&&this.$store.commit("g_setData",{singleFormData:JSON.parse(JSON.stringify(this.form))})},methods:{checkIsPositiveIntegerEx0:function(e,r,t){var a=/^([0-9][0-9]*)$/;a.test(r)?t():t(new Error("请输入大于等于0的正整数"))},bigPrizeUploadSuccess:function(e){var r=e.imgUrl;this.form.bigPrizeTemp.giftImg=r,this.form.bigPrizeGifImageList=[{imgUrl:r}]},normalPrizeUploadSuccess:function(e){var r=e.imgUrl;this.form.normalPrizeTemp.giftImg=r,this.form.normalPrizeGifImageList=[{imgUrl:r}]},drawActiveUploadSuccess:function(e){this.form.drawActiveUrl=e.imgUrl},bannerUploadSuccess:function(e){this.form.advertBannerImgUrl=e.imgUrl},logoUploadSuccess:function(e){this.form.advertLogoImgUrl=e.imgUrl},changeComp:function(e){this.compName=e},startTimeChange:function(e){this.form.startTime=e},openDrawTimeChange:function(e){this.form.openDrawTime=e},selectedTrCallBack:function(e){"boolean"!=typeof e&&this.prizeType==e.prizeType&&("singlePrize"==e.prizeType?(this.form.couponType=e.couponType,this.form.couponId=e.id,this.form.couponName=e.name):(this.form["".concat(this.prizeType,"Temp")].couponType=e.couponType,this.form["".concat(this.prizeType,"Temp")].prizeReferId=e.id,this.form["".concat(this.prizeType,"Temp")].prizeName2=e.name)),this.couponModalShow=!1},handleChoose:function(e){this.prizeType=e,this.couponModalShow=!0},handleAdd:function(){this.index++,this.form.drawDailyShopList.push({id:Math.random(),provinceCode:null,cityCode:null,countryCode:null,shopId:null,shopName:null,index:this.index,status:1})},sendProvinceId:function(e,r){var t=this;this.form.drawDailyShopList.some(function(a,o){if(a.id==r)return t.form.drawDailyShopList[o].provinceCode=e,!0})},sendCityId:function(e,r){var t=this;this.form.drawDailyShopList.some(function(a,o){if(a.id==r)return t.form.drawDailyShopList[o].cityCode=e,!0})},sendAreaId:function(e,r){var t=this;this.form.drawDailyShopList.some(function(a,o){if(a.id==r)return t.form.drawDailyShopList[o].countryCode=e,!0})},sendShopId:function(e,r,t){var a=this;this.form.drawDailyShopList.some(function(o,i){if(o.id==t)return a.form.drawDailyShopList[i].shopId=e,a.form.drawDailyShopList[i].shopName=r,!0})},handleRemove:function(e){var r=this;if(1==this.form.drawDailyShopList.length)return this.msgErr("必须保留一条");this.form.drawDailyShopList.some(function(t,a){if(t.id==e)return r.form.drawDailyShopList.splice(a,1),!0})},handleSubmit:function(e){var r=this;this.$refs[e].validate(function(e){if(e){var t=r.form,a=t.openDrawTimeType,o=t.startTime,i=t.openDrawTime;if(1==a){var n=new Date(o),s=new Date(i);if(n>=s){var m="活动开奖时间不能小于等于活动开始时间";return r.msgErr(m)}}var p="/drawDaily/activity/add",u=JSON.parse(JSON.stringify(r.form));u.bigPrize=r.formatFormData(u.bigPrizeTemp),u.normalPrize=r.formatFormData(u.normalPrizeTemp),u.groupType=1,0==u.storeType&&(u.drawDailyShopList=[]),Object(l["g"])(p,u).then(function(e){200==e.code?r.$emit("closeFormModal-event"):r.$Message.error(e.msg)})}})},formatFormData:function(e){var r={type:1,prizeName:"",prizeNum:"",giftImg:"",couponType:2,prizeReferId:null},t=e.type;return r.type=t,1==t?(r.prizeName=e.prizeName1,r.prizeNum=e.prizeNum1,r.giftImg=e.giftImg,r.couponType=0,r.prizeReferId=null):2==t?(r.couponType=e.couponType,r.prizeReferId=e.prizeReferId,r.prizeName=e.prizeName2,r.giftImg=""):(r.prizeNum=e.prizeNum3,r.prizeName="",r.giftImg="",r.couponType=0,r.prizeReferId=null),r},handleReset:function(e){this.$refs[e].resetFields(),this.form.startDate=null,this.form.endDate=null},msgErr:function(e){this.$Message.error({content:e,duration:3})}}},c=d,f=t("6691"),h=Object(f["a"])(c,a,o,!1,null,"0306b22a",null);r["default"]=h.exports},5623:function(e,r,t){"use strict";r["a"]={id:null,groupType:1,name:"",startTime:"",openDrawTimeType:1,openDrawTime:"",openDrawTimeNeedPlayers:1,winningRemarks:"",joinUserLevel:0,couponId:"",couponName:"",couponType:"",drawRuleRemarks:"",advertName:"",advertIntro:"",drawActiveUrl:"",advertBannerImgUrl:"",advertLogoImgUrl:"",bigPrizeGifImageList:[],normalPrizeGifImageList:[],defaultDrawActiveList:[],defaultBannerList:[],defaultLogoList:[],bigPrize:{type:1,prizeName:"",prizeNum:1,giftImg:"",couponType:2,prizeReferId:null},bigPrizeTemp:{type:1,prizeName1:"",prizeNum1:1,giftImg:"",couponType:2,prizeReferId:null,prizeNum3:""},normalPrize:{type:1,prizeName:"",prizeNum:1,giftImg:"",couponType:2,prizeReferId:null},normalPrizeTemp:{type:1,prizeName1:"",prizeNum1:1,giftImg:"",couponType:2,prizeReferId:null,prizeName2:"",prizeNum3:""},storeType:0,drawDailyShopList:[{id:Math.random(),provinceCode:null,cityCode:null,countryCode:null,shopId:null,shopName:null,index:1}]}}}]);