(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01638362","chunk-2c18e934","chunk-743dd334"],{"05791":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Row",[r("Col",{attrs:{span:"4"}},[r("FormItem",{attrs:{prop:"drawDailyShopList["+e.index+"].provinceCode",rules:{required:!0,message:"请选择省份"}}},[r("Select",{attrs:{placeholder:"选择省","label-in-value":!0},on:{"on-change":e.provinceChange},model:{value:e.provinceCode,callback:function(t){e.provinceCode=t},expression:"provinceCode"}},e._l(e.provinceList,function(t,a){return r("Option",{key:a,attrs:{value:t.provinceCode}},[e._v(e._s(t.provinceName))])}),1)],1)],1),r("Col",{attrs:{span:"4"}},[r("FormItem",{attrs:{prop:"drawDailyShopList["+e.index+"].cityCode",rules:{required:!0,message:"请选择市"}}},[r("Select",{attrs:{placeholder:"选择市","label-in-value":!0},on:{"on-change":e.cityChange},model:{value:e.cityCode,callback:function(t){e.cityCode=t},expression:"cityCode"}},e._l(e.cityList,function(t,a){return r("Option",{key:a,attrs:{value:t.cityCode}},[e._v(e._s(t.cityName))])}),1)],1)],1),r("Col",{attrs:{span:"4"}},[r("FormItem",{attrs:{prop:"drawDailyShopList["+e.index+"].countryCode",rules:{required:!0,message:"请选择区"}}},[r("Select",{attrs:{placeholder:"选择区","label-in-value":!0},on:{"on-change":e.areaChange},model:{value:e.countryCode,callback:function(t){e.countryCode=t},expression:"countryCode"}},e._l(e.areaList,function(t,a){return r("Option",{key:a,attrs:{value:t.areaCode}},[e._v(e._s(t.areaName))])}),1)],1)],1),r("Col",{attrs:{span:"4"}},[r("FormItem",{attrs:{prop:"drawDailyShopList["+e.index+"].shopId",rules:{required:!0,message:"请选择门店"}}},[r("Select",{attrs:{placeholder:"选择门店","label-in-value":!0},on:{"on-change":e.shopIdChange},model:{value:e.shopId,callback:function(t){e.shopId=t},expression:"shopId"}},e._l(e.shopList,function(t,a){return r("Option",{key:a,attrs:{value:t.shopId}},[e._v(e._s(t.shopName))])}),1)],1)],1),r("Col",{attrs:{span:"2"}},[r("Button",{attrs:{type:"dashed",long:"",icon:"ios-close"},on:{click:function(t){return e.handleRemove()}}})],1)],1)],1)},o=[],i=r("7f80"),n={props:{id:Number,index:Number,shop:{type:Object,default:function(){return{}}}},data:function(){return{isInit:0,provinceList:[],cityList:[],areaList:[],shopList:[],provinceCode:null,cityCode:null,countryCode:null,shopId:null,provinceName:null,cityName:null,districtName:null}},methods:{loadProvinceList:function(){var e=this;return Object(i["h"])("/system/area/province/list").then(function(t){200==t.code?(e.provinceList=t.data,["provinceCode","cityCode","countryCode","shopId"].forEach(function(t){e[t]=e.shop[t]})):e.$Message.error(t.msg)})},provinceChange:function(e,t){var r=this;this.cityList=[],this.areaList=[],this.shopList=[],this.cityCode=null,this.countryCode=null,this.shopId=null,this.cityName=null,this.districtName=null,this.provinceName=e.label,this.$emit("sendProvinceId",this.provinceCode,this.shop.id),Object(i["d"])("/system/area/city/"+this.provinceCode).then(function(e){200==e.code?r.cityList=e.data:r.$Message.error(e.msg)})},cityChange:function(e,t){var r=this;this.areaList=[],this.shopList=[],this.countryCode=null,this.shopId=null,this.districtName=null,this.cityName=e?e.label:null,this.$emit("sendCityId",this.cityCode,this.shop.id),Object(i["d"])("/system/area/district/"+this.cityCode).then(function(e){200==e.code?(r.areaList=e.data,t&&t()):r.$Message.error(e.msg)})},areaChange:function(e){this.shopList=[],this.shopId=null,this.districtName=e?e.label:null,this.$emit("sendAreaId",this.countryCode,this.shop.id),this.loadShops()},shopIdChange:function(e){e?this.$emit("sendShopId",this.shopId,e.label,this.shop.id):this.$emit("sendShopId",this.shopId,null,this.shop.id)},loadShops:function(){var e=this;return this.provinceName?this.cityName?this.districtName?void Object(i["g"])("/system/sys-shop-info/list?pageNum=1&pageSize=2000",{province:this.provinceName,city:this.cityName,district:this.districtName}).then(function(t){200==t.code?e.shopList=t.data.records:e.$Message.error(t.msg)}):this.$Message.error("请选择区域"):this.$Message.error("请选择区县"):this.$Message.error("请选择省份")},handleRemove:function(){this.$emit("handleRemove-event",this.shop.id)},init:function(){var e=this;Object(i["g"])("/system/area/province/list").then(function(t){return 200==t.code?e.provinceList=t.data:e.$Message.error(t.msg),t}).then(function(t){return e.shop.provinceCode&&(e.provinceCode=e.shop.provinceCode,e.provinceName=e.provinceList.find(function(t){return t.provinceCode==e.provinceCode}).provinceName),t}).then(function(t){Object(i["d"])("/system/area/city/"+e.provinceCode).then(function(t){return 200==t.code?(e.cityList=t.data,e.cityCode=e.shop.cityCode,e.countryCode=null,e.shop.cityCode&&(e.cityName=e.cityList.find(function(t){return t.cityCode==e.cityCode}).cityName)):e.$Message.error(t.msg),t}).then(function(t){e.shop.cityCode&&Object(i["d"])("/system/area/district/"+e.cityCode).then(function(t){200==t.code?(e.areaList=t.data,e.countryCode=e.shop.countryCode,e.shop.countryCode&&(e.districtName=e.areaList.find(function(t){return t.areaCode==e.countryCode}).areaName),e.shop.shopId&&(e.shopId="".concat(e.shop.shopId),e.loadShops())):e.$Message.error(t.msg)})})})}},mounted:function(){var e=this;this.$nextTick(function(){e.loadProvinceList(),e.shop.provinceCode&&e.init()})}},s=n,l=r("6691"),p=Object(l["a"])(s,a,o,!1,null,null,null);t["default"]=p.exports},"10b3":function(e,t,r){},"1e28":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("span",{staticClass:"label"},[e._v(e._s(e.label))]),e._l(e.uploadList,function(t){return r("div",{key:t.uid,staticClass:"demo-upload-list"},[r("img",{attrs:{src:t.imgUrl}}),r("div",{staticClass:"demo-upload-list-cover"},[r("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(r){return e.handleView(t.imgUrl)}}}),r("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(r){return e.handleRemove(t)}}})],1)])}),r("div",{staticStyle:{display:"inline"}},[r("Upload",{ref:"upload",style:e.uploadStyle,attrs:{headers:e.userToken,type:e.dragType,format:["jpg","jpeg","png","bmp"],"show-upload-list":!1,"before-upload":e.handleBeforeUpload,"on-success":e.handleUploadSuccess,action:e.url,accept:"image","max-size":1024,"on-exceeded-size":e.handleMaxSize,"on-format-error":e.handleFormatError}},[0==e.uploadList.length?[r("div",{staticStyle:{width:"90px",height:"90px","line-height":"90px"}},[r("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]:[r("Button",{attrs:{size:"small",icon:"ios-cloud-upload-outline"}},[e._v("更改")])]],2)],1),r("Modal",{attrs:{"footer-hide":!0},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.visible?r("img",{staticStyle:{width:"100%"},attrs:{src:e.imgUrl}}):e._e()])],2)},o=[],i=r("365c"),n=r("62a2"),s={name:"upload-image",props:{label:{type:String,default:""},defaultList:{type:Array,default:function(){return[]}},fileUploadType:{type:[String,Number],default:""}},watch:{defaultList:{handler:function(){this.uploadList=[];for(var e=0;e<this.defaultList.length;e++){var t=this.defaultList[e];this.uploadList.push(t)}},immediate:!0}},computed:{uploadStyle:function(){return 0==this.uploadList.length?"display: inline-block;width:90px;":"float:'left';padding-top:60px;"},dragType:function(){return this.uploadList.length?"select":"drag"}},data:function(){return{userToken:{},url:i["g"],uploadList:[],imgUrl:"",visible:!1}},created:function(){this.userToken={jwttoken:localStorage.getItem("jwttoken")}},mounted:function(){this.defaultList.length&&(this.uploadList=this.defaultList)},methods:{handleView:function(e){this.imgUrl=e,this.visible=!0},handleRemove:function(e){this.uploadList=[]},handleUploadSuccess:function(e,t,r){if(200==e.code){this.uploadList=[];var a=e.image_url;t.imgUrl=a,this.$emit("uploadSuccess",{fileUploadType:this.fileUploadType,imgUrl:a}),this.uploadList.push(t),this.$Message.info("上传图片成功")}else this.$Message.error("上传图片失败，请重新上传")},handleMaxSize:function(e){this.$Message.error("图片不大于1M")},handleFormatError:function(){this.msgErr("只能上传jpg,jpeg,png,bmp格式,请重新上传")},handleBeforeUpload:function(e){return Object(n["a"])(e)},msgOk:function(e){this.$Message.info({content:e,duration:3})},msgErr:function(e){this.$Message.error({content:e,duration:3})}}},l=s,p=(r("6b61"),r("6691")),c=Object(p["a"])(l,a,o,!1,null,"79811e88",null);t["default"]=c.exports},"39b3":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"multi-group"},[r("Form",{ref:"form",attrs:{model:e.form,rules:e.formValite,"label-width":120}},[r("FormItem",{attrs:{label:"活动名称：",prop:"name",rules:{required:!0,message:"请输入活动名称"}}},[r("Row",[r("Col",{attrs:{span:"10"}},[r("Input",{staticStyle:{width:"90%"},attrs:{maxlength:40,placeholder:"请输入",clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1)],1),r("FormItem",{attrs:{label:"活动开始时间：",prop:"startTime",rules:{required:!0,message:"请选择活动开始时间"}}},[r("Row",[r("Col",{attrs:{span:"10"}},[r("DatePicker",{staticClass:"date-range",staticStyle:{width:"90%"},attrs:{value:e.form.startTime,type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"请选择活动开始时间",options:e.m_dateOptions},on:{"on-change":e.startTimeChange}})],1)],1)],1),r("FormItem",{attrs:{label:"活动开奖时间："}},[r("RadioGroup",{on:{"on-change":function(t){e.form.openDrawTime=""}},model:{value:e.form.openDrawTimeType,callback:function(t){e.$set(e.form,"openDrawTimeType",t)},expression:"form.openDrawTimeType"}},e._l(e.openDrawTimeTypeList,function(t){return r("Radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],1),1==e.form.openDrawTimeType?[r("FormItem",{attrs:{label:"",prop:"openDrawTime",rules:{required:!0,message:"请选择活动开奖时间"}}},[r("Row",[r("Col",{attrs:{span:"10"}},[r("DatePicker",{staticClass:"date-range",staticStyle:{width:"90%"},attrs:{value:e.form.openDrawTime,type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"请选择活动开奖时间",options:e.m_dateOptions},on:{"on-change":e.openDrawTimeChange}})],1)],1)],1)]:2==e.form.openDrawTimeType?[r("FormItem",{attrs:{label:"",prop:"openDrawTime",rules:{required:!0,message:"请选择活动开奖时间"}}},[r("Row",[r("Col",{attrs:{span:"10"}},[r("TimePicker",{staticClass:"date-range",staticStyle:{width:"90%"},attrs:{value:e.form.openDrawTime,format:"HH:mm",placeholder:"请选择活动开奖时间"},on:{"on-change":e.openDrawTimeChange}})],1)],1)],1),r("FormItem",{attrs:{label:"满x人开奖：",prop:"openDrawTimeNeedPlayers",rules:{required:!0,message:"请输入人数"}}},[r("Row",[r("Col",{attrs:{span:"10"}},[r("Input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入人数",clearable:""},model:{value:e.form.openDrawTimeNeedPlayers,callback:function(t){e.$set(e.form,"openDrawTimeNeedPlayers",t)},expression:"form.openDrawTimeNeedPlayers"}})],1)],1)],1)]:e._e(),r("FormItem",{attrs:{label:"投放门店："}},[r("RadioGroup",{model:{value:e.form.storeType,callback:function(t){e.$set(e.form,"storeType",t)},expression:"form.storeType"}},e._l(e.storeTypeList,function(t){return r("Radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],1),1==e.form.storeType?[r("FormItem",e._l(e.form.drawDailyShopList,function(t,a){return r("storeView",{key:t.id,attrs:{id:t.id,index:a,shop:t},on:{sendProvinceId:e.sendProvinceId,sendCityId:e.sendCityId,sendAreaId:e.sendAreaId,sendShopId:e.sendShopId,"handleRemove-event":e.handleRemove}})}),1),r("FormItem",{attrs:{label:""}},[r("Button",{staticStyle:{width:"100px"},attrs:{type:"dashed",long:"",icon:"md-add"},on:{click:e.handleAdd}})],1)]:e._e(),r("FormItem",{attrs:{label:"活动大奖："}},[r("RadioGroup",{model:{value:e.form.bigPrizeTemp.type,callback:function(t){e.$set(e.form.bigPrizeTemp,"type",t)},expression:"form.bigPrizeTemp.type"}},e._l(e.typeList,function(t){return r("Radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],1),1==e.form.bigPrizeTemp.type?[r("Row",[r("Col",{attrs:{span:"8"}},[r("FormItem",{attrs:{label:"实物名称："}},[r("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"最多15个字",placement:"right"}},[r("Input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入实物名称",maxlength:15,clearable:""},model:{value:e.form.bigPrizeTemp.prizeName1,callback:function(t){e.$set(e.form.bigPrizeTemp,"prizeName1",t)},expression:"form.bigPrizeTemp.prizeName1"}})],1)],1)],1),r("Col",{attrs:{span:"8"}},[r("FormItem",{attrs:{label:"实物个数："}},[r("Input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入个数",disabled:""},model:{value:e.form.bigPrizeTemp.prizeNum1,callback:function(t){e.$set(e.form.bigPrizeTemp,"prizeNum1",t)},expression:"form.bigPrizeTemp.prizeNum1"}})],1)],1),r("Col",{attrs:{span:"8"}},[r("UploadImage",{attrs:{label:"实物banner：",fileUploadType:"bigPrizeGifImage",defaultList:e.form.bigPrizeGifImageList},on:{uploadSuccess:e.bigPrizeUploadSuccess}})],1)],1)]:2==e.form.bigPrizeTemp.type?[r("FormItem",{key:11,attrs:{label:"选择优惠券",prop:"bigPrizeTemp.prizeName2",rules:{required:!0,message:"请选择优惠券"}}},[r("Row",[r("Col",{attrs:{span:"10"}},[r("Input",{key:11,attrs:{placeholder:"点击按钮选择优惠券",disabled:""},model:{value:e.form.bigPrizeTemp.prizeName2,callback:function(t){e.$set(e.form.bigPrizeTemp,"prizeName2",t)},expression:"form.bigPrizeTemp.prizeName2"}},[r("Button",{attrs:{slot:"append"},on:{click:function(t){return e.handleChoose("bigPrize")}},slot:"append"},[e._v("选择")])],1)],1)],1)],1)]:3==e.form.bigPrizeTemp.type?[r("FormItem",{attrs:{label:"U贝数：",prop:"bigPrizeTemp.prizeNum3",rules:{required:!0,validator:e.checkIsPositiveIntegerEx0}}},[r("Row",[r("Col",{attrs:{span:"10"}},[r("Input",{key:111,staticStyle:{width:"90%"},attrs:{placeholder:"请输入U贝数",clearable:""},model:{value:e.form.bigPrizeTemp.prizeNum3,callback:function(t){e.$set(e.form.bigPrizeTemp,"prizeNum3",t)},expression:"form.bigPrizeTemp.prizeNum3"}})],1)],1)],1)]:e._e(),r("FormItem",{attrs:{label:"阳光普照奖："}},[r("RadioGroup",{model:{value:e.form.normalPrizeTemp.type,callback:function(t){e.$set(e.form.normalPrizeTemp,"type",t)},expression:"form.normalPrizeTemp.type"}},e._l(e.typeList,function(t){return r("Radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],1),1==e.form.normalPrizeTemp.type?[r("Row",[r("Col",{attrs:{span:"8"}},[r("FormItem",{attrs:{label:"实物名称："}},[r("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"最多20个字",placement:"right"}},[r("Input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入实物名称",maxlength:20,clearable:""},model:{value:e.form.normalPrizeTemp.prizeName1,callback:function(t){e.$set(e.form.normalPrizeTemp,"prizeName1",t)},expression:"form.normalPrizeTemp.prizeName1"}})],1)],1)],1),r("Col",{attrs:{span:"8"}},[r("FormItem",{attrs:{label:"实物个数："}},[r("Input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入个数",disabled:""},model:{value:e.form.normalPrizeTemp.prizeNum1,callback:function(t){e.$set(e.form.normalPrizeTemp,"prizeNum1",t)},expression:"form.normalPrizeTemp.prizeNum1"}})],1)],1),r("Col",{attrs:{span:"8"}},[r("UploadImage",{attrs:{label:"实物banner：",fileUploadType:"normalPrizeGifImage",defaultList:e.form.normalPrizeGifImageList},on:{uploadSuccess:e.normalPrizeUploadSuccess}})],1)],1)]:2==e.form.normalPrizeTemp.type?[r("FormItem",{key:22,attrs:{label:"选择优惠券",prop:"normalPrizeTemp.prizeName2",rules:{required:!0,message:"请选择优惠券"}}},[r("Row",[r("Col",{attrs:{span:"10"}},[r("Input",{key:22,attrs:{placeholder:"点击按钮选择优惠券",disabled:""},model:{value:e.form.normalPrizeTemp.prizeName2,callback:function(t){e.$set(e.form.normalPrizeTemp,"prizeName2",t)},expression:"form.normalPrizeTemp.prizeName2"}},[r("Button",{attrs:{slot:"append"},on:{click:function(t){return e.handleChoose("normalPrize")}},slot:"append"},[e._v("选择")])],1)],1)],1)],1)]:3==e.form.normalPrizeTemp.type?[r("FormItem",{attrs:{label:"U贝数：",prop:"normalPrizeTemp.prizeNum3",rules:{required:!0,validator:e.checkIsPositiveIntegerEx0}}},[r("Row",[r("Col",{attrs:{span:"10"}},[r("Input",{key:333,staticStyle:{width:"90%"},attrs:{placeholder:"请输入输入U贝数",clearable:""},model:{value:e.form.normalPrizeTemp.prizeNum3,callback:function(t){e.$set(e.form.normalPrizeTemp,"prizeNum3",t)},expression:"form.normalPrizeTemp.prizeNum3"}})],1)],1)],1)]:e._e(),r("FormItem",{attrs:{label:"领奖说明",prop:"winningRemarks",rules:{required:!1,message:"请输入领奖说明"}}},[r("Row",[r("Col",{attrs:{span:"10"}},[r("Input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入领奖说明",clearable:""},model:{value:e.form.winningRemarks,callback:function(t){e.$set(e.form,"winningRemarks",t)},expression:"form.winningRemarks"}})],1)],1)],1),r("FormItem",{attrs:{label:"参与对象："}},[r("RadioGroup",{model:{value:e.form.joinUserLevel,callback:function(t){e.$set(e.form,"joinUserLevel",t)},expression:"form.joinUserLevel"}},e._l(e.joinUserLevelList,function(t){return r("Radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],1),r("FormItem",{attrs:{label:"总开团数：",prop:"maxOpenGroupCount",rules:{required:!0,validator:e.checkIsPositiveIntegerEx0}}},[r("Row",[r("Col",{attrs:{span:"10"}},[r("Input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入总开团数",clearable:""},model:{value:e.form.maxOpenGroupCount,callback:function(t){e.$set(e.form,"maxOpenGroupCount",t)},expression:"form.maxOpenGroupCount"}})],1)],1)],1),r("FormItem",{attrs:{label:"成团人数：",prop:"groupPlayerCount",rules:{required:!0,validator:e.checkIsPositiveIntegerEx0}}},[r("Row",[r("Col",{attrs:{span:"10"}},[r("Input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入成团人数",clearable:""},model:{value:e.form.groupPlayerCount,callback:function(t){e.$set(e.form,"groupPlayerCount",t)},expression:"form.groupPlayerCount"}})],1)],1)],1),r("FormItem",{attrs:{label:"每人开团次数：",prop:"userOpenGroupCount",rules:{required:!0,validator:e.checkIsPositiveIntegerEx0}}},[r("Row",[r("Col",{attrs:{span:"10"}},[r("Input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入开团次数",clearable:""},model:{value:e.form.userOpenGroupCount,callback:function(t){e.$set(e.form,"userOpenGroupCount",t)},expression:"form.userOpenGroupCount"}})],1)],1)],1),r("FormItem",{attrs:{label:"开团有效时间：",prop:"openGroupMinutes",rules:{required:!0,validator:e.checkIsPositiveIntegerEx0}}},[r("Row",[r("Col",{attrs:{span:"10"}},[r("Input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入开团有效时间",clearable:""},model:{value:e.form.openGroupMinutes,callback:function(t){e.$set(e.form,"openGroupMinutes",t)},expression:"form.openGroupMinutes"}}),e._v("分钟\n        ")],1)],1)],1),r("FormItem",{attrs:{label:"开团消耗U贝：",prop:"openGroupFee",rules:{required:!0,validator:e.checkIsPositiveIntegerEx0}}},[r("Row",[r("Col",{attrs:{span:"10"}},[r("Input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入开团消耗U贝",clearable:""},model:{value:e.form.openGroupFee,callback:function(t){e.$set(e.form,"openGroupFee",t)},expression:"form.openGroupFee"}})],1)],1)],1),r("FormItem",{attrs:{label:"参团次数：",prop:"userJoinGroupCount",rules:{required:!0,validator:e.checkIsPositiveIntegerEx0}}},[r("Row",[r("Col",{attrs:{span:"10"}},[r("Input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入参团次数",clearable:""},model:{value:e.form.userJoinGroupCount,callback:function(t){e.$set(e.form,"userJoinGroupCount",t)},expression:"form.userJoinGroupCount"}})],1)],1)],1),r("FormItem",{attrs:{label:"参团消耗U贝：",prop:"joinGroupFee",rules:{required:!0,validator:e.checkIsPositiveIntegerEx0}}},[r("Row",[r("Col",{attrs:{span:"10"}},[r("Input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入参团消耗U贝",clearable:""},model:{value:e.form.joinGroupFee,callback:function(t){e.$set(e.form,"joinGroupFee",t)},expression:"form.joinGroupFee"}})],1)],1)],1),r("FormItem",{attrs:{label:"团失败u贝返还："}},[r("RadioGroup",{model:{value:e.form.isFailureBackFee,callback:function(t){e.$set(e.form,"isFailureBackFee",t)},expression:"form.isFailureBackFee"}},e._l(e.failureBackFeeList,function(t){return r("Radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],1),r("FormItem",{attrs:{label:"抽奖规则：",prop:"drawRuleRemarks",rules:{required:!0,message:"抽奖规则描述不能为空"}}},[r("Row",[r("Col",{attrs:{span:"10"}},[r("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"最多600个汉字",placement:"right"}},[r("Input",{staticStyle:{width:"400px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"抽奖规则",maxlength:600},model:{value:e.form.drawRuleRemarks,callback:function(t){e.$set(e.form,"drawRuleRemarks",t)},expression:"form.drawRuleRemarks"}})],1)],1)],1)],1),r("FormItem",{attrs:{label:"广告主名称：",prop:"advertName",rules:{required:!1,message:"请输入广告主名称"}}},[r("Row",[r("Col",{attrs:{span:"10"}},[r("Input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入广告主名称",clearable:""},model:{value:e.form.advertName,callback:function(t){e.$set(e.form,"advertName",t)},expression:"form.advertName"}})],1)],1)],1),r("FormItem",{attrs:{label:"介绍：",prop:"advertIntro",rules:{required:!1,message:"请输入广告主 描述富文本"}}},[r("Row",[r("Col",{attrs:{span:"10"}},[r("Tooltip",{attrs:{trigger:"focus",title:"提醒",content:"最多600个汉字",placement:"right"}},[r("Input",{staticStyle:{width:"400px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请输入广告主 描述富文本",maxlength:600},model:{value:e.form.advertIntro,callback:function(t){e.$set(e.form,"advertIntro",t)},expression:"form.advertIntro"}})],1)],1)],1)],1),r("Alert",{attrs:{type:"warning"}},[e._v("选择图片(不大于1M,JPG/PNG/JPEG/BMP）")]),r("Row",{attrs:{type:"flex",justify:"end"}},[r("Col",{attrs:{span:"8"}},[r("UploadImage",{attrs:{label:"列表banner：",fileUploadType:"drawActive",defaultList:e.form.defaultDrawActiveList},on:{uploadSuccess:e.drawActiveUploadSuccess}})],1),r("Col",{attrs:{span:"8"}},[r("UploadImage",{attrs:{label:"详情Banner：",fileUploadType:"banner",defaultList:e.form.defaultBannerList},on:{uploadSuccess:e.bannerUploadSuccess}})],1),r("Col",{attrs:{span:"8"}},[r("UploadImage",{attrs:{label:"Logo：",fileUploadType:"logo",defaultList:e.form.defaultLogoList},on:{uploadSuccess:e.logoUploadSuccess}})],1)],1),r("div",{staticStyle:{"margin-top":"20px"}},[r("FormItem",{attrs:{label:""}},[r("Button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("form")}}},[e._v("提交")])],1)],1)],2),r("Modal",{attrs:{title:"选择优惠券",width:"650","footer-hide":!0,closable:!1,"mask-closable":!1,styles:{top:"20px"}},model:{value:e.couponModalShow,callback:function(t){e.couponModalShow=t},expression:"couponModalShow"}},[e.couponModalShow?r("chooseCouponListView",{attrs:{prizeType:e.prizeType},on:{"seclectedTr-event":e.selectedTrCallBack}}):e._e()],1)],1)},o=[],i=r("a25d"),n=r("7f80"),s=r("05791"),l=r("d260"),p=r("1e28"),c=r("872c");function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m={name:"multi-group",components:{storeView:s["default"],chooseCouponListView:l["default"],UploadImage:p["default"]},mixins:[c["a"]],mounted:function(){var e=this.$store.state,t=e.drawType,r=e.multiFormData,a=e.drawData;"add"==t||"add_cache"==t?this.form=JSON.parse(JSON.stringify(r)):"edit"==t&&(this.form=JSON.parse(JSON.stringify(a)))},data:function(){var e;return e={defaultList:[],failureBackFeeList:[{value:1,label:"是"},{value:0,label:"否"}],openDrawTimeTypeList:[{value:1,label:"固定时间"},{value:2,label:"相对时间（满x人开奖）"}],storeTypeList:[{value:0,label:"全国"},{value:1,label:"门店"}],couponType:2,couponTypelList:[{value:1,label:"周边券"},{value:2,label:"商超券"}],couponId:"",couponName:"",typeList:[{value:1,label:"实物"},{value:2,label:"优惠券"},{value:3,label:"U贝"}],prizeName:""},u(e,"couponType",2),u(e,"couponTypelList",[{value:1,label:"周边券"},{value:2,label:"商超券"}]),u(e,"prizeReferId",""),u(e,"prizeNum",""),u(e,"giftImg",""),u(e,"joinUserLevelList",[{value:1,label:"新人"},{value:2,label:"新客"},{value:3,label:"老客"},{value:4,label:"红人"},{value:5,label:"达人"},{value:0,label:"所有人"}]),u(e,"index",1),u(e,"prizeType",""),u(e,"couponModalShow",!1),u(e,"showStore",!0),u(e,"form",JSON.parse(JSON.stringify(i["a"]))),u(e,"formValite",{}),e},activated:function(){var e=this.$store.state,t=e.drawType,r=e.multiFormData,a=e.drawData;"add"==t||"add_cache"==t?this.form=JSON.parse(JSON.stringify(r)):"edit"==t&&(this.form=JSON.parse(JSON.stringify(a)))},deactivated:function(){var e=this.$store.state.drawType;"add_cache"==e&&this.$store.commit("g_setData",{multiFormData:JSON.parse(JSON.stringify(this.form))})},methods:{checkIsPositiveIntegerEx0:function(e,t,r){var a=/^([0-9][0-9]*)$/;a.test(t)?r():r(new Error("请输入大于等于0的正整数"))},bigPrizeUploadSuccess:function(e){var t=e.imgUrl;this.form.bigPrizeTemp.giftImg=t,this.form.bigPrizeGifImageList=[{imgUrl:t}]},normalPrizeUploadSuccess:function(e){var t=e.imgUrl;this.form.normalPrizeTemp.giftImg=t,this.form.normalPrizeGifImageList=[{imgUrl:t}]},drawActiveUploadSuccess:function(e){this.form.drawActiveUrl=e.imgUrl},bannerUploadSuccess:function(e){this.form.advertBannerImgUrl=e.imgUrl},logoUploadSuccess:function(e){this.form.advertLogoImgUrl=e.imgUrl},changeComp:function(e){this.compName=e},startTimeChange:function(e){this.form.startTime=e},openDrawTimeChange:function(e){this.form.openDrawTime=e},selectedTrCallBack:function(e){"boolean"!=typeof e&&this.prizeType==e.prizeType&&"singlePrize"!=e.prizeType&&(this.form["".concat(this.prizeType,"Temp")].couponType=e.couponType,this.form["".concat(this.prizeType,"Temp")].prizeReferId=e.id,this.form["".concat(this.prizeType,"Temp")].prizeName2=e.name),this.couponModalShow=!1},handleChoose:function(e){this.prizeType=e,this.couponModalShow=!0},handleAdd:function(){this.index++,this.form.drawDailyShopList.push({id:Math.random(),provinceCode:null,cityCode:null,countryCode:null,shopId:null,shopName:null,index:this.index,status:1})},sendProvinceId:function(e,t){var r=this;this.form.drawDailyShopList.some(function(a,o){if(a.id==t)return r.form.drawDailyShopList[o].provinceCode=e,!0})},sendCityId:function(e,t){var r=this;this.form.drawDailyShopList.some(function(a,o){if(a.id==t)return r.form.drawDailyShopList[o].cityCode=e,!0})},sendAreaId:function(e,t){var r=this;this.form.drawDailyShopList.some(function(a,o){if(a.id==t)return r.form.drawDailyShopList[o].countryCode=e,!0})},sendShopId:function(e,t,r){var a=this;this.form.drawDailyShopList.some(function(o,i){if(o.id==r)return a.form.drawDailyShopList[i].shopId=e,a.form.drawDailyShopList[i].shopName=t,!0})},handleRemove:function(e){var t=this;if(1==this.form.drawDailyShopList.length)return this.msgErr("必须保留一条");this.form.drawDailyShopList.some(function(r,a){if(r.id==e)return t.form.drawDailyShopList.splice(a,1),!0})},handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var r=t.form,a=r.openDrawTimeType,o=r.startTime,i=r.openDrawTime;if(1==a){var s=new Date(o),l=new Date(i);if(s>=l){var p="活动开奖时间不能小于等于活动开始时间";return t.msgErr(p)}}var c="/drawDaily/activity/add",u=JSON.parse(JSON.stringify(t.form));u.bigPrize=t.formatFormData(u.bigPrizeTemp),u.normalPrize=t.formatFormData(u.normalPrizeTemp),u.groupType=2,0==u.storeType&&(u.drawDailyShopList=[]),Object(n["g"])(c,u).then(function(e){200==e.code?t.$emit("closeFormModal-event"):t.$Message.error(e.msg)})}})},formatFormData:function(e){var t={type:1,prizeName:"",prizeNum:"",giftImg:"",couponType:2,prizeReferId:null},r=e.type;return t.type=r,1==r?(t.prizeName=e.prizeName1,t.prizeNum=e.prizeNum1,t.giftImg=e.giftImg,t.couponType=0,t.prizeReferId=null):2==r?(t.couponType=e.couponType,t.prizeReferId=e.prizeReferId,t.prizeName=e.prizeName2,t.giftImg=""):(t.prizeNum=e.prizeNum3,t.prizeName="",t.giftImg="",t.couponType=0,t.prizeReferId=null),t},handleReset:function(e){this.$refs[e].resetFields(),this.form.startDate=null,this.form.endDate=null},msgErr:function(e){this.$Message.error({content:e,duration:3})}}},d=m,h=r("6691"),f=Object(h["a"])(d,a,o,!1,null,"d92ce304",null);t["default"]=f.exports},"6b61":function(e,t,r){"use strict";var a=r("10b3"),o=r.n(a);o.a},a25d:function(e,t,r){"use strict";t["a"]={id:null,groupType:2,name:"",startTime:"",openDrawTimeType:1,openDrawTime:"",openDrawTimeNeedPlayers:"",winningRemarks:"",joinUserLevel:1,maxOpenGroupCount:"",groupPlayerCount:"",userOpenGroupCount:"",openGroupMinutes:"",feeType:1,openGroupFee:"",userJoinGroupCount:"",joinGroupFee:"",isFailureBackFee:1,drawRuleRemarks:"",advertName:"",advertIntro:"",drawActiveUrl:"",advertBannerImgUrl:"",advertLogoImgUrl:"",bigPrizeGifImageList:[],normalPrizeGifImageList:[],defaultDrawActiveList:[],defaultBannerList:[],defaultLogoList:[],bigPrize:{type:1,prizeName:"",prizeNum:1,giftImg:"",couponType:2,prizeReferId:null},bigPrizeTemp:{type:1,prizeName1:"",prizeNum1:1,giftImg:"",couponType:2,prizeReferId:null,prizeName2:"",prizeNum3:""},normalPrize:{type:1,prizeName:"",prizeNum:1,giftImg:"",couponType:2,prizeReferId:null},normalPrizeTemp:{type:1,prizeName1:"",prizeNum1:1,giftImg:"",couponType:2,prizeReferId:null,prizeName2:"",prizeNum3:""},storeType:0,drawDailyShopList:[{id:Math.random(),provinceCode:null,cityCode:null,countryCode:null,shopId:null,shopName:null,index:1}]}},d260:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Alert",{attrs:{type:"warning"}},[e._v("请点击选择优惠券类型，按搜索，选择需要的优惠券")]),r("Form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":100}},[r("FormItem",{staticStyle:{display:"inline-block"},attrs:{label:"优惠券类型："}},[r("Select",{staticStyle:{width:"200px"},on:{"on-change":e.optionChange},model:{value:e.searchForm.couponType,callback:function(t){e.$set(e.searchForm,"couponType",t)},expression:"searchForm.couponType"}},e._l(e.couponTypeList,function(t){return r("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),r("FormItem",{staticStyle:{display:"inline-block"},attrs:{label:"优惠券名称："}},[r("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入",clearable:""},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),r("FormItem",{staticClass:"br",attrs:{"label-width":10}},[r("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.search}},[e._v("搜索")])],1)],1),r("Table",{ref:"selection",attrs:{border:"",columns:e.tableColumns,data:e.tableData,"highlight-row":!0,loading:e.loading}}),r("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[r("Page",{attrs:{"show-total":"","show-elevator":"",total:e.page.total,current:e.page.pageNum,"page-size":e.page.pageSize},on:{"on-change":e.changeCurrent}})],1),r("Row",{staticStyle:{"margin-left":"350px","margin-top":"30px"}},[r("Button",{staticStyle:{"margin-right":"20px"},on:{click:e.cancel}},[e._v("取消")]),r("Button",{attrs:{type:"primary"},on:{click:e.selectMerchant}},[e._v("确定")])],1)],1)},o=[],i=(r("7f80"),r("6797")),n={props:{prizeType:{type:String,default:""},couponType:{type:[String,Number],default:2}},computed:{tableColumns:function(){return 1==this.searchForm.couponType?this.columns1:this.columns2}},watch:{prizeType:function(){}},data:function(){var e=this;return{searchForm:{couponType:2,name:""},loading:!1,page:{pageNum:1,pageSize:10,total:0},tableData:[],choice:{id:"",name:""},couponTypeList:[{value:2,label:"超市券"},{value:1,label:"周边券"}],columns1:[{title:"选择",key:"chooseTemplateId",width:70,align:"center",render:function(t,r){var a=r.row.templateId,o=r.row.title,i=!1;i=e.choice.id==a;var n=e;return t("div",[t("Radio",{props:{value:i},on:{"on-change":function(){n.choice.id=a,n.choice.name=o}}})])}},{title:"优惠券ID",align:"center",minWidth:140,key:"templateId"},{title:"优惠券名称",align:"center",minWidth:140,key:"title"},{title:"所属商户",align:"center",minWidth:140,key:"merchantName"}],columns2:[{title:"选择",key:"chooseCampId",width:70,align:"center",render:function(t,r){var a=r.row.campId,o=r.row.name,i=!1;i=e.choice.id==a;var n=e;return t("div",[t("Radio",{props:{value:i},on:{"on-change":function(){n.choice.id=a,n.choice.name=o}}})])}},{title:"优惠券ID",align:"center",minWidth:140,key:"campId"},{title:"优惠券名称",align:"center",minWidth:140,key:"name"}]}},methods:{changeCurrent:function(e){this.page.pageNum=e,this.search()},optionChange:function(){this.tableData=[],this.searchForm.name="",this.page.pageNum=1,this.choice.couponType=this.searchForm.couponType,this.search()},search:function(){var e=this;if(!this.searchForm.couponType)return this.msgErr("请选择优惠券类型");var t="",r={};2==this.searchForm.couponType?(t="/campagin/list",r={isEffective:1,campType:57,status:1,sendChannel:1,name:this.searchForm.name}):(t="/merchantCouponTemplate/backList",r={isActivityCoupon:null,templateStatus:"进行中",title:this.searchForm.name}),this.loading=!0,Object(i["nb"])(t,r,this.page.pageNum).then(function(t){200==t.code?(e.tableData=t.data.records,e.page.pageNum=t.data.current,e.page.total=t.data.total,e.page.pageSize=t.data.size):e.$Message.error(t.code+" 数据加载失败!",3),e.loading=!1})},selectedTr:function(){this.$emit("seclectedTr-event",{prizeType:this.prizeType,couponType:this.couponType,id:this.id,name:this.name})},changeCurren:function(e){this.searchForm.pageNum!=e&&(this.searchForm.pageNum=e,this.search())},selectMerchant:function(){this.choice.id?(this.merchantTabDisplay=!1,this.choice.prizeType=this.prizeType,this.choice.couponType=this.searchForm.couponType,this.$emit("seclectedTr-event",this.choice)):this.msgErr("至少选一个商户")},cancel:function(){this.choice={id:"",name:""},this.$emit("seclectedTr-event",!1)},msgOk:function(e){this.$Message.info({content:e,duration:3})},msgErr:function(e){this.$Message.error({content:e,duration:3})}},mounted:function(){this.search()}},s=n,l=r("6691"),p=Object(l["a"])(s,a,o,!1,null,null,null);t["default"]=p.exports}}]);