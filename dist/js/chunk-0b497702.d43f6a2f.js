(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b497702","chunk-5b38e3fe"],{"023d":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.viewDialogVisible?e("div",{staticClass:"modal",on:{click:function(t){t.stopPropagation()}}},[e("Card",[e("p",{attrs:{slot:"title"},slot:"title"},[t._v("查看详情")]),e("a",{attrs:{slot:"extra",href:"#"},slot:"extra"},[e("Button",{attrs:{type:"dashed",icon:"md-arrow-round-back"},on:{click:function(a){return t.close()}}},[t._v("返回上一层")])],1),e("Form",{ref:"addOrEditModal",attrs:{model:t.modal,rules:t.ruleValidate,"label-width":100,"label-position":"left"}},[e("h3",[t._v("活动信息")]),e("Row",{staticClass:"padding-left-12"},[e("Col",{attrs:{span:"18"}},[e("FormItem",{attrs:{label:"活动名称"}},[t._v("\n                    "+t._s(t.modal.name)+"\n                ")])],1)],1),e("Row",{staticClass:"padding-left-12"},[e("Col",{attrs:{span:"18"}},[e("FormItem",{attrs:{label:"活动时间"}},[t._v("\n                    "+t._s(t.modal.startTime)+" -- "+t._s(t.modal.endTime)+"\n                ")])],1)],1),e("Row",{staticClass:"padding-left-12"},[e("Col",{attrs:{span:"18"}},[e("FormItem",{attrs:{label:"状态"}},[t._v("\n                    "+t._s(t.modal.status?t.statusList[t.modal.status-1].label:"")+"\n                ")])],1)],1),e("h3",[t._v("请选择参与活动券")]),e("Row",{staticClass:"padding-left-12"},[e("Col",{attrs:{span:"18"}},[e("FormItem",{attrs:{label:"参与活动券"}},[t.couponObj.length?e("Button",{attrs:{type:"dashed"}},t._l(t.couponObj,function(a){return e("span",[t._v(t._s(a.title+"  "))])}),0):t._e()],1)],1)],1),e("h3",[t._v("赠送规则")]),e("Row",{staticClass:"padding-left-12"},[e("Col",{attrs:{span:"24"}},[1==t.modal.wardType?e("div",[e("FormItem",{attrs:{label:"赠送规则"}},[e("span",[t._v("核销赠券")]),e("div",{staticStyle:{width:"2%",display:"inline-block"}}),e("span",{staticClass:"colof-a2"},[t._v("(在核销商户券码时，赠送优惠券至店员卡包，前提店员是要优惠C端用户)")]),e("div",{staticStyle:{width:"2%",display:"inline-block"}}),t._l(t.JawardRuleDtos,function(a,i){return e("div",{staticClass:"radio-item"},[e("div",{staticStyle:{margin:"10px 0"}},[e("Button",{attrs:{type:"dashed"}},[t._v(t._s(a.title))])],1)])})],2)],1):t._e(),2==t.modal.wardType?e("div",[e("FormItem",{attrs:{label:"赠送规则"}},[e("span",[t._v("核销赠U贝")]),e("div",{staticStyle:{width:"2%",display:"inline-block"}}),e("span",{staticClass:"colof-a2"},[t._v("(在核销主商户券码时，赠送平台U贝，前提店员是要优惠C端用户)")]),e("div",{staticStyle:{width:"2%",display:"inline-block"}}),t._l(t.UawardRuleDtos,function(a,i){return e("div",{staticClass:"radio-item"},[e("div",{staticStyle:{margin:"10px 0"}},[e("InputNumber",{staticStyle:{width:"150px"},attrs:{min:0,step:1,type:"text",precision:0,disabled:"",placeholder:"请输入U贝数量"},model:{value:a.award,callback:function(e){t.$set(a,"award",e)},expression:"item.award"}}),t._v(" U贝\n                            ")],1)])})],2)],1):t._e()])],1),e("Row",{staticClass:"padding-left-12"},[e("Col",{attrs:{span:"18"}},[e("FormItem",{attrs:{label:"创建时间"}},[e("span",[t._v(t._s(t.modal.createTime))])])],1)],1),e("Row",{staticClass:"padding-left-12"},[e("Col",{attrs:{span:"18"}},[e("FormItem",{attrs:{label:"最后修改时间"}},[e("span",[t._v(t._s(t.modal.updateTime))])])],1)],1),e("Row",{staticClass:"padding-left-12"},[e("Col",{attrs:{span:"18"}},[e("FormItem",{attrs:{label:"最后修改人"}},[e("span",[t._v(t._s(t.modal.updateBy))])])],1)],1),e("FormItem",[e("Button",{staticStyle:{"margin-left":"8px",float:"right"},on:{click:t.close}},[t._v("关闭")])],1)],1)],1)],1):t._e()},s=[],l=e("7f80"),o={name:"show-detail-modal",props:{viewDialogVisible:{type:Boolean,default:!1}},data:function(){return{data:{},titleName:"",statusList:[{value:1,label:"未开始"},{value:2,label:"进行中"},{value:3,label:"已结束"},{value:4,label:"已终止"}],modal:{name:"",startTime:"",endTime:"",wardType:"1",type:"1",id:"",static:"0",createTime:"",updateBy:"",updateTime:""},JawardRuleDtos:[{verifyCountMin:null,verifyCountMax:null,awardAmount:null,awardType:"1",couponType:"",awardName:""}],UawardRuleDtos:[{verifyCountMin:null,verifyCountMax:null,awardAmount:null,awardType:"2",couponType:"",awardName:""}],selectActiveVolumeObj:{},couponObj:[],ruleValidate:{requiredType:[{required:!0,message:"",trigger:"blur"}]}}},methods:{changeDateTime:function(t,a){switch(a){case 1:this.modal.applyDateRangeOpen=t;break;case 2:this.modal.applyDateRangeClose=t;break}},resetRow:function(t){var a=this;this.modal={},this.couponObj=[],t&&(this.data=t,this.modal.id=t.id,Object(l["c"])("/customer/activity/award/activity/".concat(t.id)).then(function(t){if("200"===t.code){var e=t.data;a.modal.name=e.name,a.modal.startTime=e.startTime,a.modal.wardType=e.awardType.toString(),a.modal.endTime=e.endTime,a.modal.type="2",a.couponObj=e.coupons,a.modal.status=e.status,a.modal.createTime=e.createTime,a.modal.updateBy=e.updateBy,a.modal.updateTime=e.updateTime,"1"==e.awardType?(a.JawardRuleDtos=e.awardRuleVos,a.JawardRuleDtos.forEach(function(t,a){t.verifyCountMax||(t.verifyCountMax=null),t.verifyCountMin||(t.verifyCountMin=null)}),a.UawardRuleDtos=[{verifyCountMin:null,verifyCountMax:null,awardAmount:null,awardType:"1",couponType:"",awardName:""}]):"2"==e.awardType&&(a.UawardRuleDtos=e.awardRuleVos,a.UawardRuleDtos.forEach(function(t,a){t.verifyCountMax||(t.verifyCountMax=null),t.verifyCountMin||(t.verifyCountMin=null)}),a.JawardRuleDtos=[{verifyCountMin:null,verifyCountMax:null,awardAmount:null,awardType:"2",couponType:"",awardName:""}])}else a.$Message.error("获取数据失败")}))},ok:function(){console.log(this.modal)},close:function(){this.$emit("setViewDialogVisible",!1)}}},n=o,r=(e("6346"),e("6691")),c=Object(r["a"])(n,i,s,!1,null,"0f1ccc64",null);a["default"]=c.exports},6346:function(t,a,e){"use strict";var i=e("aa8b"),s=e.n(i);s.a},9765:function(t,a,e){},a6e8:function(t,a,e){"use strict";var i=e("9765"),s=e.n(i);s.a},aa8b:function(t,a,e){},d10a:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticStyle:{height:"100%"}},[t.AddViewDialogVisible||t.ShowViewDialogVisible?t._e():e("div",{staticStyle:{height:"100%"}},[e("Card",{staticStyle:{height:"100%"}},[e("p",{attrs:{slot:"title"},slot:"title"},[t._v("核销返奖励（用户）")]),e("a",{attrs:{slot:"extra",href:"#"},slot:"extra"},[e("Button",{attrs:{type:"dashed",icon:"md-arrow-round-back"},on:{click:function(a){return t.close()}}},[t._v("返回上一层")])],1),e("div",[e("Card",{staticStyle:{"margin-bottom":"2px"},attrs:{bordered:!1}},[e("Form",{ref:"searchForm",attrs:{"label-position":"right","label-width":80,model:t.searchForm,inline:""}},[e("FormItem",{staticStyle:{width:"25%"},attrs:{label:"活动名称",span:"24"}},[e("Input",{attrs:{placeholder:"活动名称"},model:{value:t.searchForm.name,callback:function(a){t.$set(t.searchForm,"name",a)},expression:"searchForm.name"}})],1),e("FormItem",{staticStyle:{width:"23%"},attrs:{label:"赠送方式",span:"24"}},[e("Select",{staticStyle:{width:"100%"},model:{value:t.searchForm.awardType,callback:function(a){t.$set(t.searchForm,"awardType",a)},expression:"searchForm.awardType"}},t._l(t.typeList,function(a){return e("Option",{key:a.value,attrs:{value:a.value}},[t._v(t._s(a.label))])}),1)],1),e("FormItem",{staticStyle:{width:"23%"},attrs:{label:"状态",span:"24"}},[e("Select",{staticStyle:{width:"100%"},model:{value:t.searchForm.status,callback:function(a){t.$set(t.searchForm,"status",a)},expression:"searchForm.status"}},t._l(t.statusList,function(a){return e("Option",{key:a.value,attrs:{value:a.value}},[t._v(t._s(a.label))])}),1)],1),e("FormItem",{staticStyle:{width:"23%"},attrs:{span:"24","label-width":1}},[e("Button",{staticClass:"submit",staticStyle:{"margin-right":"5px"},attrs:{type:"primary",icon:"ios-search"},on:{click:function(a){return t.search("searchForm")}}},[t._v("搜索")]),e("Button",{attrs:{icon:"md-refresh"},on:{click:t.reset}},[t._v("重置")])],1)],1)],1),e("Card",[e("Row",{staticClass:"operation"},[e("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.addStaff}},[t._v("新增")])],1),e("Row",[e("Table",{ref:"table",attrs:{loading:t.TableLoading,border:"",columns:t.tableColumns,data:t.listData,sortable:"custom"},on:{"on-selection-change":t.handleSelect},scopedSlots:t._u([{key:"action",fn:function(a){var i=a.row;return[2!=i.status?e("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"},on:{click:function(a){return t.edit(i)}}},[t._v("编辑")]):t._e(),e("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"info",size:"small"},on:{click:function(a){return t.showDetail(i)}}},[t._v("查看")]),2!=i.status?e("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"error",size:"small"},on:{click:function(a){return t.del(i)}}},[t._v("删除")]):t._e(),2==i.status?e("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"error",size:"small"},on:{click:function(a){return t.stop(i)}}},[t._v("终止")]):t._e()]}},{key:"activeTime",fn:function(a){var i=a.row;return[e("div",[t._v(t._s(i.startTime+" - "+i.endTime))])]}},{key:"status",fn:function(a){var i=a.row;return[e("div",[t._v(t._s(t.statusList[i.status-1].label))])]}},{key:"awardType",fn:function(a){var i=a.row;return[e("div",[t._v(t._s(t.typeList[Number(i.awardType)-1].label))])]}}],null,!1,3720335883)})],1),e("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[e("Page",{staticStyle:{float:"right"},attrs:{total:t.totalSize,"show-total":"","show-elevator":"",current:t.current},on:{"on-change":t.changeCurrent,"update:current":function(a){t.current=a}}})],1)],1)],1)])],1),e("AddOrEdit",{ref:"AddOrEdit",attrs:{viewDialogVisible:t.AddViewDialogVisible},on:{setViewDialogVisible:t.closeTab,search:t.search}}),e("showDetail",{ref:"showDetail",attrs:{viewDialogVisible:t.ShowViewDialogVisible},on:{setViewDialogVisible:t.closeTab}})],1)},s=[],l=e("7f80"),o=e("9bc6"),n=e("023d"),r={name:"WriteOffRewardC",components:{AddOrEdit:o["default"],showDetail:n["default"]},data:function(){return{typeList:[{value:1,label:"核销赠券"},{value:2,label:"核销赠U贝"}],statusList:[{value:1,label:"未开始"},{value:2,label:"进行中"},{value:3,label:"已结束"},{value:4,label:"已终止"}],TableLoading:!1,auditing:0,totalSize:0,current:1,listData:[],selectDataList:[],tableColumns:[{title:"操作",width:200,align:"center",slot:"action",fixed:"left"},{title:"活动名称",width:200,align:"center",key:"name"},{title:"赠送方式",width:150,align:"center",slot:"awardType"},{title:"活动时间",width:200,align:"center",slot:"activeTime"},{title:"状态",width:100,align:"center",slot:"status"},{title:"操作人",minWidth:100,align:"center",key:"createBy"},{title:"操作时间",minWidth:200,align:"center",key:"createTime"}],searchForm:{awardType:"",name:"",page:1,size:10,status:"",type:1},AddViewDialogVisible:!1,ShowViewDialogVisible:!1}},created:function(){},activated:function(){this.loadTableData()},methods:{search:function(){this.current=1,this.loadTableData(this.searchForm)},reset:function(){this.searchForm.name="",this.searchForm.page=1,this.searchForm.awardType="",this.searchForm.status=""},loadTableData:function(t){var a=this;this.totalSize=0,this.listData=[],this.TableLoading=!0,Object(l["g"])("/customer/activity/award/activity/list?pageNum=".concat(this.searchForm.page,"&pageSize=10"),this.searchForm).then(function(t){a.TableLoading=!1,"200"===t.code?(a.totalSize=t.data.total,a.listData=t.data.records):a.$Message.error("获取数据失败")})},addStaff:function(){var t=this;this.AddViewDialogVisible=!0,this.$emit("closeTab",!0),this.$nextTick(function(){t.$refs["AddOrEdit"].resetRow()})},edit:function(t){var a=this;this.AddViewDialogVisible=!0,this.$emit("closeTab",!0),this.$nextTick(function(){a.$refs["AddOrEdit"].resetRow(t)})},showDetail:function(t){var a=this;this.ShowViewDialogVisible=!0,this.$emit("closeTab",!0),this.$nextTick(function(){a.$refs["showDetail"].resetRow(t)})},del:function(t){var a=this;this.$Modal.confirm({title:"确认删除",content:"<p>您确定要删除该条活动吗？</p>",onOk:function(){Object(l["g"])("/customer/activity/award/activity/status",{id:t.id,status:0,type:1}).then(function(t){a.TableLoading=!1,"200"===t.code?a.search():a.$Message.error(t.msg)})},onCancel:function(){}})},stop:function(t){var a=this;this.$Modal.confirm({title:"确认终止",content:"<p>您确定要终止该条活动吗？</p>",onOk:function(){Object(l["g"])("/customer/activity/award/activity/status",{id:t.id,status:4,type:1}).then(function(t){a.TableLoading=!1,"200"===t.code?a.search():a.$Message.error(t.msg)})},onCancel:function(){}})},handleSelect:function(t,a){this.selectDataList=t},batchAudit:function(){},changeCurrent:function(t){this.searchForm.page!=t&&(this.searchForm.page=t,this.loadTableData(this.searchForm))},closeTab:function(t){this.AddViewDialogVisible=!1,this.ShowViewDialogVisible=!1,this.$emit("closeTab",!1)},close:function(){this.$emit("close",!1)}}},c=r,d=(e("a6e8"),e("6691")),u=Object(d["a"])(c,i,s,!1,null,"900ed7f0",null);a["default"]=u.exports}}]);