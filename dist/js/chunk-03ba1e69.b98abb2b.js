(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03ba1e69"],{"00ff":function(e,t,a){},"0221":function(e,t,a){"use strict";var c=a("00ff"),i=a.n(c);i.a},"0579":function(e,t,a){"use strict";a.r(t);var c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"coupon-list-box"},[a("Modal",{attrs:{title:"优惠券列表",width:"900","footer-hide":"",closable:!0,"mask-closable":!1,styles:{top:"20px"}},on:{"on-cancel":e.closeDialog},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[a("div",[a("row",[a("Form",{ref:"searchItem",staticClass:"search-form",attrs:{model:e.searchItem,inline:"","label-width":100}},[a("FormItem",{attrs:{label:"商户名称："}},[a("Input",{staticStyle:{width:"150px"},attrs:{type:"text",clearable:"",placeholder:"请输入商户名称："},model:{value:e.searchItem.merchantName,callback:function(t){e.$set(e.searchItem,"merchantName",t)},expression:"searchItem.merchantName"}})],1),a("FormItem",{attrs:{label:"优惠券名称："}},[a("Input",{staticStyle:{width:"150px"},attrs:{type:"text",clearable:"",placeholder:"请输入优惠券名称"},model:{value:e.searchItem.couponName,callback:function(t){e.$set(e.searchItem,"couponName",t)},expression:"searchItem.couponName"}})],1),a("FormItem",{attrs:{label:"所在地区"}},[a("Select",{staticStyle:{width:"150px"},attrs:{clearable:""},on:{"on-change":e.getcitylist},model:{value:e.searchItem.provinceId,callback:function(t){e.$set(e.searchItem,"provinceId",t)},expression:"searchItem.provinceId"}},e._l(e.provincelist,function(t,c){return a("Option",{key:c,attrs:{value:t.provinceCode}},[e._v(e._s(t.provinceName))])}),1),a("Select",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:e.searchItem.cityId,callback:function(t){e.$set(e.searchItem,"cityId",t)},expression:"searchItem.cityId"}},e._l(e.citylist,function(t,c){return a("Option",{key:c,attrs:{value:t.cityCode}},[e._v(e._s(t.cityName))])}),1)],1),a("FormItem",{staticClass:"br",staticStyle:{"margin-left":"-35px"}},[a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.search}},[e._v("搜索")]),a("Button",{on:{click:e.reset}},[e._v("重置")])],1)],1)],1),a("Table",{ref:"selection",staticClass:"bussiness-list",attrs:{border:"",size:"small",columns:e.tableColumns,data:e.tableData,loading:e.tableLoading}}),a("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[a("Page",{attrs:{"show-total":"","show-elevator":"",current:e.page.page,"page-size":e.page.size,total:e.page.total},on:{"on-change":e.changeCurrent}})],1)],1),a("Row",{staticStyle:{"margin-left":"350px","margin-top":"30px"}},[a("Button",{staticStyle:{"margin-right":"20px"},on:{click:e.cancel}},[e._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:e.selectMerchant}},[e._v("确定")])],1)],1)],1)},i=[],n=a("7f80");function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,c)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(a,!0).forEach(function(t){s(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l={name:"coupon-list",data:function(){var e=this;return{isShow:!0,choice:{_id:"",id:"",name:""},edit_loading:!1,isCheckDisabled:!1,checkResult:0,tableColumns:[{title:"序号",type:"index",width:70,align:"center"},{title:"选择",key:"_id",width:70,align:"center",render:function(t,a){var c=a.row,i=c._id,n=c.templateId,r=c.title,o=!1;o=e.choice._id==i;var s=e;return t("div",[t("Radio",{props:{value:o},on:{"on-change":function(){console.log("change",a.row),s.choice._id=i,s.choice.id=n,s.choice.name=r,s.choice.row=a.row}}})])}},{title:"商户名称",align:"center",minWidth:130,key:"merchantName"},{title:"省/市",align:"center",width:150,key:"address",render:function(e,t){var a=t.row,c=a.province,i=a.city,n="".concat(c,"/").concat(i);return e("span",n)}},{title:"优惠券名称",align:"center",width:230,key:"title"},{title:"有效期",align:"center",width:180,key:"time",render:function(e,t){var a=t.row,c=a.useStartTime,i=a.useEndTime,n="-";return c&&i&&(n="".concat(c,"-").concat(i)),e("span",n)}}],tableData:[],page:{page:1,size:10,total:0},tableLoading:!1,searchItem:{merchantName:"",couponName:"",provinceId:"",cityId:""},provincelist:[],citylist:[],selectedMerchantList:[]}},methods:{getprovincelist:function(){var e=this;Object(n["g"])("/system/area/province/list").then(function(t){200==t.code?e.provincelist=t.data:e.$Message.error(t.msg)})},getcitylist:function(){var e=this;Object(n["c"])("/system/area/city/"+this.searchItem.provinceId).then(function(t){200==t.code?e.citylist=t.data:e.$Message.error(t.msg)})},cancel:function(){this.closeDialog()},search:function(){this.queryTableData()},queryTableData:function(e){var t=this;this.page.page=e||1,this.tableLoading=!1;var a=o({couponName:this.searchItem.couponName,merchantName:this.searchItem.merchantName,provinceCode:this.searchItem.provinceId,cityCode:this.searchItem.cityId},this.page);Object(n["g"])("/coupon/merchant/list",a).then(function(e){var a=e.code,c=e.data,i=c.current,n=c.total,r=c.size,o=c.records,s=e.msg;200==a?(t.tableData=o.map(function(e){return e._id=Math.random(),e}),t.page.page=i,t.page.total=n,t.page.size=r):t.msgErr(s),t.tableLoading=!1})},closeDialog:function(){this.$emit("update:showCouponList",!1)},selectMerchant:function(){this.choice.id?(this.$emit("seclectedTr-event",this.choice),this.closeDialog()):this.msgErr("至少选一个优惠券")},reset:function(){this.searchItem={merchantName:"",couponName:"",provinceId:"",cityId:""},this.page={page:1,size:10,total:0},this.queryTableData()},changeCurrent:function(e){this.queryTableData(e)},msgOk:function(e){this.$Message.info({content:e,duration:3})},msgErr:function(e){this.$Message.error({content:e,duration:3})}},mounted:function(){this.queryTableData(),this.getprovincelist()}},h=l,u=(a("0221"),a("b0e3"),a("6691")),p=Object(u["a"])(h,c,i,!1,null,"577c9b42",null);t["default"]=p.exports},"591f":function(e,t,a){},b0e3:function(e,t,a){"use strict";var c=a("591f"),i=a.n(c);i.a}}]);